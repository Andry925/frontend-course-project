/*! For license information please see LICENSES */
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b0574ee2-637f-44a9-bbef-ff578e53d486",e._sentryDebugIdIdentifier="sentry-dbid-b0574ee2-637f-44a9-bbef-ff578e53d486")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"385b963232c485d0dd13a35b1acc0e9158ff9321"},(window.webpackJsonp=window.webpackJsonp||[]).push([[192],{2017:function(e,t,n){"use strict";n.r(t),n.d(t,"AvatarPlaceholder",(function(){return he})),n.d(t,"ChatThumbnail",(function(){return Nn})),n.d(t,"CommonButton",(function(){return ve})),n.d(t,"ModeratorAvatar",(function(){return _e})),n.d(t,"NotificationMessage",(function(){return ln})),n.d(t,"PageSourceMessage",(function(){return un})),n.d(t,"SimpleMessage",(function(){return Cn})),n.d(t,"default",(function(){return Qn}));var r=n(205),o=["compactDisplay","currency","currencyDisplay","currencySign","localeMatcher","notation","numberingSystem","signDisplay","style","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"],l=["dateStyle","timeStyle","calendar","localeMatcher","hour12","hourCycle","timeZone","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function c(e,t){typeof console<"u"&&(console.warn("[vue-i18n] "+e),t&&console.warn(t.stack))}var h=Array.isArray;function _(e){return null!==e&&"object"==typeof e}function d(e){return"string"==typeof e}var m=Object.prototype.toString;function f(e){return"[object Object]"===m.call(e)}function v(e){return null==e}function C(e){return"function"==typeof e}function y(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=null,s=null;return 1===e.length?_(e[0])||h(e[0])?s=e[0]:"string"==typeof e[0]&&(n=e[0]):2===e.length&&("string"==typeof e[0]&&(n=e[0]),(_(e[1])||h(e[1]))&&(s=e[1])),{locale:n,params:s}}function w(e){return JSON.parse(JSON.stringify(e))}function k(e,t){return!!~e.indexOf(t)}var S=Object.prototype.hasOwnProperty;function T(e,t){return S.call(e,t)}function x(e){for(var t=arguments,n=Object(e),s=1;s<arguments.length;s++){var r=t[s];if(null!=r){var i=void 0;for(i in r)T(r,i)&&(_(r[i])?n[i]=x(n[i],r[i]):n[i]=r[i])}}return n}function M(e,t){if(e===t)return!0;var n=_(e),s=_(t);if(!n||!s)return!n&&!s&&String(e)===String(t);try{var r=h(e),i=h(t);if(r&&i)return e.length===t.length&&e.every((function(e,n){return M(e,t[n])}));if(r||i)return!1;var a=Object.keys(e),o=Object.keys(t);return a.length===o.length&&a.every((function(n){return M(e[n],t[n])}))}catch{return!1}}var O={name:"i18n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(e,t){var s=t.data,n=t.parent,i=t.props,a=t.slots,r=n.$i18n;if(r){var o=i.path,l=i.locale,u=i.places,c=a(),h=r.i(o,l,function(e){var t;for(t in e)if("default"!==t)return!1;return Boolean(t)}(c)||u?function(e,t){var n=t?function(e){return Array.isArray(e)?e.reduce(I,{}):Object.assign({},e)}(t):{};if(!e)return n;e=e.filter((function(e){return e.tag||""!==e.text.trim()}));var s=e.every(L);return e.reduce(s?j:I,n)}(c.default,u):c),_=i.tag&&!0!==i.tag||!1===i.tag?i.tag:"span";return _?e(_,s,h):h}}};function j(e,t){return t.data&&t.data.attrs&&t.data.attrs.place&&(e[t.data.attrs.place]=t),e}function I(e,t,n){return e[n]=t,e}function L(e){return Boolean(e.data&&e.data.attrs&&e.data.attrs.place)}var E,P={name:"i18n-n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},value:{type:Number,required:!0},format:{type:[String,Object]},locale:{type:String}},render:function(e,t){var s=t.props,n=t.parent,i=t.data,a=n.$i18n;if(!a)return null;var r=null,l=null;d(s.format)?r=s.format:_(s.format)&&(s.format.key&&(r=s.format.key),l=Object.keys(s.format).reduce((function(e,g){var t;return k(o,g)?Object.assign({},e,((t={})[g]=s.format[g],t)):e}),null));var c=s.locale||a.locale,u=a._ntp(s.value,c,r,l),h=u.map((function(e,g){var t,n=i.scopedSlots&&i.scopedSlots[e.type];return n?n(((t={})[e.type]=e.value,t.index=g,t.parts=u,t)):e.value})),m=s.tag&&!0!==s.tag||!1===s.tag?s.tag:"span";return m?e(m,{attrs:i.attrs,class:i.class,staticClass:i.staticClass},h):h}};function R(e,t,n){!A(e,n)||$(e,t,n)}function F(e,t,n,s){if(A(e,n)){var r=n.context.$i18n;(function(e,t){var n=t.context;return e._locale===n.$i18n.locale})(e,n)&&M(t.value,t.oldValue)&&M(e._localeMessage,r.getLocaleMessage(r.locale))||$(e,t,n)}}function D(e,t,n,s){if(n.context){var i=n.context.$i18n||{};!t.modifiers.preserve&&!i.preserveDirectiveContent&&(e.textContent=""),e._vt=void 0,delete e._vt,e._locale=void 0,delete e._locale,e._localeMessage=void 0,delete e._localeMessage}else c("Vue instance does not exists in VNode context")}function A(e,t){var n=t.context;return n?!!n.$i18n||(c("VueI18n instance does not exists in Vue instance"),!1):(c("Vue instance does not exists in VNode context"),!1)}function $(e,t,n){var s,r,a=function(e){var t,n,s,r;return d(e)?t=e:f(e)&&(t=e.path,n=e.locale,s=e.args,r=e.choice),{path:t,locale:n,args:s,choice:r}}(t.value),o=a.path,l=a.locale,h=a.args,u=a.choice;if(o||l||h)if(o){var _=n.context;e._vt=e.textContent=null!=u?(s=_.$i18n).tc.apply(s,[o,u].concat(W(l,h))):(r=_.$i18n).t.apply(r,[o].concat(W(l,h))),e._locale=_.$i18n.locale,e._localeMessage=_.$i18n.getLocaleMessage(_.$i18n.locale)}else c("`path` is required in v-t directive");else c("value type not supported")}function W(e,t){var n=[];return e&&n.push(e),t&&(Array.isArray(t)||f(t))&&n.push(t),n}function U(e,t){void 0===t&&(t={bridge:!1}),U.installed=!0;(E=e).version&&Number(E.version.split(".")[0]);(function(e){e.prototype.hasOwnProperty("$i18n")||Object.defineProperty(e.prototype,"$i18n",{get:function(){return this._i18n}}),e.prototype.$t=function(e){for(var t=[],s=arguments.length-1;s-- >0;)t[s]=arguments[s+1];var n=this.$i18n;return n._t.apply(n,[e,n.locale,n._getMessages(),this].concat(t))},e.prototype.$tc=function(e,t){for(var s=[],n=arguments.length-2;n-- >0;)s[n]=arguments[n+2];var i=this.$i18n;return i._tc.apply(i,[e,i.locale,i._getMessages(),this,t].concat(s))},e.prototype.$te=function(e,t){var s=this.$i18n;return s._te(e,s.locale,s._getMessages(),t)},e.prototype.$d=function(e){for(var t,s=[],n=arguments.length-1;n-- >0;)s[n]=arguments[n+1];return(t=this.$i18n).d.apply(t,[e].concat(s))},e.prototype.$n=function(e){for(var t,s=[],n=arguments.length-1;n-- >0;)s[n]=arguments[n+1];return(t=this.$i18n).n.apply(t,[e].concat(s))}})(E),E.mixin(function(e){function t(){this!==this.$root&&this.$options.__INTLIFY_META__&&this.$el&&this.$el.setAttribute("data-intlify",this.$options.__INTLIFY_META__)}return void 0===e&&(e=!1),e?{mounted:t}:{beforeCreate:function(){var s=this.$options;if(s.i18n=s.i18n||(s.__i18nBridge||s.__i18n?{}:null),s.i18n){if(s.i18n instanceof p){if(s.__i18nBridge||s.__i18n)try{var e=s.i18n&&s.i18n.messages?s.i18n.messages:{};(s.__i18nBridge||s.__i18n).forEach((function(t){e=x(e,JSON.parse(t))})),Object.keys(e).forEach((function(t){s.i18n.mergeLocaleMessage(t,e[t])}))}catch(e){}this._i18n=s.i18n,this._i18nWatcher=this._i18n.watchI18nData()}else if(f(s.i18n)){var a=this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof p?this.$root.$i18n:null;if(a&&(s.i18n.root=this.$root,s.i18n.formatter=a.formatter,s.i18n.fallbackLocale=a.fallbackLocale,s.i18n.formatFallbackMessages=a.formatFallbackMessages,s.i18n.silentTranslationWarn=a.silentTranslationWarn,s.i18n.silentFallbackWarn=a.silentFallbackWarn,s.i18n.pluralizationRules=a.pluralizationRules,s.i18n.preserveDirectiveContent=a.preserveDirectiveContent),s.__i18nBridge||s.__i18n)try{var t=s.i18n&&s.i18n.messages?s.i18n.messages:{};(s.__i18nBridge||s.__i18n).forEach((function(e){t=x(t,JSON.parse(e))})),s.i18n.messages=t}catch(e){}var u=s.i18n.sharedMessages;u&&f(u)&&(s.i18n.messages=x(s.i18n.messages,u)),this._i18n=new p(s.i18n),this._i18nWatcher=this._i18n.watchI18nData(),(void 0===s.i18n.sync||!!s.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale()),a&&a.onComponentInstanceCreated(this._i18n)}}else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof p?this._i18n=this.$root.$i18n:s.parent&&s.parent.$i18n&&s.parent.$i18n instanceof p&&(this._i18n=s.parent.$i18n)},beforeMount:function(){var s=this.$options;s.i18n=s.i18n||(s.__i18nBridge||s.__i18n?{}:null),s.i18n?(s.i18n instanceof p||f(s.i18n))&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0):(this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof p||s.parent&&s.parent.$i18n&&s.parent.$i18n instanceof p)&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0)},mounted:t,beforeDestroy:function(){if(this._i18n){var s=this;this.$nextTick((function(){s._subscribing&&(s._i18n.unsubscribeDataChanging(s),delete s._subscribing),s._i18nWatcher&&(s._i18nWatcher(),s._i18n.destroyVM(),delete s._i18nWatcher),s._localeWatcher&&(s._localeWatcher(),delete s._localeWatcher)}))}}}}(t.bridge)),E.directive("t",{bind:R,update:F,unbind:D}),E.component(O.name,O),E.component(P.name,P),E.config.optionMergeStrategies.i18n=function(e,i){return void 0===i?e:i}}var N=function(){this._caches=Object.create(null)};N.prototype.interpolate=function(e,t){if(!t)return[e];var s=this._caches[e];return s||(s=function(e){for(var t=[],n=0,s="";n<e.length;){var r=e[n++];if("{"===r){s&&t.push({type:"text",value:s}),s="";var i="";for(r=e[n++];void 0!==r&&"}"!==r;)i+=r,r=e[n++];var a="}"===r,o=B.test(i)?"list":a&&z.test(i)?"named":"unknown";t.push({value:i,type:o})}else"%"===r?"{"!==e[n]&&(s+=r):s+=r}return s&&t.push({type:"text",value:s}),t}(e),this._caches[e]=s),function(e,t){var n=[],s=0,r=Array.isArray(t)?"list":_(t)?"named":"unknown";if("unknown"===r)return n;for(;s<e.length;){var i=e[s];switch(i.type){case"text":n.push(i.value);break;case"list":n.push(t[parseInt(i.value,10)]);break;case"named":"named"===r&&n.push(t[i.value])}s++}return n}(s,t)};var B=/^(?:\d)+/,z=/^(?:\w)+/;var H=[];H[0]={ws:[0],ident:[3,0],"[":[4],eof:[7]},H[1]={ws:[1],".":[2],"[":[4],eof:[7]},H[2]={ws:[2],ident:[3,0],0:[3,0],number:[3,0]},H[3]={ident:[3,0],0:[3,0],number:[3,0],ws:[1,1],".":[2,1],"[":[4,1],eof:[7,1]},H[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],eof:8,else:[4,0]},H[5]={"'":[4,0],eof:8,else:[5,0]},H[6]={'"':[4,0],eof:8,else:[6,0]};var V=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Z(e){if(null==e)return"eof";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"ident";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return"ident"}function J(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(function(e){return V.test(e)}(t)?function(e){var t=e.charCodeAt(0);return t!==e.charCodeAt(e.length-1)||34!==t&&39!==t?e:e.slice(1,-1)}(t):"*"+t)}var G=function(){this._cache=Object.create(null)};G.prototype.parsePath=function(e){var t=this._cache[e];return t||(t=function(e){var i,a,t,n,r,u,o,l=[],c=-1,s=0,h=0,_=[];function d(){var g=e[c+1];if(5===s&&"'"===g||6===s&&'"'===g)return c++,t="\\"+g,_[0](),!0}for(_[1]=function(){void 0!==a&&(l.push(a),a=void 0)},_[0]=function(){void 0===a?a=t:a+=t},_[2]=function(){_[0](),h++},_[3]=function(){if(h>0)h--,s=4,_[0]();else{if(h=0,void 0===a||!1===(a=J(a)))return!1;_[1]()}};null!==s;)if(c++,"\\"!==(i=e[c])||!d()){if(n=Z(i),8===(r=(o=H[s])[n]||o.else||8)||(s=r[0],(u=_[r[1]])&&(t=void 0===(t=r[2])?i:t,!1===u())))return;if(7===s)return l}}(e),t&&(this._cache[e]=t)),t||[]},G.prototype.getPathValue=function(e,t){if(!_(e))return null;var s=this.parsePath(t);if(0===s.length)return null;for(var n=s.length,i=e,a=0;a<n;){var r=i[s[a]];if(null==r)return null;i=r,a++}return i};var Y,K=/<\/?[\w\s="/.':;#-\/]+>/,X=/(?:@(?:\.[a-zA-Z]+)?:(?:[\w\-_|./]+|\([\w\-_:|./]+\)))/g,Q=/^@(?:\.([a-zA-Z]+))?:/,ee=/[()]/g,te={upper:function(e){return e.toLocaleUpperCase()},lower:function(e){return e.toLocaleLowerCase()},capitalize:function(e){return""+e.charAt(0).toLocaleUpperCase()+e.substr(1)}},se=new N,p=function(e){var t=this;void 0===e&&(e={}),!E&&typeof window<"u"&&window.Vue&&U(window.Vue);var s=e.locale||"en-US",n=!1!==e.fallbackLocale&&(e.fallbackLocale||"en-US"),i=e.messages||{},a=e.dateTimeFormats||e.datetimeFormats||{},r=e.numberFormats||{};this._vm=null,this._formatter=e.formatter||se,this._modifiers=e.modifiers||{},this._missing=e.missing||null,this._root=e.root||null,this._sync=void 0===e.sync||!!e.sync,this._fallbackRoot=void 0===e.fallbackRoot||!!e.fallbackRoot,this._fallbackRootWithEmptyString=void 0===e.fallbackRootWithEmptyString||!!e.fallbackRootWithEmptyString,this._formatFallbackMessages=void 0!==e.formatFallbackMessages&&!!e.formatFallbackMessages,this._silentTranslationWarn=void 0!==e.silentTranslationWarn&&e.silentTranslationWarn,this._silentFallbackWarn=void 0!==e.silentFallbackWarn&&!!e.silentFallbackWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new G,this._dataListeners=new Set,this._componentInstanceCreatedListener=e.componentInstanceCreatedListener||null,this._preserveDirectiveContent=void 0!==e.preserveDirectiveContent&&!!e.preserveDirectiveContent,this.pluralizationRules=e.pluralizationRules||{},this._warnHtmlInMessage=e.warnHtmlInMessage||"off",this._postTranslation=e.postTranslation||null,this._escapeParameterHtml=e.escapeParameterHtml||!1,"__VUE_I18N_BRIDGE__"in e&&(this.__VUE_I18N_BRIDGE__=e.__VUE_I18N_BRIDGE__),this.getChoiceIndex=function(e,n){var u=Object.getPrototypeOf(t);if(u&&u.getChoiceIndex)return u.getChoiceIndex.call(t,e,n);var r,g;return t.locale in t.pluralizationRules?t.pluralizationRules[t.locale].apply(t,[e,n]):(r=e,g=n,r=Math.abs(r),2===g?r?r>1?1:0:1:r?Math.min(r,2):0)},this._exist=function(e,n){return!(!e||!n)&&!(v(t._path.getPathValue(e,n))&&!e[n])},("warn"===this._warnHtmlInMessage||"error"===this._warnHtmlInMessage)&&Object.keys(i).forEach((function(e){t._checkLocaleMessage(e,t._warnHtmlInMessage,i[e])})),this._initVM({locale:s,fallbackLocale:n,messages:i,dateTimeFormats:a,numberFormats:r})},ne={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},availableLocales:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},formatFallbackMessages:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0},silentFallbackWarn:{configurable:!0},preserveDirectiveContent:{configurable:!0},warnHtmlInMessage:{configurable:!0},postTranslation:{configurable:!0},sync:{configurable:!0}};p.prototype._checkLocaleMessage=function(e,t,s){var i=function(a,e,t,n){if(f(t))Object.keys(t).forEach((function(r){var o=t[r];f(o)?(n.push(r),n.push("."),i(a,e,o,n),n.pop(),n.pop()):(n.push(r),i(a,e,o,n),n.pop())}));else if(h(t))t.forEach((function(t,r){f(t)?(n.push("["+r+"]"),n.push("."),i(a,e,t,n),n.pop(),n.pop()):(n.push("["+r+"]"),i(a,e,t,n),n.pop())}));else if(d(t)){if(K.test(t)){var r="Detected HTML in message '"+t+"' of keypath '"+n.join("")+"' at '"+e+"'. Consider component interpolation with '<i18n>' to avoid XSS. See https://bit.ly/2ZqJzkp";"warn"===a?c(r):"error"===a&&function(e,t){typeof console<"u"&&(console.error("[vue-i18n] "+e),t&&console.error(t.stack))}(r)}}};i(t,e,s,[])},p.prototype._initVM=function(e){var t=E.config.silent;E.config.silent=!0,this._vm=new E({data:e,__VUE18N__INSTANCE__:!0}),E.config.silent=t},p.prototype.destroyVM=function(){this._vm.$destroy()},p.prototype.subscribeDataChanging=function(e){this._dataListeners.add(e)},p.prototype.unsubscribeDataChanging=function(e){!function(e,t){if(e.delete(t));}(this._dataListeners,e)},p.prototype.watchI18nData=function(){var e=this;return this._vm.$watch("$data",(function(){for(var t=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}(e._dataListeners),s=t.length;s--;)E.nextTick((function(){t[s]&&t[s].$forceUpdate()}))}),{deep:!0})},p.prototype.watchLocale=function(e){if(e){if(!this.__VUE_I18N_BRIDGE__)return null;var s=this,t=this._vm;return this.vm.$watch("locale",(function(i){t.$set(t,"locale",i),s.__VUE_I18N_BRIDGE__&&e&&(e.locale.value=i),t.$forceUpdate()}),{immediate:!0})}if(!this._sync||!this._root)return null;var n=this._vm;return this._root.$i18n.vm.$watch("locale",(function(i){n.$set(n,"locale",i),n.$forceUpdate()}),{immediate:!0})},p.prototype.onComponentInstanceCreated=function(e){this._componentInstanceCreatedListener&&this._componentInstanceCreatedListener(e,this)},ne.vm.get=function(){return this._vm},ne.messages.get=function(){return w(this._getMessages())},ne.dateTimeFormats.get=function(){return w(this._getDateTimeFormats())},ne.numberFormats.get=function(){return w(this._getNumberFormats())},ne.availableLocales.get=function(){return Object.keys(this.messages).sort()},ne.locale.get=function(){return this._vm.locale},ne.locale.set=function(e){this._vm.$set(this._vm,"locale",e)},ne.fallbackLocale.get=function(){return this._vm.fallbackLocale},ne.fallbackLocale.set=function(e){this._localeChainCache={},this._vm.$set(this._vm,"fallbackLocale",e)},ne.formatFallbackMessages.get=function(){return this._formatFallbackMessages},ne.formatFallbackMessages.set=function(e){this._formatFallbackMessages=e},ne.missing.get=function(){return this._missing},ne.missing.set=function(e){this._missing=e},ne.formatter.get=function(){return this._formatter},ne.formatter.set=function(e){this._formatter=e},ne.silentTranslationWarn.get=function(){return this._silentTranslationWarn},ne.silentTranslationWarn.set=function(e){this._silentTranslationWarn=e},ne.silentFallbackWarn.get=function(){return this._silentFallbackWarn},ne.silentFallbackWarn.set=function(e){this._silentFallbackWarn=e},ne.preserveDirectiveContent.get=function(){return this._preserveDirectiveContent},ne.preserveDirectiveContent.set=function(e){this._preserveDirectiveContent=e},ne.warnHtmlInMessage.get=function(){return this._warnHtmlInMessage},ne.warnHtmlInMessage.set=function(e){var t=this,n=this._warnHtmlInMessage;if(this._warnHtmlInMessage=e,n!==e&&("warn"===e||"error"===e)){var s=this._getMessages();Object.keys(s).forEach((function(e){t._checkLocaleMessage(e,t._warnHtmlInMessage,s[e])}))}},ne.postTranslation.get=function(){return this._postTranslation},ne.postTranslation.set=function(e){this._postTranslation=e},ne.sync.get=function(){return this._sync},ne.sync.set=function(e){this._sync=e},p.prototype._getMessages=function(){return this._vm.messages},p.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},p.prototype._getNumberFormats=function(){return this._vm.numberFormats},p.prototype._warnDefault=function(e,t,s,n,i,a){if(!v(s))return s;if(this._missing){var r=this._missing.apply(null,[e,t,n,i]);if(d(r))return r}if(this._formatFallbackMessages){var o=y.apply(void 0,i);return this._render(t,a,o.params,t)}return t},p.prototype._isFallbackRoot=function(e){return(this._fallbackRootWithEmptyString?!e:v(e))&&!v(this._root)&&this._fallbackRoot},p.prototype._isSilentFallbackWarn=function(e){return this._silentFallbackWarn instanceof RegExp?this._silentFallbackWarn.test(e):this._silentFallbackWarn},p.prototype._isSilentFallback=function(e,t){return this._isSilentFallbackWarn(t)&&(this._isFallbackRoot()||e!==this.fallbackLocale)},p.prototype._isSilentTranslationWarn=function(e){return this._silentTranslationWarn instanceof RegExp?this._silentTranslationWarn.test(e):this._silentTranslationWarn},p.prototype._interpolate=function(e,t,s,n,i,a,r){if(!t)return null;var o,l=this._path.getPathValue(t,s);if(h(l)||f(l))return l;if(v(l)){if(!f(t))return null;if(!d(o=t[s])&&!C(o))return null}else{if(!d(l)&&!C(l))return null;o=l}return d(o)&&(o.indexOf("@:")>=0||o.indexOf("@.")>=0)&&(o=this._link(e,t,o,n,"raw",a,r)),this._render(o,i,a,s)},p.prototype._link=function(e,t,s,n,i,a,r){var o=s,l=o.match(X);for(var u in l)if(l.hasOwnProperty(u)){var c=l[u],_=c.match(Q),d=_[0],g=_[1],m=c.replace(d,"").replace(ee,"");if(k(r,m))return o;r.push(m);var f=this._interpolate(e,t,m,n,"raw"===i?"string":i,"raw"===i?void 0:a,r);if(this._isFallbackRoot(f)){if(!this._root)throw Error("unexpected error");var v=this._root.$i18n;f=v._translate(v._getMessages(),v.locale,v.fallbackLocale,m,n,i,a)}f=this._warnDefault(e,m,f,n,h(a)?a:[a],i),this._modifiers.hasOwnProperty(g)?f=this._modifiers[g](f):te.hasOwnProperty(g)&&(f=te[g](f)),r.pop(),o=f?o.replace(c,f):o}return o},p.prototype._createMessageContext=function(e,t,s,n){var i=this,a=h(e)?e:[],r=_(e)?e:{},u=this._getMessages(),o=this.locale;return{list:function(e){return a[e]},named:function(e){return r[e]},values:e,formatter:t,path:s,messages:u,locale:o,linked:function(e){return i._interpolate(o,u[o]||{},e,null,n,void 0,[e])}}},p.prototype._render=function(e,t,s,n){if(C(e))return e(this._createMessageContext(s,this._formatter||se,n,t));var i=this._formatter.interpolate(e,s,n);return i||(i=se.interpolate(e,s,n)),"string"!==t||d(i)?i:i.join("")},p.prototype._appendItemToChain=function(e,t,s){var n=!1;return k(e,t)||(n=!0,t&&(n="!"!==t[t.length-1],t=t.replace(/!/g,""),e.push(t),s&&s[t]&&(n=s[t]))),n},p.prototype._appendLocaleToChain=function(e,t,s){var n,i=t.split("-");do{var a=i.join("-");n=this._appendItemToChain(e,a,s),i.splice(-1,1)}while(i.length&&!0===n);return n},p.prototype._appendBlockToChain=function(e,t,s){for(var n=!0,i=0;i<t.length&&"boolean"==typeof n;i++){var a=t[i];d(a)&&(n=this._appendLocaleToChain(e,a,s))}return n},p.prototype._getLocaleChain=function(e,t){if(""===e)return[];this._localeChainCache||(this._localeChainCache={});var s=this._localeChainCache[e];if(!s){t||(t=this.fallbackLocale),s=[];for(var n=[e];h(n);)n=this._appendBlockToChain(s,n,t);var i;(n=d(i=h(t)?t:_(t)?t.default?t.default:null:t)?[i]:i)&&this._appendBlockToChain(s,n,null),this._localeChainCache[e]=s}return s},p.prototype._translate=function(e,t,s,n,i,a,r){for(var o,l=this._getLocaleChain(t,s),u=0;u<l.length;u++){var c=l[u];if(!v(o=this._interpolate(c,e[c],n,i,a,r,[n])))return o}return null},p.prototype._t=function(e,t,s,n){for(var i,a=[],r=arguments.length-4;r-- >0;)a[r]=arguments[r+4];if(!e)return"";var o,l=y.apply(void 0,a);this._escapeParameterHtml&&(l.params=(null!=(o=l.params)&&Object.keys(o).forEach((function(e){"string"==typeof o[e]&&(o[e]=function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}(o[e]))})),o));var c=l.locale||t,u=this._translate(s,c,this.fallbackLocale,e,n,"string",l.params);if(this._isFallbackRoot(u)){if(!this._root)throw Error("unexpected error");return(i=this._root).$t.apply(i,[e].concat(a))}return u=this._warnDefault(c,e,u,n,a,"string"),this._postTranslation&&null!=u&&(u=this._postTranslation(u,e)),u},p.prototype.t=function(e){for(var t,s=[],n=arguments.length-1;n-- >0;)s[n]=arguments[n+1];return(t=this)._t.apply(t,[e,this.locale,this._getMessages(),null].concat(s))},p.prototype._i=function(e,t,s,n,i){var a=this._translate(s,t,this.fallbackLocale,e,n,"raw",i);if(this._isFallbackRoot(a)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.i(e,t,i)}return this._warnDefault(t,e,a,n,[i],"raw")},p.prototype.i=function(e,t,s){return e?(d(t)||(t=this.locale),this._i(e,t,this._getMessages(),null,s)):""},p.prototype._tc=function(e,t,s,n,i){for(var a,r=[],o=arguments.length-5;o-- >0;)r[o]=arguments[o+5];if(!e)return"";void 0===i&&(i=1);var l={count:i,n:i},u=y.apply(void 0,r);return u.params=Object.assign(l,u.params),r=null===u.locale?[u.params]:[u.locale,u.params],this.fetchChoice((a=this)._t.apply(a,[e,t,s,n].concat(r)),i)},p.prototype.fetchChoice=function(e,t){if(!e||!d(e))return null;var s=e.split("|");return s[t=this.getChoiceIndex(t,s.length)]?s[t].trim():e},p.prototype.tc=function(e,t){for(var s,n=[],i=arguments.length-2;i-- >0;)n[i]=arguments[i+2];return(s=this)._tc.apply(s,[e,this.locale,this._getMessages(),null,t].concat(n))},p.prototype._te=function(e,t,s){for(var n=[],i=arguments.length-3;i-- >0;)n[i]=arguments[i+3];var a=y.apply(void 0,n).locale||t;return this._exist(s[a],e)},p.prototype.te=function(e,t){return this._te(e,this.locale,this._getMessages(),t)},p.prototype.getLocaleMessage=function(e){return w(this._vm.messages[e]||{})},p.prototype.setLocaleMessage=function(e,t){("warn"===this._warnHtmlInMessage||"error"===this._warnHtmlInMessage)&&this._checkLocaleMessage(e,this._warnHtmlInMessage,t),this._vm.$set(this._vm.messages,e,t)},p.prototype.mergeLocaleMessage=function(e,t){("warn"===this._warnHtmlInMessage||"error"===this._warnHtmlInMessage)&&this._checkLocaleMessage(e,this._warnHtmlInMessage,t),this._vm.$set(this._vm.messages,e,x(typeof this._vm.messages[e]<"u"&&Object.keys(this._vm.messages[e]).length?Object.assign({},this._vm.messages[e]):{},t))},p.prototype.getDateTimeFormat=function(e){return w(this._vm.dateTimeFormats[e]||{})},p.prototype.setDateTimeFormat=function(e,t){this._vm.$set(this._vm.dateTimeFormats,e,t),this._clearDateTimeFormat(e,t)},p.prototype.mergeDateTimeFormat=function(e,t){this._vm.$set(this._vm.dateTimeFormats,e,x(this._vm.dateTimeFormats[e]||{},t)),this._clearDateTimeFormat(e,t)},p.prototype._clearDateTimeFormat=function(e,t){for(var s in t){var n=e+"__"+s;!this._dateTimeFormatters.hasOwnProperty(n)||delete this._dateTimeFormatters[n]}},p.prototype._localizeDateTime=function(e,t,s,n,i,a){for(var r=t,o=n[r],l=this._getLocaleChain(t,s),u=0;u<l.length;u++){var c=l[u];if(r=c,!v(o=n[c])&&!v(o[i]))break}if(v(o)||v(o[i]))return null;var g,h=o[i];if(a)g=new Intl.DateTimeFormat(r,Object.assign({},h,a));else{var _=r+"__"+i;(g=this._dateTimeFormatters[_])||(g=this._dateTimeFormatters[_]=new Intl.DateTimeFormat(r,h))}return g.format(e)},p.prototype._d=function(e,t,s,n){if(!s)return(n?new Intl.DateTimeFormat(t,n):new Intl.DateTimeFormat(t)).format(e);var a=this._localizeDateTime(e,t,this.fallbackLocale,this._getDateTimeFormats(),s,n);if(this._isFallbackRoot(a)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.d(e,s,t)}return a||""},p.prototype.d=function(e){for(var t=[],s=arguments.length-1;s-- >0;)t[s]=arguments[s+1];var n=this.locale,i=null,a=null;return 1===t.length?(d(t[0])?i=t[0]:_(t[0])&&(t[0].locale&&(n=t[0].locale),t[0].key&&(i=t[0].key)),a=Object.keys(t[0]).reduce((function(e,n){var r;return k(l,n)?Object.assign({},e,((r={})[n]=t[0][n],r)):e}),null)):2===t.length&&(d(t[0])&&(i=t[0]),d(t[1])&&(n=t[1])),this._d(e,n,i,a)},p.prototype.getNumberFormat=function(e){return w(this._vm.numberFormats[e]||{})},p.prototype.setNumberFormat=function(e,t){this._vm.$set(this._vm.numberFormats,e,t),this._clearNumberFormat(e,t)},p.prototype.mergeNumberFormat=function(e,t){this._vm.$set(this._vm.numberFormats,e,x(this._vm.numberFormats[e]||{},t)),this._clearNumberFormat(e,t)},p.prototype._clearNumberFormat=function(e,t){for(var s in t){var n=e+"__"+s;!this._numberFormatters.hasOwnProperty(n)||delete this._numberFormatters[n]}},p.prototype._getNumberFormatter=function(e,t,s,n,i,a){for(var r=t,o=n[r],l=this._getLocaleChain(t,s),u=0;u<l.length;u++){var c=l[u];if(r=c,!v(o=n[c])&&!v(o[i]))break}if(v(o)||v(o[i]))return null;var g,h=o[i];if(a)g=new Intl.NumberFormat(r,Object.assign({},h,a));else{var _=r+"__"+i;(g=this._numberFormatters[_])||(g=this._numberFormatters[_]=new Intl.NumberFormat(r,h))}return g},p.prototype._n=function(e,t,s,n){if(!p.availabilities.numberFormat)return"";if(!s)return(n?new Intl.NumberFormat(t,n):new Intl.NumberFormat(t)).format(e);var a=this._getNumberFormatter(e,t,this.fallbackLocale,this._getNumberFormats(),s,n),r=a&&a.format(e);if(this._isFallbackRoot(r)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.n(e,Object.assign({},{key:s,locale:t},n))}return r||""},p.prototype.n=function(e){for(var t=[],s=arguments.length-1;s-- >0;)t[s]=arguments[s+1];var n=this.locale,i=null,a=null;return 1===t.length?d(t[0])?i=t[0]:_(t[0])&&(t[0].locale&&(n=t[0].locale),t[0].key&&(i=t[0].key),a=Object.keys(t[0]).reduce((function(e,n){var r;return k(o,n)?Object.assign({},e,((r={})[n]=t[0][n],r)):e}),null)):2===t.length&&(d(t[0])&&(i=t[0]),d(t[1])&&(n=t[1])),this._n(e,n,i,a)},p.prototype._ntp=function(e,t,s,n){if(!p.availabilities.numberFormat)return[];if(!s)return(n?new Intl.NumberFormat(t,n):new Intl.NumberFormat(t)).formatToParts(e);var a=this._getNumberFormatter(e,t,this.fallbackLocale,this._getNumberFormats(),s,n),r=a&&a.formatToParts(e);if(this._isFallbackRoot(r)){if(!this._root)throw Error("unexpected error");return this._root.$i18n._ntp(e,t,s,n)}return r||[]},Object.defineProperties(p.prototype,ne),Object.defineProperty(p,"availabilities",{get:function(){if(!Y){var e=typeof Intl<"u";Y={dateTimeFormat:e&&typeof Intl.DateTimeFormat<"u",numberFormat:e&&typeof Intl.NumberFormat<"u"}}return Y}}),p.install=U,p.version="8.28.2";const re=p,ie={chats:"Chats",message:"Message",new_messages:"New messages",seller:"Seller",attachments:"Attachments",search:"Search",today:"Today",yesterday:"Yesterday",error:"Error",no_chats:"Chats not found",edit:"Edit",delete:"Delete",add_chat:"Add chat",add:"Add",cancel:"Cancel",input_message:"Write the message",read_messages:"Read",resend_message:"Send again",cancel_sending:"Cancel sending",messages_is_empty:"No messages",message_is_deleted:"Message deleted",no_users_found:"No users found",is_typing:"Is typing",is_edited:"Edited",connecting:"Connecting",file_too_large:"The size of the files you send must be less than 100 MB",unsupported_format:"The file format is not supported",max_file_count:"You can send a maximum of 6 files at a time",chat_list_error:"Connecting",chat_opened_from:"Chat opened from product page",seller_settings:"Seller settings",billing_settings:"Billing settings",get_messages_error:"An error occurred while loading, please try again later",read_messages_error:"An error occurred, please try again later",send_message_error:"An error occurred while sending, please try again later",edit_message_error:"An error occurred while editing, please try again later",delete_message_error:"An error occurred while deleting. Try again later",default_error:"An error occurred, please try again later"},ae={chats:"Чати",message:"Повідомлення",new_messages:"Нові повідомлення",seller:"Продавець",attachments:"Вкладення",search:"Пошук",today:"Сьогодні",yesterday:"Вчора",error:"Помилка",no_chats:"Чати не знайдено",edit:"Редагувати",delete:"Видалити",add_chat:"Додати чат",add:"Додати",cancel:"Скасувати",input_message:"Напишіть повідомлення",read_messages:"Прочитати",resend_message:"Надіслати ще раз",cancel_sending:"Скасувати надсилання",messages_is_empty:"Немає повідомлень",message_is_deleted:"Повідомлення видалено",no_users_found:"Користувачів не знайдено",is_typing:"Друкує",is_edited:"Ред.",connecting:"З'єднання",file_too_large:"Розмір файлів, що надсилаються, мають бути менше 100 МБ",unsupported_format:"Формат файлу не підтримується",max_file_count:"Максимальна кількість файлів: 6",chat_list_error:"З'єднання",chat_opened_from:"Чат відкритий зі сторінки товару",seller_settings:"Налаштування продавця",billing_settings:"Налаштування білінгу",get_messages_error:"Сталась помилка при завантаженні, спробуйте пізніше",read_messages_error:"Сталась помилка, спробуйте пізніше",send_message_error:"Сталась помилка при надсиланні, спробуйте пізніше",edit_message_error:"Сталась помилка при редагуванні, спробуйте пізніше",delete_message_error:"Сталась помилка при видаленні, спробуйте пізніше",default_error:"Сталась помилка, спробуйте пізніше"},oe={chats:"Чаты",message:"Сообщение",new_messages:"Новые сообщения",seller:"Продавец",attachments:"Вложения",search:"Поиск",today:"Сегодня",yesterday:"Вчера",error:"Ошибка",no_chats:"Чаты не найдены",edit:"Редактировать",delete:"Удалить",add_chat:"Добавить чат",add:"Добавить",cancel:"Отменить",input_message:"Напишите сообщение",read_messages:"Прочитать",resend_message:"Отправить еще раз",cancel_sending:"Отменить отправку",messages_is_empty:"Нет сообщений",message_is_deleted:"Сообщение удалено",no_users_found:"Пользователей не найдено",is_typing:"Печатает",is_edited:"Ред.",connecting:"Подключение",file_too_large:"Размер отправляемых файлов не должен превышать 100 МБ",unsupported_format:"Формат файла не поддерживается",max_file_count:"Максимальное количество файлов: 6",chat_list_error:"Соединение",chat_opened_from:"Чат открыт со страницы товара",seller_settings:"Настройки продавца",billing_settings:"Настройки билинга",get_messages_error:"Произошла ошибка при загрузке, попробуйте позже",read_messages_error:"Произошла ошибка, попробуйте позже",send_message_error:"Произошла ошибка при отправлении, попробуйте позже",edit_message_error:"Произошла ошибка при редактировании, попробуйте позже",delete_message_error:"Произошла ошибка при удалении, попробуйте позже",default_error:"Произошла ошибка, попробуйте позже"};r.default.use(re);const le=new re({locale:"uk",fallbackLocale:"uk",messages:{en:ie,uk:ae,ru:oe},pluralizationRules:{uk:(e,t)=>{if(0===e)return 0;const n=e>10&&e<20,s=e%10==1;return t<4?!n&&s?1:2:!n&&s?1:!n&&e%10>=2&&e%10<=4||t<4?2:3}}}),ce=Object(r.defineComponent)({__name:"AvatarPlaceholder",props:{gender:{default:"M"}},setup:e=>({__sfc:!0,props:e})});function ue(e,t,n,s,r,i,a,o){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),s&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),a?(l=function(e){!(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)&&typeof __VUE_SSR_CONTEXT__<"u"&&(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=o?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,g){return l.call(g),u(e,g)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:c}}const he=ue(ce,(function(){var e=this._self._c;return"F"===this._self._setupProxy.props.gender?e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 135 134",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("rect",{attrs:{x:"1",width:"134",height:"134",rx:"67",fill:"white"}}),e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M67.7448 0.000241212C104.745 0.000239595 134.74 29.9948 134.74 66.995C134.74 86.5168 126.39 104.088 113.067 116.333C112.089 112.569 109.987 109.468 106.594 107.592C101.531 104.783 78.7673 94.2493 78.7673 94.2493C78.7806 93.6757 78.7862 93.1591 78.7919 92.6442C78.8062 91.3523 78.8203 90.0716 78.9531 87.9293C80.129 87.8446 82.3298 87.7217 83.9771 87.6297C84.152 87.6199 84.3208 87.6105 84.4814 87.6015C84.4535 87.3348 84.4261 87.0822 84.4 86.841C84.1646 84.6696 84.0307 83.4351 84.5743 81.3283C84.6302 81.131 84.6567 81.4128 84.7081 81.9607C84.8277 83.2333 85.0821 85.9415 86.1538 87.4143C87.2223 87.2738 89.8238 86.8057 90.66 86.6184C90.6909 86.608 90.6579 86.5517 90.5878 86.4319C90.3415 86.0115 89.638 84.8102 89.638 82.0773C89.638 82.063 89.6865 82.1542 89.7737 82.3179C90.2588 83.229 91.9408 86.3884 93.1221 86.1503C94.6087 85.8694 95.9095 85.3544 97.5354 84.6054C97.5385 84.6054 97.5291 84.5999 97.5085 84.5879C97.2143 84.4167 94.6232 82.9085 92.8434 76.7403C92.8434 76.7319 92.8763 76.7823 92.9431 76.8846C93.2489 77.3528 94.2654 78.9092 96.0953 80.9069C98.1858 83.2009 99.6259 83.2477 99.7653 83.1541C100.934 82.384 101.407 81.9646 102.488 81.0051L102.599 80.9069C97.6748 78.0512 95.0733 73.8846 94.4229 68.5945C94.0048 64.9428 94.0048 61.2444 94.1906 57.546C94.5623 50.2428 94.7481 42.9396 92.6111 35.8236C91.171 31.0484 89.127 27.4904 84.4349 24.822C81.8933 23.3876 79.0551 24.0459 77.6153 24.3798C77.0813 24.5037 76.7396 24.5829 76.6768 24.4943C75.7012 23.043 74.1217 20.8426 69.4762 19.1105C59.5346 15.4589 46.8522 22.8557 43.0893 33.0615C41.6027 37.0408 40.7665 41.3946 40.3484 45.608C40.0697 48.4638 40.0232 51.3429 39.9768 54.2221C39.9303 57.1012 39.8839 59.9804 39.6051 62.8361C38.9548 69.8117 37.9327 76.834 30.7321 80.7665C32.4509 82.405 34.0304 83.7159 36.2139 84.6054C36.3068 84.6522 38.7689 83.4818 39.9303 81.0942C41.0917 78.7066 41.2311 77.7703 41.2311 77.7703C41.7287 81.6149 39.6352 85.0119 39.213 85.697C39.1622 85.7794 39.1356 85.8226 39.1406 85.8226C41.6492 86.5716 43.972 87.227 46.2018 87.3206C47.6086 87.4066 48.1548 86.1916 49.2044 83.8565C49.2986 83.6469 49.3969 83.4284 49.5002 83.2009C49.6193 82.9369 49.4575 84.1127 49.2903 85.3277C49.1315 86.4823 48.9677 87.6724 49.0356 87.6952C50.4803 88.075 51.8824 88.091 53.0986 88.105C53.6815 88.1116 54.2216 88.1178 54.7032 88.1633C55.0284 90.5041 55.1678 91.9554 54.9355 94.1089C54.9355 94.1089 34.0769 103.566 27.3873 107.124C24.2212 108.817 21.976 111.472 20.79 114.782C8.4211 102.627 0.75 85.7067 0.75 66.9951C0.75 29.9949 30.7446 0.000244141 67.7448 0.000241212Z",fill:"currentColor"}})]):e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 166 166",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("g",{attrs:{"clip-path":"url(#clip0)"}},[e("path",{attrs:{d:"M141.668 141.679C174.079 109.268 174.079 56.7193 141.668 24.3084C109.257 -8.10249 56.7087 -8.10248 24.2979 24.3084C-8.113 56.7193 -8.113 109.268 24.2979 141.679C56.7087 174.089 109.257 174.089 141.668 141.679Z",fill:"currentColor"}}),e("path",{attrs:{d:"M82.9905 111.15C100.82 111.15 115.273 92.4624 115.273 69.41C115.273 46.3575 100.82 27.6699 82.9905 27.6699C65.1615 27.6699 50.7083 46.3575 50.7083 69.41C50.7083 92.4624 65.1615 111.15 82.9905 111.15Z",fill:"white"}}),e("path",{attrs:{d:"M82.9883 114.238C55.9861 114.238 32.2133 122.491 18.3341 135.012C26.1079 144.684 35.9527 152.49 47.1434 157.853C58.334 163.216 70.5853 166 82.9948 166C95.4042 166 107.655 163.216 118.846 157.853C130.037 152.49 139.882 144.684 147.655 135.012C133.776 122.491 110.003 114.238 82.9883 114.238Z",fill:"white"}}),e("path",{attrs:{d:"M79.4535 82.9935H86.6686C89.9383 82.9935 93.0741 84.2924 95.3862 86.6045C97.6982 88.9165 98.9971 92.0523 98.9971 95.322V123.375C98.9971 126.646 97.6986 129.783 95.387 132.097C93.0753 134.411 89.9395 135.713 86.6686 135.716H79.4535C76.1838 135.716 73.048 134.418 70.7359 132.106C68.4239 129.793 67.125 126.658 67.125 123.388V95.3348C67.1233 93.7148 67.441 92.1102 68.0598 90.613C68.6786 89.1158 69.5864 87.7552 70.7314 86.609C71.8764 85.4628 73.236 84.5536 74.7326 83.9332C76.2292 83.3128 77.8334 82.9935 79.4535 82.9935Z",fill:"white"}}),e("path",{attrs:{d:"M55.1648 71.3448C57.0486 76.7529 56.2925 81.9303 53.4987 82.8787C50.705 83.827 46.8988 80.3156 45.0277 74.8306C43.1566 69.3455 43.8871 64.245 46.6937 63.2966C49.5003 62.3483 53.2809 65.9238 55.1648 71.3448Z",fill:"white"}}),e("path",{attrs:{d:"M120.956 74.868C122.836 69.4523 122.09 64.2733 119.288 63.3004C116.487 62.3276 112.691 65.9293 110.811 71.3451C108.93 76.7608 109.676 81.9398 112.478 82.9127C115.279 83.8855 119.075 80.2838 120.956 74.868Z",fill:"white"}}),e("path",{attrs:{d:"M54.732 71.1654C50.5414 63.4761 46.2225 55.4407 46.4404 46.7262C46.6583 38.0116 53.2839 28.7845 61.9856 29.1561C63.4942 29.3457 65.0167 29.4014 66.5351 29.3227C69.5467 28.8998 71.7766 26.4392 74.2244 24.6323C77.011 22.6146 80.2605 21.3306 83.6736 20.8983C87.0866 20.4661 90.5536 20.8996 93.7552 22.1589C97.6768 23.7608 100.996 26.5546 104.828 28.3744C108.42 30.0381 112.357 30.8222 116.313 30.6618C120.269 30.5013 124.129 29.4009 127.575 27.4517C126.114 30.1365 123.748 32.2162 120.898 33.3212C123.534 34.1561 126.375 34.0748 128.959 33.0905C127.39 35.9083 124.889 38.0922 121.885 39.2676L128.511 39.7161C126.594 42.4138 123.917 44.4794 120.822 45.6497L126.025 45.8163C125.355 47.7254 124.223 49.4387 122.729 50.8029C121.235 52.1672 119.426 53.1398 117.464 53.6337H120.822C117.165 58.9735 113.521 64.2834 109.89 69.5634C108.948 71.146 107.697 72.5232 106.212 73.6131C104.885 74.3703 103.437 74.8906 101.932 75.151C91.0707 77.576 79.8996 78.3023 68.8163 77.304C64.9716 76.958 61.127 76.3428 58.0769 74.0104C55.0268 71.678 53.4633 67.1541 55.5138 63.963",fill:"white"}}),e("path",{attrs:{d:"M62.1784 122.133C62.4161 117.751 62.9643 113.391 63.8188 109.087C65.9846 111.56 69.6498 111.868 72.9434 111.996L87.8607 112.611C88.4374 116.007 88.8474 119.993 86.3997 122.415C85.177 123.457 83.7151 124.179 82.1449 124.517C78.8054 125.444 75.3582 125.926 71.8925 125.952C67.7659 125.952 62.8448 124.748 61.5248 120.826L62.7935 119.724",fill:"white"}}),e("path",{attrs:{d:"M103.798 122.133C103.565 117.751 103.021 113.392 102.17 109.087C100.005 111.56 96.3266 111.868 93.0458 111.996L78.167 112.611C77.5903 116.007 77.1931 119.993 79.6408 122.415C80.8586 123.457 82.3164 124.179 83.8827 124.517C87.2225 125.443 90.6695 125.925 94.1351 125.952C98.2617 125.952 103.183 124.748 104.503 120.826L103.221 119.724",fill:"white"}})]),e("defs",[e("clipPath",{attrs:{id:"clip0"}},[e("rect",{attrs:{width:"165.999",height:"165.999",fill:"currentColor"}})])])])}),[],!1,null,null,null,null).exports;const _e=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 25 31",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.357 6.57734L5.75384 13.7837L11.7784 17.2257L6.02408 20.5068L0 17.0738V10.4964L18.357 0V6.57734ZM12.519 13.1547L18.2734 9.87361L24.2975 13.3066V13.3103L24.304 13.3066V19.8839L5.94706 30.3803V23.803L18.5469 16.5985L12.519 13.1547Z",fill:"black"}})])}),[],!1,null,null,null,null).exports,de=Object(r.ref)(),pe=()=>{const e=Object(r.ref)(),t=Object(r.ref)(!1),n=Object(r.ref)(!1);return{imageSrc:Object(r.computed)((()=>e.value||"")),isImageFetching:t,isImageError:n,fetchImage:async({filename:i,size:a="100x100"})=>{if(de.value)try{n.value=!1,t.value=!0;const r=await fetch(de.value({filename:i,size:a}),{cache:"no-store",headers:{"Content-type":"image/*"}});r.ok||(n.value=!0);const o=new Blob([new Uint8Array(await r.arrayBuffer())],{type:r.headers["Content-type"]||"image/jpeg"});e.value=URL.createObjectURL(o)}catch{n.value=!0}finally{t.value=!1}else n.value=!0}}},me=Object(r.defineComponent)({__name:"Avatar",props:{avatar:null,gender:null},emits:["error"],setup(e,{emit:t}){const n=e,{imageSrc:s,isImageFetching:o,fetchImage:i}=pe(),a=async()=>{"moderator"===n.avatar||"placeholder"===n.avatar||i({filename:n.avatar,size:"100x100"})};return Object(r.onMounted)(a),Object(r.watch)((()=>n.avatar),a),{__sfc:!0,props:n,emit:t,imageSrc:s,isImageFetching:o,fetchImage:i,getImage:a,AvatarPlaceholder:he,ModeratorAvatar:_e}}});const ge=ue(me,(function(){var e=this._self._c,s=this._self._setupProxy;return"moderator"===s.props.avatar?e(s.ModeratorAvatar,{staticClass:"avatar"}):s.props.avatar&&"placeholder"!==s.props.avatar&&s.imageSrc?e("img",{staticClass:"avatar",attrs:{src:s.imageSrc}}):e(s.AvatarPlaceholder,{staticClass:"avatar",class:{"animate-pulse":s.isImageFetching},attrs:{gender:s.props.gender}})}),[],!1,null,null,null,null).exports,fe=Object(r.defineComponent)({__name:"CommonButton",props:{type:{default:"default"},ghost:{type:Boolean,default:!1},size:{default:"default"},disabled:{type:Boolean,default:!1}},setup(e){const t=e,s=Object(r.computed)((()=>({small:"button--size-small",default:"button--size-default",large:"button--size-large"}[t.size]))),n=Object(r.computed)((()=>t.ghost?"button--outlined":t.disabled?"button--disabled":{default:"button--type-default",primary:"button--type-primary",danger:"button--type-danger"}[t.type])),i=Object(r.computed)((()=>t.ghost?t.disabled?"button--disabled":{default:"button--outlined--default",primary:"button--outlined--primary",danger:"button--outlined--danger"}[t.type]:""));return{__sfc:!0,props:t,baseClasses:"button",sizeClasses:s,typeClasses:n,outlineClasses:i}}});const ve=ue(fe,(function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("button",{class:[s.baseClasses,s.sizeClasses,s.typeClasses,s.outlineClasses],attrs:{disabled:s.props.disabled},on:{click:function(t){return e.$emit("click")}}},[e._t("default")],2)}),[],!1,null,null,null,null).exports;const be=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{height:"100%",id:"Layer_1",version:"1.1",viewBox:"0 0 512 512","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[e("polygon",{attrs:{points:"352,128.4 319.7,96 160,256 160,256 160,256 319.7,416 352,383.6 224.7,256 "}})])}),[],!1,null,null,null,null).exports;const Ce=ue({},(function(){var e=this._self._c;return e("svg",{staticClass:"spinner",attrs:{width:"100%",height:"100%",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg"}},[e("circle",{staticClass:"path",attrs:{fill:"none",stroke:"currentColor","stroke-width":"6","stroke-linecap":"round",cx:"33",cy:"33",r:"30"}})])}),[],!1,null,"e83217be",null,null).exports;const ye=ue(Object(r.defineComponent)({__name:"AttachmentLoadingIcon",setup:e=>({__sfc:!0,LoadingIcon:Ce})}),(function(){var e=this._self._c;return e("div",{staticClass:"attachment-message__default__loading"},[e(this._self._setupProxy.LoadingIcon,{staticClass:"attachment-message__default__loading__spiner"})],1)}),[],!1,null,null,null,null).exports;const we=ue(Object(r.defineComponent)({__name:"AttachmentErrorIcon",setup:e=>({__sfc:!0,CloseIcon:Te})}),(function(){var e=this._self._c;return e("div",{staticClass:"attachment-message__default__error"},[e(this._self._setupProxy.CloseIcon)],1)}),[],!1,null,null,null,null).exports;const ke=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 20 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M1.87399 20.1317C4.37263 22.6228 8.42216 22.6228 10.9208 20.1317C13.7642 17.2973 16.5213 14.5486 19.3644 11.714C19.5799 11.4993 19.5799 11.1986 19.3644 10.9839L18.6322 10.2538C18.4168 10.039 18.1152 10.039 17.8999 10.2538C15.0564 13.0883 12.2994 15.8369 9.45609 18.6716C7.77596 20.3465 5.01883 20.3465 3.33871 18.6716C1.65858 16.9966 1.65858 14.2479 3.33871 12.5729L13.0317 2.90971C14.1518 1.79307 15.9612 1.79307 17.0813 2.90971C18.2014 4.02635 18.2014 5.83015 17.0813 6.94679L8.93913 15.064C8.37908 15.6222 7.4744 15.6222 6.91436 15.064C6.3974 14.5486 6.3974 13.6466 6.91436 13.0883L13.8502 6.21668C14.0657 6.00194 14.0657 5.70131 13.8502 5.48657L13.1179 4.75646C12.9026 4.54172 12.6009 4.54172 12.3855 4.75646L5.49272 11.6281C4.11415 13.0024 4.11415 15.1928 5.49272 16.5241C6.8282 17.8984 9.02529 17.8984 10.3608 16.5241L18.546 8.40701C20.4847 6.47437 20.4847 3.38213 18.546 1.44949C16.6073 -0.483162 13.5056 -0.483162 11.567 1.44949L1.87399 11.1127C-0.624662 13.6037 -0.624662 17.6408 1.87399 20.1317Z",fill:"currentColor"}})])}),[],!1,null,null,null,null).exports;const Se=ue({},(function(){var e=this._self._c;return e("svg",{staticClass:"icon",attrs:{width:"100%",height:"100%",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M219.51 475.38h219.43v73.14H219.51z",fill:"currentColor"}}),e("path",{attrs:{d:"M182.61 366.27h585.62v179.48h73.14V145.62c0-39.96-32.5-72.48-72.46-72.48h-27.36c-29.2 0-55.05 16.73-65.88 42.59-5.71 13.61-27.84 13.64-33.55 0-10.86-25.88-36.71-42.59-65.89-42.59h-18.16c-29.2 0-55.05 16.73-65.88 42.59-5.71 13.61-27.84 13.64-33.55 0-10.86-25.88-36.71-42.59-65.89-42.59h-17.43c-29.2 0-55.05 16.73-65.88 42.59-5.71 13.61-27.84 13.64-33.55 0-10.86-25.88-36.71-42.59-65.89-42.59h-27.57c-39.96 0-72.48 32.52-72.48 72.48v805.12h437.79V877.6h-364.7l-0.43-511.33zM208.42 144c14.27 34.07 47.32 56.09 84.23 56.09 36.89 0 69.95-22 82.66-53.8l15.86-2.29c14.27 34.07 47.32 56.09 84.23 56.09 36.89 0 69.95-22 82.66-53.8l16.59-2.29c14.27 34.07 47.32 56.09 84.23 56.09 36.89 0 69.95-22 82.66-53.8l26.68-0.66v147.5H182.54l-0.12-146.84 26-2.29z",fill:"currentColor"}}),e("path",{attrs:{d:"M905.81 897.5l-56.19-56.19c17.6-26.2 27.91-57.71 27.91-91.65 0-90.89-73.68-164.57-164.57-164.57s-164.57 73.68-164.57 164.57 73.68 164.57 164.57 164.57c30.4 0 58.52-8.82 82.96-23.19l58.18 58.18 51.71-51.72zM621.53 749.66c0-50.41 41.02-91.43 91.43-91.43 50.42 0 91.43 41.02 91.43 91.43 0 50.41-41.01 91.43-91.43 91.43-50.41 0-91.43-41.02-91.43-91.43z",fill:"currentColor"}})])}),[],!1,null,null,null,null).exports;const Te=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M8.95833 6.99996L13.4584 2.54163C13.7083 2.29163 13.7083 1.83329 13.4584 1.58329L12.4167 0.541626C12.1667 0.291626 11.7083 0.291626 11.4583 0.541626L7 5.04163L2.5 0.541626C2.25 0.291626 1.79167 0.291626 1.54167 0.541626L0.5 1.58329C0.25 1.83329 0.25 2.29163 0.5 2.54163L5 6.99996L0.5 11.5C0.25 11.75 0.25 12.2083 0.5 12.4584L1.54167 13.5C1.79167 13.75 2.25 13.75 2.5 13.5L7 8.99996L11.4583 13.5C11.7083 13.75 12.1667 13.75 12.4167 13.5L13.4584 12.4584C13.7083 12.2083 13.7083 11.75 13.4584 11.5L8.95833 6.99996Z",fill:"currentColor"}})])}),[],!1,null,null,null,null).exports;const xe=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("polyline",{attrs:{points:"3 6 5 6 21 6"}}),e("path",{attrs:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}}),e("line",{attrs:{x1:"10",y1:"11",x2:"10",y2:"17"}}),e("line",{attrs:{x1:"14",y1:"11",x2:"14",y2:"17"}})])}),[],!1,null,null,null,null).exports;const Me=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M3 15C3 17.8284 3 19.2426 3.87868 20.1213C4.75736 21 6.17157 21 9 21H15C17.8284 21 19.2426 21 20.1213 20.1213C21 19.2426 21 17.8284 21 15",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),e("path",{attrs:{d:"M12 3V16M12 16L16 11.625M12 16L8 11.625",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])}),[],!1,null,null,null,null).exports;const Oe=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{viewBox:"0 0 24 24",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}})])}),[],!1,null,null,null,null).exports;const je=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M8 0C3.58065 0 0 3.58065 0 8C0 12.4193 3.58065 16 8 16C12.4193 16 16 12.4193 16 8C16 3.58065 12.4193 0 8 0ZM8 14.4516C4.41935 14.4516 1.54839 11.5807 1.54839 8C1.54839 4.45161 4.41935 1.54839 8 1.54839C11.5484 1.54839 14.4516 4.45161 14.4516 8C14.4516 11.5807 11.5484 14.4516 8 14.4516ZM11.258 6C11.4194 5.87097 11.4194 5.6129 11.258 5.45161L10.5484 4.74194C10.3871 4.58065 10.129 4.58065 10 4.74194L8 6.74194L5.96774 4.74194C5.83871 4.58065 5.58065 4.58065 5.41935 4.74194L4.70968 5.45161C4.54839 5.6129 4.54839 5.87097 4.70968 6L6.70968 8L4.70968 10.0323C4.54839 10.1613 4.54839 10.4194 4.70968 10.5806L5.41935 11.2903C5.58065 11.4517 5.83871 11.4517 5.96774 11.2903L8 9.29032L10 11.2903C10.129 11.4517 10.3871 11.4517 10.5484 11.2903L11.258 10.5806C11.4194 10.4194 11.4194 10.1613 11.258 10.0323L9.25806 8L11.258 6Z",fill:"currentColor"}})])}),[],!1,null,null,null,null).exports;const Ie=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{height:"100%",width:"100%",viewBox:"0 0 24 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M23.0624 6.12499L17.875 0.874992C17.3125 0.3125 16.5 0 15.75 0H3C1.3125 0 0 1.37499 0 2.99999V29C0 30.6876 1.3125 32 3 32H21C22.625 32 24 30.6876 24 29V8.24999C24 7.49999 23.625 6.68749 23.0624 6.12499ZM20.75 7.99999H16V3.24999L20.75 7.99999ZM3 29V2.99999H13V9.49999C13 10.375 13.625 11 14.5 11H21V29H3Z",fill:"currentColor"}})])}),[],!1,null,null,null,null).exports;const Le=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M7 12l5 5l10 -10"}}),e("path",{attrs:{d:"M2 12l5 5m5 -5l5 -5"}})])}),[],!1,null,null,null,null).exports;const Ee=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M15.094 0.90625L13.469 2.53125C12.0627 1.125 10.1252 0.25 8.00021 0.25C3.71896 0.25 0.218958 3.75 0.250208 8.03125C0.250208 12.3125 3.71896 15.75 8.00021 15.75C9.96896 15.75 11.8127 15 13.1877 13.7812C13.344 13.625 13.344 13.375 13.1877 13.2188L12.5627 12.5938C12.4377 12.4688 12.219 12.4688 12.0627 12.5938C10.969 13.5625 9.56271 14.125 8.00021 14.125C4.59396 14.125 1.87521 11.4062 1.87521 8C1.87521 4.625 4.59396 1.875 8.00021 1.875C9.68771 1.875 11.219 2.5625 12.3127 3.6875L10.6252 5.375C10.3752 5.625 10.5627 6 10.8752 6H15.3752C15.5627 6 15.7502 5.84375 15.7502 5.625V1.15625C15.7502 0.84375 15.344 0.65625 15.094 0.90625Z",fill:"currentColor"}})])}),[],!1,null,null,null,null).exports;const Pe=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M13.8971 12.8055L10.587 9.50169C10.5049 9.44708 10.4228 9.39248 10.3407 9.39248H9.98511C10.8331 8.40957 11.3803 7.09899 11.3803 5.67919C11.3803 2.56656 8.80871 0 5.69003 0C2.54397 0 -0.000244141 2.56656 -0.000244141 5.67919C-0.000244141 8.81912 2.54397 11.3583 5.69003 11.3583C7.1126 11.3583 8.39839 10.8396 9.41057 9.99316V10.3482C9.41057 10.43 9.43797 10.512 9.49268 10.5938L12.8028 13.8976C12.9397 14.0341 13.1585 14.0341 13.268 13.8976L13.8971 13.2696C14.034 13.1604 14.034 12.942 13.8971 12.8055ZM5.69003 10.0478C3.25525 10.0478 1.3129 8.10923 1.3129 5.67919C1.3129 3.27646 3.25525 1.31058 5.69003 1.31058C8.09746 1.31058 10.0671 3.27646 10.0671 5.67919C10.0671 8.10923 8.09746 10.0478 5.69003 10.0478Z",fill:"currentColor"}})])}),[],!1,null,null,null,null).exports;const Re=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M15.3889 0.724512L0.944405 9.05785C-0.270872 9.75229 -0.166706 11.5231 1.11802 12.044L5.11107 13.6759V16.5926C5.11107 18.2246 7.15968 18.8842 8.09718 17.5996L9.62496 15.5509L13.5139 17.1481C13.7222 17.2523 13.9305 17.287 14.1389 17.287C14.4166 17.287 14.6944 17.2176 14.9722 17.0787C15.4235 16.8009 15.7013 16.3842 15.8055 15.8634L17.8542 2.4259C18.0624 1.03701 16.5694 0.0300713 15.3889 0.724512ZM6.77774 16.5926V14.3703L8.02774 14.8912L6.77774 16.5926ZM14.1389 15.6203L8.79163 13.3981L13.6875 6.38423C14.0346 5.82868 13.3402 5.20368 12.8542 5.65507L5.49302 12.044L1.77774 10.4814L16.2222 2.14812L14.1389 15.6203Z",fill:"currentColor"}})])}),[],!1,null,null,null,null).exports;const Fe=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M5 12l5 5l10 -10"}})])}),[],!1,null,null,null,null).exports;const De=ue({},(function(){var e=this._self._c;return e("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 8.25C9.92894 8.25 8.25 9.92893 8.25 12C8.25 14.0711 9.92894 15.75 12 15.75C14.0711 15.75 15.75 14.0711 15.75 12C15.75 9.92893 14.0711 8.25 12 8.25ZM9.75 12C9.75 10.7574 10.7574 9.75 12 9.75C13.2426 9.75 14.25 10.7574 14.25 12C14.25 13.2426 13.2426 14.25 12 14.25C10.7574 14.25 9.75 13.2426 9.75 12Z",fill:"currentColor"}}),e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.9747 1.25C11.5303 1.24999 11.1592 1.24999 10.8546 1.27077C10.5375 1.29241 10.238 1.33905 9.94761 1.45933C9.27379 1.73844 8.73843 2.27379 8.45932 2.94762C8.31402 3.29842 8.27467 3.66812 8.25964 4.06996C8.24756 4.39299 8.08454 4.66251 7.84395 4.80141C7.60337 4.94031 7.28845 4.94673 7.00266 4.79568C6.64714 4.60777 6.30729 4.45699 5.93083 4.40743C5.20773 4.31223 4.47642 4.50819 3.89779 4.95219C3.64843 5.14353 3.45827 5.3796 3.28099 5.6434C3.11068 5.89681 2.92517 6.21815 2.70294 6.60307L2.67769 6.64681C2.45545 7.03172 2.26993 7.35304 2.13562 7.62723C1.99581 7.91267 1.88644 8.19539 1.84541 8.50701C1.75021 9.23012 1.94617 9.96142 2.39016 10.5401C2.62128 10.8412 2.92173 11.0602 3.26217 11.2741C3.53595 11.4461 3.68788 11.7221 3.68786 12C3.68785 12.2778 3.53592 12.5538 3.26217 12.7258C2.92169 12.9397 2.62121 13.1587 2.39007 13.4599C1.94607 14.0385 1.75012 14.7698 1.84531 15.4929C1.88634 15.8045 1.99571 16.0873 2.13552 16.3727C2.26983 16.6469 2.45535 16.9682 2.67758 17.3531L2.70284 17.3969C2.92507 17.7818 3.11058 18.1031 3.28089 18.3565C3.45817 18.6203 3.64833 18.8564 3.89769 19.0477C4.47632 19.4917 5.20763 19.6877 5.93073 19.5925C6.30717 19.5429 6.647 19.3922 7.0025 19.2043C7.28833 19.0532 7.60329 19.0596 7.8439 19.1986C8.08452 19.3375 8.24756 19.607 8.25964 19.9301C8.27467 20.3319 8.31403 20.7016 8.45932 21.0524C8.73843 21.7262 9.27379 22.2616 9.94761 22.5407C10.238 22.661 10.5375 22.7076 10.8546 22.7292C11.1592 22.75 11.5303 22.75 11.9747 22.75H12.0252C12.4697 22.75 12.8407 22.75 13.1454 22.7292C13.4625 22.7076 13.762 22.661 14.0524 22.5407C14.7262 22.2616 15.2616 21.7262 15.5407 21.0524C15.686 20.7016 15.7253 20.3319 15.7403 19.93C15.7524 19.607 15.9154 19.3375 16.156 19.1985C16.3966 19.0596 16.7116 19.0532 16.9974 19.2042C17.3529 19.3921 17.6927 19.5429 18.0692 19.5924C18.7923 19.6876 19.5236 19.4917 20.1022 19.0477C20.3516 18.8563 20.5417 18.6203 20.719 18.3565C20.8893 18.1031 21.0748 17.7818 21.297 17.3969L21.3223 17.3531C21.5445 16.9682 21.7301 16.6468 21.8644 16.3726C22.0042 16.0872 22.1135 15.8045 22.1546 15.4929C22.2498 14.7697 22.0538 14.0384 21.6098 13.4598C21.3787 13.1586 21.0782 12.9397 20.7378 12.7258C20.464 12.5538 20.3121 12.2778 20.3121 11.9999C20.3121 11.7221 20.464 11.4462 20.7377 11.2742C21.0783 11.0603 21.3788 10.8414 21.6099 10.5401C22.0539 9.96149 22.2499 9.23019 22.1547 8.50708C22.1136 8.19546 22.0043 7.91274 21.8645 7.6273C21.7302 7.35313 21.5447 7.03183 21.3224 6.64695L21.2972 6.60318C21.0749 6.21825 20.8894 5.89688 20.7191 5.64347C20.5418 5.37967 20.3517 5.1436 20.1023 4.95225C19.5237 4.50826 18.7924 4.3123 18.0692 4.4075C17.6928 4.45706 17.353 4.60782 16.9975 4.79572C16.7117 4.94679 16.3967 4.94036 16.1561 4.80144C15.9155 4.66253 15.7524 4.39297 15.7403 4.06991C15.7253 3.66808 15.686 3.2984 15.5407 2.94762C15.2616 2.27379 14.7262 1.73844 14.0524 1.45933C13.762 1.33905 13.4625 1.29241 13.1454 1.27077C12.8407 1.24999 12.4697 1.24999 12.0252 1.25H11.9747ZM10.5216 2.84515C10.5988 2.81319 10.716 2.78372 10.9567 2.76729C11.2042 2.75041 11.5238 2.75 12 2.75C12.4762 2.75 12.7958 2.75041 13.0432 2.76729C13.284 2.78372 13.4012 2.81319 13.4783 2.84515C13.7846 2.97202 14.028 3.21536 14.1548 3.52165C14.1949 3.61826 14.228 3.76887 14.2414 4.12597C14.271 4.91835 14.68 5.68129 15.4061 6.10048C16.1321 6.51968 16.9974 6.4924 17.6984 6.12188C18.0143 5.9549 18.1614 5.90832 18.265 5.89467C18.5937 5.8514 18.9261 5.94047 19.1891 6.14228C19.2554 6.19312 19.3395 6.27989 19.4741 6.48016C19.6125 6.68603 19.7726 6.9626 20.0107 7.375C20.2488 7.78741 20.4083 8.06438 20.5174 8.28713C20.6235 8.50382 20.6566 8.62007 20.6675 8.70287C20.7108 9.03155 20.6217 9.36397 20.4199 9.62698C20.3562 9.70995 20.2424 9.81399 19.9397 10.0041C19.2684 10.426 18.8122 11.1616 18.8121 11.9999C18.8121 12.8383 19.2683 13.574 19.9397 13.9959C20.2423 14.186 20.3561 14.29 20.4198 14.373C20.6216 14.636 20.7107 14.9684 20.6674 15.2971C20.6565 15.3799 20.6234 15.4961 20.5173 15.7128C20.4082 15.9355 20.2487 16.2125 20.0106 16.6249C19.7725 17.0373 19.6124 17.3139 19.474 17.5198C19.3394 17.72 19.2553 17.8068 19.189 17.8576C18.926 18.0595 18.5936 18.1485 18.2649 18.1053C18.1613 18.0916 18.0142 18.045 17.6983 17.8781C16.9973 17.5075 16.132 17.4803 15.4059 17.8995C14.68 18.3187 14.271 19.0816 14.2414 19.874C14.228 20.2311 14.1949 20.3817 14.1548 20.4784C14.028 20.7846 13.7846 21.028 13.4783 21.1549C13.4012 21.1868 13.284 21.2163 13.0432 21.2327C12.7958 21.2496 12.4762 21.25 12 21.25C11.5238 21.25 11.2042 21.2496 10.9567 21.2327C10.716 21.2163 10.5988 21.1868 10.5216 21.1549C10.2154 21.028 9.97201 20.7846 9.84514 20.4784C9.80512 20.3817 9.77195 20.2311 9.75859 19.874C9.72896 19.0817 9.31997 18.3187 8.5939 17.8995C7.86784 17.4803 7.00262 17.5076 6.30158 17.8781C5.98565 18.0451 5.83863 18.0917 5.73495 18.1053C5.40626 18.1486 5.07385 18.0595 4.81084 17.8577C4.74458 17.8069 4.66045 17.7201 4.52586 17.5198C4.38751 17.314 4.22736 17.0374 3.98926 16.625C3.75115 16.2126 3.59171 15.9356 3.4826 15.7129C3.37646 15.4962 3.34338 15.3799 3.33248 15.2971C3.28921 14.9684 3.37828 14.636 3.5801 14.373C3.64376 14.2901 3.75761 14.186 4.0602 13.9959C4.73158 13.5741 5.18782 12.8384 5.18786 12.0001C5.18791 11.1616 4.73165 10.4259 4.06021 10.004C3.75769 9.81389 3.64385 9.70987 3.58019 9.62691C3.37838 9.3639 3.28931 9.03149 3.33258 8.7028C3.34348 8.62001 3.37656 8.50375 3.4827 8.28707C3.59181 8.06431 3.75125 7.78734 3.98935 7.37493C4.22746 6.96253 4.3876 6.68596 4.52596 6.48009C4.66055 6.27983 4.74468 6.19305 4.81093 6.14222C5.07395 5.9404 5.40636 5.85133 5.73504 5.8946C5.83873 5.90825 5.98576 5.95483 6.30173 6.12184C7.00273 6.49235 7.86791 6.51962 8.59394 6.10045C9.31998 5.68128 9.72896 4.91837 9.75859 4.12602C9.77195 3.76889 9.80512 3.61827 9.84514 3.52165C9.97201 3.21536 10.2154 2.97202 10.5216 2.84515Z",fill:"currentColor"}})])}),[],!1,null,null,null,null).exports;const Ae=ue({},(function(){var e=this._self._c;return e("svg",{staticClass:"cursor-pointer",attrs:{width:"100%",height:"100%",viewBox:"0 0 21 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M14.6754 12.7936C14.6024 12.868 14.6024 12.9422 14.6024 13.0167V17.2161H1.75229V4.13447H10.5502C10.6232 4.13447 10.6962 4.13447 10.7693 4.06015L11.9375 2.8709C12.12 2.68509 11.974 2.35061 11.7184 2.35061H1.75229C0.766625 2.35061 0 3.16822 0 4.13447V17.2161C0 18.2196 0.766625 19 1.75229 19H14.6024C15.5515 19 16.3547 18.2196 16.3547 17.2161V11.8274C16.3547 11.5672 16.0262 11.4186 15.8436 11.6043L14.6754 12.7936ZM20.3703 5.32372C21.2099 4.46895 21.2099 3.09389 20.3703 2.23912L18.8006 0.641076C17.9609 -0.213692 16.6103 -0.213692 15.7706 0.641076L6.20601 10.378L5.84095 13.76C5.73143 14.7261 6.53456 15.5438 7.48372 15.4323L10.8058 15.0606L20.3703 5.32372ZM16.7927 6.43863L10.0026 13.3511L7.59324 13.6484L7.88528 11.1956L14.6754 4.28313L16.7927 6.43863ZM19.1291 3.50269C19.3116 3.65134 19.3116 3.87433 19.1656 4.06015L18.0339 5.21222L15.9166 3.01956L17.0118 1.90465C17.1578 1.71883 17.4133 1.71883 17.5593 1.90465L19.1291 3.50269Z",fill:"currentColor"}})])}),[],!1,null,null,null,null).exports;class $e extends Error{}function We(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let s=t.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s})))}(t)}catch{return atob(t)}}function Ue(e,t){if("string"!=typeof e)throw new $e("Invalid token specified: must be a string");t||(t={});const n=!0===t.header?0:1,s=e.split(".")[n];if("string"!=typeof s)throw new $e(`Invalid token specified: missing part #${n+1}`);let r;try{r=We(s)}catch(e){throw new $e(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new $e(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}function Ne(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}$e.prototype.name="InvalidTokenError";var Be,ze={exports:{}},He="object"==typeof Reflect?Reflect:null,Ve=He&&"function"==typeof He.apply?He.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)};Be=He&&"function"==typeof He.ownKeys?He.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var Ze=Number.isNaN||function(e){return e!=e};function Je(){Je.init.call(this)}ze.exports=Je,ze.exports.once=function(e,t){return new Promise((function(n,s){function r(a){e.removeListener(t,i),s(a)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}nt(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&nt(e,"error",t,n)}(e,r,{once:!0})}))},Je.EventEmitter=Je,Je.prototype._events=void 0,Je.prototype._eventsCount=0,Je.prototype._maxListeners=void 0;var Ge=10;function qe(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function Ye(e){return void 0===e._maxListeners?Je.defaultMaxListeners:e._maxListeners}function Ke(e,t,n,s){var r,i,a;if(qe(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=s?[n,a]:[a,n]:s?a.unshift(n):a.push(n),(r=Ye(e))>0&&a.length>r&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,function(e){console&&console.warn&&console.warn(e)}(o)}return e}function Xe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Qe(e,t,n){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=Xe.bind(s);return r.listener=n,s.wrapFn=r,r}function et(e,t,n){var s=e._events;if(void 0===s)return[];var r=s[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):st(r,r.length)}function tt(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function st(e,t){for(var n=new Array(t),s=0;s<t;++s)n[s]=e[s];return n}function nt(e,t,n,s){if("function"==typeof e.on)s.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(i){s.once&&e.removeEventListener(t,r),n(i)}))}}Object.defineProperty(Je,"defaultMaxListeners",{enumerable:!0,get:function(){return Ge},set:function(e){if("number"!=typeof e||e<0||Ze(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ge=e}}),Je.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Je.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||Ze(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Je.prototype.getMaxListeners=function(){return Ye(this)},Je.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var r=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw r.context=a,r}var o=i[e];if(void 0===o)return!1;if("function"==typeof o)Ve(o,this,t);else{var l=o.length,u=st(o,l);for(s=0;s<l;++s)Ve(u[s],this,t)}return!0},Je.prototype.addListener=function(e,t){return Ke(this,e,t,!1)},Je.prototype.on=Je.prototype.addListener,Je.prototype.prependListener=function(e,t){return Ke(this,e,t,!0)},Je.prototype.once=function(e,t){return qe(t),this.on(e,Qe(this,e,t)),this},Je.prototype.prependOnceListener=function(e,t){return qe(t),this.prependListener(e,Qe(this,e,t)),this},Je.prototype.removeListener=function(e,t){var s,n,i,a,r;if(qe(t),void 0===(n=this._events))return this;if(void 0===(s=n[e]))return this;if(s===t||s.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,s.listener||t));else if("function"!=typeof s){for(i=-1,a=s.length-1;a>=0;a--)if(s[a]===t||s[a].listener===t){r=s[a].listener,i=a;break}if(i<0)return this;0===i?s.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(s,i),1===s.length&&(n[e]=s[0]),void 0!==n.removeListener&&this.emit("removeListener",e,r||t)}return this},Je.prototype.off=Je.prototype.removeListener,Je.prototype.removeAllListeners=function(e){var t,s,n;if(void 0===(s=this._events))return this;if(void 0===s.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==s[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete s[e]),this;if(0===arguments.length){var a,i=Object.keys(s);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=s[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},Je.prototype.listeners=function(e){return et(this,e,!0)},Je.prototype.rawListeners=function(e){return et(this,e,!1)},Je.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):tt.call(e,t)},Je.prototype.listenerCount=tt,Je.prototype.eventNames=function(){return this._eventsCount>0?Be(this._events):[]};var it,at,ot,lt,ct,rt,ut,ht,_t=Ne(ze.exports);function pt(e){return null!=e&&"function"==typeof e}function mt(e,t,n){e>31&&(e=31);const s=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(0,Math.min(n,t*Math.pow(2,e)));return Math.min(n,t+s)}function gt(e){return Math.min(1e3*e,2147483647)}(at=it||(it={}))[at.timeout=1]="timeout",at[at.transportClosed=2]="transportClosed",at[at.clientDisconnected=3]="clientDisconnected",at[at.clientClosed=4]="clientClosed",at[at.clientConnectToken=5]="clientConnectToken",at[at.clientRefreshToken=6]="clientRefreshToken",at[at.subscriptionUnsubscribed=7]="subscriptionUnsubscribed",at[at.subscriptionSubscribeToken=8]="subscriptionSubscribeToken",at[at.subscriptionRefreshToken=9]="subscriptionRefreshToken",at[at.transportWriteError=10]="transportWriteError",at[at.connectionClosed=11]="connectionClosed",at[at.badConfiguration=12]="badConfiguration",function(e){e[e.connectCalled=0]="connectCalled",e[e.transportClosed=1]="transportClosed",e[e.noPing=2]="noPing",e[e.subscribeTimeout=3]="subscribeTimeout",e[e.unsubscribeError=4]="unsubscribeError"}(ot||(ot={})),function(e){e[e.disconnectCalled=0]="disconnectCalled",e[e.unauthorized=1]="unauthorized",e[e.badProtocol=2]="badProtocol",e[e.messageSizeLimit=3]="messageSizeLimit"}(lt||(lt={})),function(e){e[e.subscribeCalled=0]="subscribeCalled",e[e.transportClosed=1]="transportClosed"}(ct||(ct={})),function(e){e[e.unsubscribeCalled=0]="unsubscribeCalled",e[e.unauthorized=1]="unauthorized",e[e.clientClosed=2]="clientClosed"}(rt||(rt={})),function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected"}(ut||(ut={})),function(e){e.Unsubscribed="unsubscribed",e.Subscribing="subscribing",e.Subscribed="subscribed"}(ht||(ht={}));class ft extends _t{constructor(e,t,s){super(),this._resubscribeTimeout=null,this._refreshTimeout=null,this.channel=t,this.state=ht.Unsubscribed,this._centrifuge=e,this._token="",this._getToken=null,this._data=null,this._getData=null,this._recover=!1,this._offset=null,this._epoch=null,this._recoverable=!1,this._positioned=!1,this._joinLeave=!1,this._minResubscribeDelay=500,this._maxResubscribeDelay=2e4,this._resubscribeTimeout=null,this._resubscribeAttempts=0,this._promises={},this._promiseId=0,this._inflight=!1,this._refreshTimeout=null,this._setOptions(s),this._centrifuge._debugEnabled?(this.on("state",(e=>{this._centrifuge._debug("subscription state",t,e.oldState,"->",e.newState)})),this.on("error",(e=>{this._centrifuge._debug("subscription error",t,e)}))):this.on("error",(function(){Function.prototype()}))}ready(e){return this.state===ht.Unsubscribed?Promise.reject({code:it.subscriptionUnsubscribed,message:this.state}):this.state===ht.Subscribed?Promise.resolve():new Promise(((t,s)=>{const n={resolve:t,reject:s};e&&(n.timeout=setTimeout((function(){s({code:it.timeout,message:"timeout"})}),e)),this._promises[this._nextPromiseId()]=n}))}subscribe(){this._isSubscribed()||(this._resubscribeAttempts=0,this._setSubscribing(ct.subscribeCalled,"subscribe called"))}unsubscribe(){this._setUnsubscribed(rt.unsubscribeCalled,"unsubscribe called",!0)}publish(e){const t=this;return this._methodCall().then((function(){return t._centrifuge.publish(t.channel,e)}))}presence(){const e=this;return this._methodCall().then((function(){return e._centrifuge.presence(e.channel)}))}presenceStats(){const e=this;return this._methodCall().then((function(){return e._centrifuge.presenceStats(e.channel)}))}history(e){const t=this;return this._methodCall().then((function(){return t._centrifuge.history(t.channel,e)}))}_methodCall(){return this._isSubscribed()?Promise.resolve():this._isUnsubscribed()?Promise.reject({code:it.subscriptionUnsubscribed,message:this.state}):new Promise(((e,t)=>{const s=setTimeout((function(){t({code:it.timeout,message:"timeout"})}),this._centrifuge._config.timeout);this._promises[this._nextPromiseId()]={timeout:s,resolve:e,reject:t}}))}_nextPromiseId(){return++this._promiseId}_needRecover(){return!0===this._recover}_isUnsubscribed(){return this.state===ht.Unsubscribed}_isSubscribing(){return this.state===ht.Subscribing}_isSubscribed(){return this.state===ht.Subscribed}_setState(e){if(this.state!==e){const t=this.state;return this.state=e,this.emit("state",{newState:e,oldState:t,channel:this.channel}),!0}return!1}_usesToken(){return""!==this._token||null!==this._getToken}_clearSubscribingState(){this._resubscribeAttempts=0,this._clearResubscribeTimeout()}_clearSubscribedState(){this._clearRefreshTimeout()}_setSubscribed(e){if(!this._isSubscribing())return;this._clearSubscribingState(),e.recoverable&&(this._recover=!0,this._offset=e.offset||0,this._epoch=e.epoch||""),this._setState(ht.Subscribed);const t=this._centrifuge._getSubscribeContext(this.channel,e);this.emit("subscribed",t),this._resolvePromises();const s=e.publications;if(s&&s.length>0)for(const e in s)!s.hasOwnProperty(e)||this._handlePublication(s[e]);!0===e.expires&&(this._refreshTimeout=setTimeout((()=>this._refresh()),gt(e.ttl)))}_setSubscribing(e,t){this._isSubscribing()||(this._isSubscribed()&&this._clearSubscribedState(),this._setState(ht.Subscribing)&&this.emit("subscribing",{channel:this.channel,code:e,reason:t}),this._subscribe())}_subscribe(){if(this._centrifuge._debug("subscribing on",this.channel),!this._centrifuge._transportIsOpen)return this._centrifuge._debug("delay subscribe on",this.channel,"till connected"),null;const e=this,t={channel:e.channel};return!this._usesToken()||this._token?e._getData?(e._getData(t).then((function(s){!e._isSubscribing()||(e._data=s,e._sendSubscribe(e._token))})),null):e._sendSubscribe(e._token):(this._getSubscriptionToken().then((function(s){if(e._isSubscribing()){if(!s)return void e._failUnauthorized();e._token=s,e._getData?e._getData(t).then((function(t){!e._isSubscribing()||(e._data=t,e._sendSubscribe(s))})):e._sendSubscribe(s)}})).catch((function(s){if(e._isSubscribing()){if(s instanceof xt)return void e._failUnauthorized();e.emit("error",{type:"subscribeToken",channel:e.channel,error:{code:it.subscriptionSubscribeToken,message:void 0!==s?s.toString():""}}),e._scheduleResubscribe()}})),null)}_sendSubscribe(e){if(!this._centrifuge._transportIsOpen)return null;const s={channel:this.channel};if(e&&(s.token=e),this._data&&(s.data=this._data),this._positioned&&(s.positioned=!0),this._recoverable&&(s.recoverable=!0),this._joinLeave&&(s.join_leave=!0),this._needRecover()){s.recover=!0;const i=this._getOffset();i&&(s.offset=i);const a=this._getEpoch();a&&(s.epoch=a)}const t={subscribe:s};return this._inflight=!0,this._centrifuge._call(t).then((i=>{this._inflight=!1;const a=i.reply.subscribe;this._handleSubscribeResponse(a),i.next&&i.next()}),(i=>{this._inflight=!1,this._handleSubscribeError(i.error),i.next&&i.next()})),t}_handleSubscribeError(e){if(this._isSubscribing()){if(e.code===it.timeout)return void this._centrifuge._disconnect(ot.subscribeTimeout,"subscribe timeout",!0);this._subscribeError(e)}}_handleSubscribeResponse(e){!this._isSubscribing()||this._setSubscribed(e)}_setUnsubscribed(e,t,s){this._isUnsubscribed()||(this._isSubscribed()&&(s&&this._centrifuge._unsubscribe(this),this._clearSubscribedState()),this._isSubscribing()&&(this._inflight&&s&&this._centrifuge._unsubscribe(this),this._clearSubscribingState()),this._setState(ht.Unsubscribed)&&this.emit("unsubscribed",{channel:this.channel,code:e,reason:t}),this._rejectPromises({code:it.subscriptionUnsubscribed,message:this.state}))}_handlePublication(e){const t=this._centrifuge._getPublicationContext(this.channel,e);this.emit("publication",t),e.offset&&(this._offset=e.offset)}_handleJoin(e){const t=this._centrifuge._getJoinLeaveContext(e.info);this.emit("join",{channel:this.channel,info:t})}_handleLeave(e){const t=this._centrifuge._getJoinLeaveContext(e.info);this.emit("leave",{channel:this.channel,info:t})}_resolvePromises(){for(const e in this._promises)!this._promises.hasOwnProperty(e)||(this._promises[e].timeout&&clearTimeout(this._promises[e].timeout),this._promises[e].resolve(),delete this._promises[e])}_rejectPromises(e){for(const t in this._promises)!this._promises.hasOwnProperty(t)||(this._promises[t].timeout&&clearTimeout(this._promises[t].timeout),this._promises[t].reject(e),delete this._promises[t])}_scheduleResubscribe(){const e=this,t=this._getResubscribeDelay();this._resubscribeTimeout=setTimeout((function(){e._isSubscribing()&&e._subscribe()}),t)}_subscribeError(e){if(this._isSubscribing())if(e.code<100||109===e.code||!0===e.temporary){109===e.code&&(this._token="");const t={channel:this.channel,type:"subscribe",error:e};this._centrifuge.state===ut.Connected&&this.emit("error",t),this._scheduleResubscribe()}else this._setUnsubscribed(e.code,e.message,!1)}_getResubscribeDelay(){const e=mt(this._resubscribeAttempts,this._minResubscribeDelay,this._maxResubscribeDelay);return this._resubscribeAttempts++,e}_setOptions(e){!e||(e.since&&(this._offset=e.since.offset,this._epoch=e.since.epoch,this._recover=!0),e.data&&(this._data=e.data),e.getData&&(this._getData=e.getData),void 0!==e.minResubscribeDelay&&(this._minResubscribeDelay=e.minResubscribeDelay),void 0!==e.maxResubscribeDelay&&(this._maxResubscribeDelay=e.maxResubscribeDelay),e.token&&(this._token=e.token),e.getToken&&(this._getToken=e.getToken),!0===e.positioned&&(this._positioned=!0),!0===e.recoverable&&(this._recoverable=!0),!0===e.joinLeave&&(this._joinLeave=!0))}_getOffset(){const e=this._offset;return null!==e?e:0}_getEpoch(){const e=this._epoch;return null!==e?e:""}_clearRefreshTimeout(){null!==this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null)}_clearResubscribeTimeout(){null!==this._resubscribeTimeout&&(clearTimeout(this._resubscribeTimeout),this._resubscribeTimeout=null)}_getSubscriptionToken(){this._centrifuge._debug("get subscription token for channel",this.channel);const e={channel:this.channel},t=this._getToken;if(null===t)throw this.emit("error",{type:"configuration",channel:this.channel,error:{code:it.badConfiguration,message:"provide a function to get channel subscription token"}}),new xt("");return t(e)}_refresh(){this._clearRefreshTimeout();const e=this;this._getSubscriptionToken().then((function(t){if(!e._isSubscribed())return;if(!t)return void e._failUnauthorized();e._token=t;const n={sub_refresh:{channel:e.channel,token:t}};e._centrifuge._call(n).then((i=>{const a=i.reply.sub_refresh;e._refreshResponse(a),i.next&&i.next()}),(i=>{e._refreshError(i.error),i.next&&i.next()}))})).catch((function(t){t instanceof xt?e._failUnauthorized():(e.emit("error",{type:"refreshToken",channel:e.channel,error:{code:it.subscriptionRefreshToken,message:void 0!==t?t.toString():""}}),e._refreshTimeout=setTimeout((()=>e._refresh()),e._getRefreshRetryDelay()))}))}_refreshResponse(e){!this._isSubscribed()||(this._centrifuge._debug("subscription token refreshed, channel",this.channel),this._clearRefreshTimeout(),!0===e.expires&&(this._refreshTimeout=setTimeout((()=>this._refresh()),gt(e.ttl))))}_refreshError(e){!this._isSubscribed()||(e.code<100||!0===e.temporary?(this.emit("error",{type:"refresh",channel:this.channel,error:e}),this._refreshTimeout=setTimeout((()=>this._refresh()),this._getRefreshRetryDelay())):this._setUnsubscribed(e.code,e.message,!0))}_getRefreshRetryDelay(){return mt(0,1e4,2e4)}_failUnauthorized(){this._setUnsubscribed(rt.unauthorized,"unauthorized",!0)}}class vt{constructor(e,t){this.endpoint=e,this.options=t,this._transport=null}name(){return"sockjs"}subName(){return"sockjs-"+this._transport.transport}emulation(){return!1}supported(){return null!==this.options.sockjs}initialize(e,t){this._transport=new this.options.sockjs(this.endpoint,null,this.options.sockjsOptions),this._transport.onopen=()=>{t.onOpen()},this._transport.onerror=s=>{t.onError(s)},this._transport.onclose=s=>{t.onClose(s)},this._transport.onmessage=s=>{t.onMessage(s.data)}}close(){this._transport.close()}send(e){this._transport.send(e)}}class bt{constructor(e,t){this.endpoint=e,this.options=t,this._transport=null}name(){return"websocket"}subName(){return"websocket"}emulation(){return!1}supported(){return void 0!==this.options.websocket&&null!==this.options.websocket}initialize(e,t){let s="";"protobuf"===e&&(s="centrifuge-protobuf"),this._transport=""!==s?new this.options.websocket(this.endpoint,s):new this.options.websocket(this.endpoint),"protobuf"===e&&(this._transport.binaryType="arraybuffer"),this._transport.onopen=()=>{t.onOpen()},this._transport.onerror=e=>{t.onError(e)},this._transport.onclose=e=>{t.onClose(e)},this._transport.onmessage=e=>{t.onMessage(e.data)}}close(){this._transport.close()}send(e){this._transport.send(e)}}class Ct{constructor(e,t){this.endpoint=e,this.options=t,this._abortController=null,this._utf8decoder=new TextDecoder,this._protocol="json"}name(){return"http_stream"}subName(){return"http_stream"}emulation(){return!0}_handleErrors(e){if(!e.ok)throw new Error(e.status);return e}_fetchEventTarget(e,t,s){const n=new EventTarget;return(0,e.options.fetch)(t,s).then(e._handleErrors).then((a=>{n.dispatchEvent(new Event("open"));let t="",r=0,o=new Uint8Array;const u=a.body.getReader();return new e.options.readableStream({start:l=>function c(){return u.read().then((({done:h,value:g})=>{if(h)return n.dispatchEvent(new Event("close")),void l.close();try{if("json"===e._protocol)for(t+=e._utf8decoder.decode(g);r<t.length;)if("\n"===t[r]){const e=t.substring(0,r);n.dispatchEvent(new MessageEvent("message",{data:e})),t=t.substring(r+1),r=0}else++r;else{const t=new Uint8Array(o.length+g.length);for(t.set(o),t.set(g,o.length),o=t;;){const t=e.options.decoder.decodeReply(o);if(!t.ok)break;{const e=o.slice(0,t.pos);n.dispatchEvent(new MessageEvent("message",{data:e})),o=o.slice(t.pos)}}}}catch(e){return n.dispatchEvent(new Event("error",{detail:e})),n.dispatchEvent(new Event("close")),void l.close()}c()})).catch((function(e){n.dispatchEvent(new Event("error",{detail:e})),n.dispatchEvent(new Event("close")),l.close()}))}()})})).catch((a=>{n.dispatchEvent(new Event("error",{detail:a})),n.dispatchEvent(new Event("close"))})),n}supported(){return null!==this.options.fetch&&null!==this.options.readableStream&&typeof TextDecoder<"u"&&typeof AbortController<"u"&&typeof EventTarget<"u"&&typeof Event<"u"&&typeof MessageEvent<"u"&&typeof Error<"u"}initialize(e,t,s){let n,i;this._protocol=e,this._abortController=new AbortController,"json"===e?(n={Accept:"application/json","Content-Type":"application/json"},i=s):(n={Accept:"application/octet-stream","Content-Type":"application/octet-stream"},i=s);const a={method:"POST",headers:n,body:i,mode:"cors",credentials:"same-origin",cache:"no-cache",signal:this._abortController.signal},r=this._fetchEventTarget(this,this.endpoint,a);r.addEventListener("open",(()=>{t.onOpen()})),r.addEventListener("error",(e=>{this._abortController.abort(),t.onError(e)})),r.addEventListener("close",(()=>{this._abortController.abort(),t.onClose({code:4,reason:"connection closed"})})),r.addEventListener("message",(e=>{t.onMessage(e.data)}))}close(){this._abortController.abort()}send(e,t,s){let n,i;const a={session:t,node:s,data:e};"json"===this._protocol?(n={"Content-Type":"application/json"},i=JSON.stringify(a)):(n={"Content-Type":"application/octet-stream"},i=this.options.encoder.encodeEmulationRequest(a));const r={method:"POST",headers:n,body:i,mode:"cors",credentials:"same-origin",cache:"no-cache"};(0,this.options.fetch)(this.options.emulationEndpoint,r)}}class yt{constructor(e,t){this.endpoint=e,this.options=t,this._protocol="json",this._transport=null,this._onClose=null}name(){return"sse"}subName(){return"sse"}emulation(){return!0}supported(){return null!==this.options.eventsource&&null!==this.options.fetch}initialize(e,t,s){let n;n=globalThis&&globalThis.document&&globalThis.document.baseURI?new URL(this.endpoint,globalThis.document.baseURI):new URL(this.endpoint),n.searchParams.append("cf_connect",s);const a=new this.options.eventsource(n.toString(),{});this._transport=a;a.onopen=function(){t.onOpen()},a.onerror=function(e){a.close(),t.onError(e),t.onClose({code:4,reason:"connection closed"})},a.onmessage=function(e){t.onMessage(e.data)},this._onClose=function(){t.onClose({code:4,reason:"connection closed"})}}close(){this._transport.close(),null!==this._onClose&&this._onClose()}send(e,t,s){const n={session:t,node:s,data:e},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),mode:"cors",credentials:"same-origin",cache:"no-cache"};(0,this.options.fetch)(this.options.emulationEndpoint,r)}}function wt(e,t,n,s){return new(n||(n=Promise))((function(i,a){function r(u){try{l(s.next(u))}catch(e){a(e)}}function o(u){try{l(s.throw(u))}catch(e){a(e)}}function l(u){u.done?i(u.value):function(i){return i instanceof n?i:new n((function(a){a(i)}))}(u.value).then(r,o)}l((s=s.apply(e,t||[])).next())}))}class kt{constructor(e,t){this.endpoint=e,this.options=t,this._transport=null,this._stream=null,this._writer=null,this._utf8decoder=new TextDecoder,this._protocol="json"}name(){return"webtransport"}subName(){return"webtransport"}emulation(){return!1}supported(){return void 0!==this.options.webtransport&&null!==this.options.webtransport}initialize(e,t){return wt(this,void 0,void 0,(function*(){let s;s=globalThis&&globalThis.document&&globalThis.document.baseURI?new URL(this.endpoint,globalThis.document.baseURI):new URL(this.endpoint),"protobuf"===e&&s.searchParams.append("cf_protocol","protobuf"),this._protocol=e;const n=new EventTarget;this._transport=new this.options.webtransport(s.toString()),this._transport.closed.then((()=>{t.onClose({code:4,reason:"connection closed"})})).catch((()=>{t.onClose({code:4,reason:"connection closed"})}));try{yield this._transport.ready}catch{return void this.close()}let i;try{i=yield this._transport.createBidirectionalStream()}catch{return void this.close()}this._stream=i,this._writer=this._stream.writable.getWriter(),n.addEventListener("close",(()=>{t.onClose({code:4,reason:"connection closed"})})),n.addEventListener("message",(a=>{t.onMessage(a.data)})),this._startReading(n),t.onOpen()}))}_startReading(e){return wt(this,void 0,void 0,(function*(){const t=this._stream.readable.getReader();let s="",n=0,i=new Uint8Array;try{for(;;){const{done:a,value:r}=yield t.read();if(r.length>0)if("json"===this._protocol)for(s+=this._utf8decoder.decode(r);n<s.length;)if("\n"===s[n]){const t=s.substring(0,n);e.dispatchEvent(new MessageEvent("message",{data:t})),s=s.substring(n+1),n=0}else++n;else{const t=new Uint8Array(i.length+r.length);for(t.set(i),t.set(r,i.length),i=t;;){const t=this.options.decoder.decodeReply(i);if(!t.ok)break;{const u=i.slice(0,t.pos);e.dispatchEvent(new MessageEvent("message",{data:u})),i=i.slice(t.pos)}}}if(a)break}}catch{e.dispatchEvent(new Event("close"))}}))}close(){return wt(this,void 0,void 0,(function*(){try{this._writer&&(yield this._writer.close()),this._transport.close()}catch{}}))}send(e){return wt(this,void 0,void 0,(function*(){let t;t="json"===this._protocol?(new TextEncoder).encode(e+"\n"):e;try{yield this._writer.write(t)}catch{this.close()}}))}}class St{name(){return"json"}encodeCommands(e){return e.map((e=>JSON.stringify(e))).join("\n")}decodeReplies(e){return e.trim().split("\n").map((e=>JSON.parse(e)))}}const Tt={token:"",getToken:null,data:null,getData:null,debug:!1,name:"js",version:"",fetch:null,readableStream:null,websocket:null,eventsource:null,sockjs:null,sockjsOptions:{},emulationEndpoint:"/emulation",minReconnectDelay:500,maxReconnectDelay:2e4,timeout:5e3,maxServerPingDelay:1e4,networkEventTarget:null};class xt extends Error{constructor(e){super(e),this.name=this.constructor.name}}class Mt extends _t{constructor(e,t){super(),this._reconnectTimeout=null,this._refreshTimeout=null,this._serverPingTimeout=null,this.state=ut.Disconnected,this._transportIsOpen=!1,this._endpoint=e,this._emulation=!1,this._transports=[],this._currentTransportIndex=0,this._triedAllTransports=!1,this._transportWasOpen=!1,this._transport=null,this._transportId=0,this._deviceWentOffline=!1,this._transportClosed=!0,this._codec=new St,this._reconnecting=!1,this._reconnectTimeout=null,this._reconnectAttempts=0,this._client=null,this._session="",this._node="",this._subs={},this._serverSubs={},this._commandId=0,this._commands=[],this._batching=!1,this._refreshRequired=!1,this._refreshTimeout=null,this._callbacks={},this._token="",this._data=null,this._dispatchPromise=Promise.resolve(),this._serverPing=0,this._serverPingTimeout=null,this._sendPong=!1,this._promises={},this._promiseId=0,this._debugEnabled=!1,this._networkEventsSet=!1,this._config=Object.assign(Object.assign({},Tt),t),this._configure(),this._debugEnabled?(this.on("state",(s=>{this._debug("client state",s.oldState,"->",s.newState)})),this.on("error",(s=>{this._debug("client error",s)}))):this.on("error",(function(){Function.prototype()}))}newSubscription(e,t){if(null!==this.getSubscription(e))throw new Error("Subscription to the channel "+e+" already exists");const s=new ft(this,e,t);return this._subs[e]=s,s}getSubscription(e){return this._getSub(e)}removeSubscription(e){!e||(e.state!==ht.Unsubscribed&&e.unsubscribe(),this._removeSubscription(e))}subscriptions(){return this._subs}ready(e){return this.state===ut.Disconnected?Promise.reject({code:it.clientDisconnected,message:"client disconnected"}):this.state===ut.Connected?Promise.resolve():new Promise(((t,s)=>{const n={resolve:t,reject:s};e&&(n.timeout=setTimeout((function(){s({code:it.timeout,message:"timeout"})}),e)),this._promises[this._nextPromiseId()]=n}))}connect(){this._isConnected()?this._debug("connect called when already connected"):this._isConnecting()?this._debug("connect called when already connecting"):(this._debug("connect called"),this._reconnectAttempts=0,this._startConnecting())}disconnect(){this._disconnect(lt.disconnectCalled,"disconnect called",!1)}setToken(e){this._token=e}send(e){const t={send:{data:e}},s=this;return this._methodCall().then((function(){return s._transportSendCommands([t])?Promise.resolve():Promise.reject(s._createErrorObject(it.transportWriteError,"transport write error"))}))}rpc(e,t){const s={rpc:{method:e,data:t}},n=this;return this._methodCall().then((function(){return n._callPromise(s,(function(i){return{data:i.rpc.data}}))}))}publish(e,t){const s={publish:{channel:e,data:t}},n=this;return this._methodCall().then((function(){return n._callPromise(s,(function(){return{}}))}))}history(e,t){const s={history:this._getHistoryRequest(e,t)},n=this;return this._methodCall().then((function(){return n._callPromise(s,(function(i){const a=i.history,t=[];if(a.publications)for(let r=0;r<a.publications.length;r++)t.push(n._getPublicationContext(e,a.publications[r]));return{publications:t,epoch:a.epoch||"",offset:a.offset||0}}))}))}presence(e){const t={presence:{channel:e}},s=this;return this._methodCall().then((function(){return s._callPromise(t,(function(e){const i=e.presence.presence;for(const a in i)if(i.hasOwnProperty(a)){const e=i[a].conn_info,t=i[a].chan_info;e&&(i[a].connInfo=e),t&&(i[a].chanInfo=t)}return{clients:i}}))}))}presenceStats(e){const t={presence_stats:{channel:e}},s=this;return this._methodCall().then((function(){return s._callPromise(t,(function(e){const i=e.presence_stats;return{numUsers:i.num_users,numClients:i.num_clients}}))}))}startBatching(){this._batching=!0}stopBatching(){const e=this;Promise.resolve().then((function(){Promise.resolve().then((function(){e._batching=!1,e._flush()}))}))}_debug(...e){!this._debugEnabled||function(e,t){if(globalThis.console){const n=globalThis.console[e];pt(n)&&n.apply(globalThis.console,t)}}("debug",e)}_formatOverride(){}_configure(){if(!("Promise"in globalThis))throw new Error("Promise polyfill required");if(!this._endpoint)throw new Error("endpoint configuration required");if(null!==this._config.token&&(this._token=this._config.token),null!==this._config.data&&(this._data=this._config.data),this._codec=new St,this._formatOverride(),(!0===this._config.debug||typeof localStorage<"u"&&localStorage.getItem("centrifuge.debug"))&&(this._debugEnabled=!0),this._debug("config",this._config),"string"!=typeof this._endpoint){if(!("object"==typeof this._endpoint&&this._endpoint instanceof Array))throw new Error("unsupported url configuration type: only string or array of objects are supported");this._transports=this._endpoint,this._emulation=!0;for(const e in this._transports)if(this._transports.hasOwnProperty(e)){const t=this._transports[e];if(!t.endpoint||!t.transport)throw new Error("malformed transport configuration");const s=t.transport;if(["websocket","http_stream","sse","sockjs","webtransport"].indexOf(s)<0)throw new Error("unsupported transport name: "+s)}}}_setState(e){if(this.state!==e){this._reconnecting=!1;const t=this.state;return this.state=e,this.emit("state",{newState:e,oldState:t}),!0}return!1}_isDisconnected(){return this.state===ut.Disconnected}_isConnecting(){return this.state===ut.Connecting}_isConnected(){return this.state===ut.Connected}_nextCommandId(){return++this._commandId}_setNetworkEvents(){if(this._networkEventsSet)return;let e=null;null!==this._config.networkEventTarget?e=this._config.networkEventTarget:typeof globalThis.addEventListener<"u"&&(e=globalThis),e&&(e.addEventListener("offline",(()=>{this._debug("offline event triggered"),(this.state===ut.Connected||this.state===ut.Connecting)&&(this._disconnect(ot.transportClosed,"transport closed",!0),this._deviceWentOffline=!0)})),e.addEventListener("online",(()=>{this._debug("online event triggered"),this.state===ut.Connecting&&(this._deviceWentOffline&&!this._transportClosed&&(this._deviceWentOffline=!1,this._transportClosed=!0),this._clearReconnectTimeout(),this._startReconnecting())})),this._networkEventsSet=!0)}_getReconnectDelay(){const e=mt(this._reconnectAttempts,this._config.minReconnectDelay,this._config.maxReconnectDelay);return this._reconnectAttempts+=1,e}_clearOutgoingRequests(){for(const e in this._callbacks)if(this._callbacks.hasOwnProperty(e)){const t=this._callbacks[e];clearTimeout(t.timeout);const s=t.errback;if(!s)continue;s({error:this._createErrorObject(it.connectionClosed,"connection closed")})}this._callbacks={}}_clearConnectedState(){this._client=null,this._clearServerPingTimeout(),this._clearRefreshTimeout();for(const e in this._subs){if(!this._subs.hasOwnProperty(e))continue;const t=this._subs[e];t.state===ht.Subscribed&&t._setSubscribing(ct.transportClosed,"transport closed")}for(const e in this._serverSubs)this._serverSubs.hasOwnProperty(e)&&this.emit("subscribing",{channel:e})}_handleWriteError(e){for(const t of e){const s=t.id;if(!(s in this._callbacks))continue;const e=this._callbacks[s];clearTimeout(this._callbacks[s].timeout),delete this._callbacks[s];(0,e.errback)({error:this._createErrorObject(it.transportWriteError,"transport write error")})}}_transportSendCommands(e){if(!e.length)return!0;if(!this._transport)return!1;try{this._transport.send(this._codec.encodeCommands(e),this._session,this._node)}catch(t){return this._debug("error writing commands",t),this._handleWriteError(e),!1}return!0}_initializeTransport(){let e;null!==this._config.websocket?e=this._config.websocket:"function"!=typeof globalThis.WebSocket&&"object"!=typeof globalThis.WebSocket||(e=globalThis.WebSocket);let t=null;null!==this._config.sockjs?t=this._config.sockjs:typeof globalThis.SockJS<"u"&&(t=globalThis.SockJS);let s=null;null!==this._config.eventsource?s=this._config.eventsource:typeof globalThis.EventSource<"u"&&(s=globalThis.EventSource);let n=null;null!==this._config.fetch?n=this._config.fetch:typeof globalThis.fetch<"u"&&(n=globalThis.fetch);let i=null;if(null!==this._config.readableStream?i=this._config.readableStream:typeof globalThis.ReadableStream<"u"&&(i=globalThis.ReadableStream),this._emulation){this._currentTransportIndex>=this._transports.length&&(this._triedAllTransports=!0,this._currentTransportIndex=0);let r=0;for(;;){if(r>=this._transports.length)throw new Error("no supported transport found");const g=this._transports[this._currentTransportIndex],o=g.transport,l=g.endpoint;if("websocket"===o){if(this._debug("trying websocket transport"),this._transport=new bt(l,{websocket:e}),!this._transport.supported()){this._debug("websocket transport not available"),this._currentTransportIndex++,r++;continue}}else if("webtransport"===o){if(this._debug("trying webtransport transport"),this._transport=new kt(l,{webtransport:globalThis.WebTransport,decoder:this._codec,encoder:this._codec}),!this._transport.supported()){this._debug("webtransport transport not available"),this._currentTransportIndex++,r++;continue}}else if("http_stream"===o){if(this._debug("trying http_stream transport"),this._transport=new Ct(l,{fetch:n,readableStream:i,emulationEndpoint:this._config.emulationEndpoint,decoder:this._codec,encoder:this._codec}),!this._transport.supported()){this._debug("http_stream transport not available"),this._currentTransportIndex++,r++;continue}}else if("sse"===o){if(this._debug("trying sse transport"),this._transport=new yt(l,{eventsource:s,fetch:n,emulationEndpoint:this._config.emulationEndpoint}),!this._transport.supported()){this._debug("sse transport not available"),this._currentTransportIndex++,r++;continue}}else{if("sockjs"!==o)throw new Error("unknown transport "+o);if(this._debug("trying sockjs"),this._transport=new vt(l,{sockjs:t,sockjsOptions:this._config.sockjsOptions}),!this._transport.supported()){this._debug("sockjs transport not available"),this._currentTransportIndex++,r++;continue}}break}}else{if(function(e,t){return 0===e.lastIndexOf(t,0)}(this._endpoint,"http"))throw new Error("Provide explicit transport endpoints configuration in case of using HTTP (i.e. using array of TransportEndpoint instead of a single string), or use ws(s):// scheme in an endpoint if you aimed using WebSocket transport");if(this._debug("client will use websocket"),this._transport=new bt(this._endpoint,{websocket:e}),!this._transport.supported())throw new Error("WebSocket not available")}const a=this,r=this._transport,o=this._nextTransportId();a._debug("id of transport",o);let l=!1;const u=[];if(this._transport.emulation()){const e=a._sendConnect(!0);u.push(e)}this._setNetworkEvents();const c=this._codec.encodeCommands(u);let h;this._transportClosed=!1,h=setTimeout((function(){r.close()}),this._config.timeout),this._transport.initialize(this._codec.name(),{onOpen:function(){if(h&&(clearTimeout(h),h=null),a._transportId!=o)return a._debug("open callback from non-actual transport"),void r.close();l=!0,a._debug(r.subName(),"transport open"),!r.emulation()&&(a._transportIsOpen=!0,a._transportWasOpen=!0,a.startBatching(),a._sendConnect(!1),a._sendSubscribeCommands(),a.stopBatching(),a.emit("__centrifuge_debug:connect_frame_sent",{}))},onError:function(e){a._transportId==o?a._debug("transport level error",e):a._debug("error callback from non-actual transport")},onClose:function(e){if(h&&(clearTimeout(h),h=null),a._transportId!=o)return void a._debug("close callback from non-actual transport");a._debug(r.subName(),"transport closed"),a._transportClosed=!0,a._transportIsOpen=!1;let g="connection closed",t=!0,n=0;if(e&&"code"in e&&e.code&&(n=e.code),e&&e.reason)try{const n=JSON.parse(e.reason);g=n.reason,t=n.reconnect}catch{g=e.reason,(n>=3500&&n<4e3||n>=4500&&n<5e3)&&(t=!1)}n<3e3?(1009===n?(n=lt.messageSizeLimit,g="message size limit exceeded",t=!1):(n=ot.transportClosed,g="transport closed"),a._emulation&&!a._transportWasOpen&&(a._currentTransportIndex++,a._currentTransportIndex>=a._transports.length&&(a._triedAllTransports=!0,a._currentTransportIndex=0))):a._transportWasOpen=!0,a._isConnecting()&&!l&&a.emit("error",{type:"transport",error:{code:it.transportClosed,message:"transport closed"},transport:r.name()}),a._reconnecting=!1,a._disconnect(n,g,t)},onMessage:function(e){a._dataReceived(e)}},c),a.emit("__centrifuge_debug:transport_initialized",{})}_sendConnect(e){const t=this._constructConnectCommand(),s=this;return this._call(t,e).then((e=>{const i=e.reply.connect;s._connectResponse(i),e.next&&e.next()}),(e=>{s._connectError(e.error),e.next&&e.next()})),t}_startReconnecting(){if(this._debug("start reconnecting"),!this._isConnecting())return void this._debug("stop reconnecting: client not in connecting state");if(this._reconnecting)return void this._debug("reconnect already in progress, return from reconnect routine");if(!1===this._transportClosed)return void this._debug("waiting for transport close");this._reconnecting=!0;const e=this,t=""===this._token;this._refreshRequired||t&&null!==this._config.getToken?this._getToken().then((function(t){if(e._isConnecting()){if(null==t||null==t)return void e._failUnauthorized();e._token=t,e._debug("connection token refreshed"),e._config.getData?e._config.getData().then((function(i){!e._isConnecting()||(e._data=i,e._initializeTransport())})):e._initializeTransport()}})).catch((function(t){if(!e._isConnecting())return;if(t instanceof xt)return void e._failUnauthorized();e.emit("error",{type:"connectToken",error:{code:it.clientConnectToken,message:void 0!==t?t.toString():""}});const i=e._getReconnectDelay();e._debug("error on connection token refresh, reconnect after "+i+" milliseconds",t),e._reconnecting=!1,e._reconnectTimeout=setTimeout((()=>{e._startReconnecting()}),i)})):this._config.getData?this._config.getData().then((function(t){!e._isConnecting()||(e._data=t,e._initializeTransport())})):this._initializeTransport()}_connectError(e){this.state===ut.Connecting&&(109===e.code&&(this._refreshRequired=!0),e.code<100||!0===e.temporary||109===e.code?(this.emit("error",{type:"connect",error:e}),this._debug("closing transport due to connect error"),this._disconnect(e.code,e.message,!0)):this._disconnect(e.code,e.message,!1))}_scheduleReconnect(){if(!this._isConnecting())return;let e=!1;this._emulation&&!this._transportWasOpen&&!this._triedAllTransports&&(e=!0);let t=this._getReconnectDelay();e&&(t=0),this._debug("reconnect after "+t+" milliseconds"),this._clearReconnectTimeout(),this._reconnectTimeout=setTimeout((()=>{this._startReconnecting()}),t)}_constructConnectCommand(){const e={};this._token&&(e.token=this._token),this._data&&(e.data=this._data),this._config.name&&(e.name=this._config.name),this._config.version&&(e.version=this._config.version);const t={};let s=!1;for(const e in this._serverSubs)if(this._serverSubs.hasOwnProperty(e)&&this._serverSubs[e].recoverable){s=!0;const i={recover:!0};this._serverSubs[e].offset&&(i.offset=this._serverSubs[e].offset),this._serverSubs[e].epoch&&(i.epoch=this._serverSubs[e].epoch),t[e]=i}return s&&(e.subs=t),{connect:e}}_getHistoryRequest(e,t){const s={channel:e};return void 0!==t&&(t.since&&(s.since={offset:t.since.offset},t.since.epoch&&(s.since.epoch=t.since.epoch)),void 0!==t.limit&&(s.limit=t.limit),!0===t.reverse&&(s.reverse=!0)),s}_methodCall(){return this._isConnected()?Promise.resolve():new Promise(((e,t)=>{const s=setTimeout((function(){t({code:it.timeout,message:"timeout"})}),this._config.timeout);this._promises[this._nextPromiseId()]={timeout:s,resolve:e,reject:t}}))}_callPromise(e,t){return new Promise(((s,n)=>{this._call(e,!1).then((i=>{s(t(i.reply)),i.next&&i.next()}),(i=>{n(i.error),i.next&&i.next()}))}))}_dataReceived(e){this._serverPing>0&&this._waitServerPing();const t=this._codec.decodeReplies(e);this._dispatchPromise=this._dispatchPromise.then((()=>{let s;this._dispatchPromise=new Promise((e=>{s=e})),this._dispatchSynchronized(t,s)}))}_dispatchSynchronized(e,t){let s=Promise.resolve();for(const t in e)e.hasOwnProperty(t)&&(s=s.then((()=>this._dispatchReply(e[t]))));s=s.then((()=>{t()}))}_dispatchReply(e){let t;const s=new Promise((i=>{t=i}));if(null==e)return this._debug("dispatch: got undefined or null reply"),t(),s;const n=e.id;return n&&n>0?this._handleReply(e,t):e.push?this._handlePush(e.push,t):this._handleServerPing(t),s}_call(e,t){return new Promise(((s,n)=>{e.id=this._nextCommandId(),this._registerCall(e.id,s,n),t||this._addCommand(e)}))}_startConnecting(){this._debug("start connecting"),this._setState(ut.Connecting)&&this.emit("connecting",{code:ot.connectCalled,reason:"connect called"}),this._client=null,this._startReconnecting()}_disconnect(e,t,s){if(this._isDisconnected())return;this._transportIsOpen=!1;const n=this.state;this._reconnecting=!1;const i={code:e,reason:t};let a=!1;if(s?a=this._setState(ut.Connecting):(a=this._setState(ut.Disconnected),this._rejectPromises({code:it.clientDisconnected,message:"disconnected"})),this._clearOutgoingRequests(),n===ut.Connecting&&this._clearReconnectTimeout(),n===ut.Connected&&this._clearConnectedState(),a&&(this._isConnecting()?this.emit("connecting",i):this.emit("disconnected",i)),this._transport){this._debug("closing existing transport");const e=this._transport;this._transport=null,e.close(),this._transportClosed=!0,this._nextTransportId()}else this._debug("no transport to close");this._scheduleReconnect()}_failUnauthorized(){this._disconnect(lt.unauthorized,"unauthorized",!1)}_getToken(){if(this._debug("get connection token"),!this._config.getToken)throw this.emit("error",{type:"configuration",error:{code:it.badConfiguration,message:"token expired but no getToken function set in the configuration"}}),new xt("");return this._config.getToken({})}_refresh(){const e=this._client,t=this;this._getToken().then((function(s){if(e!==t._client)return;if(!s)return void t._failUnauthorized();if(t._token=s,t._debug("connection token refreshed"),!t._isConnected())return;const n={refresh:{token:t._token}};t._call(n,!1).then((i=>{const a=i.reply.refresh;t._refreshResponse(a),i.next&&i.next()}),(i=>{t._refreshError(i.error),i.next&&i.next()}))})).catch((function(s){if(t._isConnected()){if(s instanceof xt)return void t._failUnauthorized();t.emit("error",{type:"refreshToken",error:{code:it.clientRefreshToken,message:void 0!==s?s.toString():""}}),t._refreshTimeout=setTimeout((()=>t._refresh()),t._getRefreshRetryDelay())}}))}_refreshError(e){e.code<100||!0===e.temporary?(this.emit("error",{type:"refresh",error:e}),this._refreshTimeout=setTimeout((()=>this._refresh()),this._getRefreshRetryDelay())):this._disconnect(e.code,e.message,!1)}_getRefreshRetryDelay(){return mt(0,5e3,1e4)}_refreshResponse(e){this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null),e.expires&&(this._client=e.client,this._refreshTimeout=setTimeout((()=>this._refresh()),gt(e.ttl)))}_removeSubscription(e){null!==e&&delete this._subs[e.channel]}_unsubscribe(e){if(!this._transportIsOpen)return;const s={unsubscribe:{channel:e.channel}},t=this;this._call(s,!1).then((i=>{i.next&&i.next()}),(i=>{i.next&&i.next(),t._disconnect(ot.unsubscribeError,"unsubscribe error",!0)}))}_getSub(e){return this._subs[e]||null}_isServerSub(e){return void 0!==this._serverSubs[e]}_sendSubscribeCommands(){const e=[];for(const t in this._subs){if(!this._subs.hasOwnProperty(t))continue;const s=this._subs[t];if(!0!==s._inflight&&s.state===ht.Subscribing){const t=s._subscribe();t&&e.push(t)}}return e}_connectResponse(e){if(this._transportIsOpen=!0,this._transportWasOpen=!0,this._reconnectAttempts=0,this._refreshRequired=!1,this._isConnected())return;this._client=e.client,this._setState(ut.Connected),this._refreshTimeout&&clearTimeout(this._refreshTimeout),e.expires&&(this._refreshTimeout=setTimeout((()=>this._refresh()),gt(e.ttl))),this._session=e.session,this._node=e.node,this.startBatching(),this._sendSubscribeCommands(),this.stopBatching();const t={client:e.client,transport:this._transport.subName()};e.data&&(t.data=e.data),this.emit("connected",t),this._resolvePromises(),this._processServerSubs(e.subs||{}),e.ping&&e.ping>0?(this._serverPing=1e3*e.ping,this._sendPong=!0===e.pong,this._waitServerPing()):this._serverPing=0}_processServerSubs(e){for(const t in e){if(!e.hasOwnProperty(t))continue;const s=e[t];this._serverSubs[t]={offset:s.offset,epoch:s.epoch,recoverable:s.recoverable||!1};const n=this._getSubscribeContext(t,s);this.emit("subscribed",n)}for(const t in e){if(!e.hasOwnProperty(t))continue;const s=e[t];if(s.recovered){const e=s.publications;if(e&&e.length>0)for(const i in e)e.hasOwnProperty(i)&&this._handlePublication(t,e[i])}}for(const t in this._serverSubs)!this._serverSubs.hasOwnProperty(t)||e[t]||(this.emit("unsubscribed",{channel:t}),delete this._serverSubs[t])}_clearRefreshTimeout(){null!==this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null)}_clearReconnectTimeout(){null!==this._reconnectTimeout&&(clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null)}_clearServerPingTimeout(){null!==this._serverPingTimeout&&(clearTimeout(this._serverPingTimeout),this._serverPingTimeout=null)}_waitServerPing(){0!==this._config.maxServerPingDelay&&(!this._isConnected()||(this._clearServerPingTimeout(),this._serverPingTimeout=setTimeout((()=>{!this._isConnected()||this._disconnect(ot.noPing,"no ping",!0)}),this._serverPing+this._config.maxServerPingDelay)))}_getSubscribeContext(e,t){const s={channel:e,positioned:!1,recoverable:!1,wasRecovering:!1,recovered:!1};t.recovered&&(s.recovered=!0),t.positioned&&(s.positioned=!0),t.recoverable&&(s.recoverable=!0),t.was_recovering&&(s.wasRecovering=!0);let n="";"epoch"in t&&(n=t.epoch);let i=0;return"offset"in t&&(i=t.offset),(s.positioned||s.recoverable)&&(s.streamPosition={offset:i,epoch:n}),t.data&&(s.data=t.data),s}_handleReply(e,t){const s=e.id;if(!(s in this._callbacks))return void t();const n=this._callbacks[s];if(clearTimeout(this._callbacks[s].timeout),delete this._callbacks[s],function(e){return"error"in e&&null!==e.error}(e)){const i=n.errback;if(!i)return void t();i({error:e.error,next:t})}else{const i=n.callback;if(!i)return;i({reply:e,next:t})}}_handleJoin(e,t){const s=this._getSub(e);if(s)s._handleJoin(t);else if(this._isServerSub(e)){const n={channel:e,info:this._getJoinLeaveContext(t.info)};this.emit("join",n)}}_handleLeave(e,t){const s=this._getSub(e);if(s)s._handleLeave(t);else if(this._isServerSub(e)){const n={channel:e,info:this._getJoinLeaveContext(t.info)};this.emit("leave",n)}}_handleUnsubscribe(e,t){const s=this._getSub(e);s?t.code<2500?s._setUnsubscribed(t.code,t.reason,!1):s._setSubscribing(t.code,t.reason):this._isServerSub(e)&&(delete this._serverSubs[e],this.emit("unsubscribed",{channel:e}))}_handleSubscribe(e,t){this._serverSubs[e]={offset:t.offset,epoch:t.epoch,recoverable:t.recoverable||!1},this.emit("subscribed",this._getSubscribeContext(e,t))}_handleDisconnect(e){const t=e.code;let s=!0;(t>=3500&&t<4e3||t>=4500&&t<5e3)&&(s=!1),this._disconnect(t,e.reason,s)}_getPublicationContext(e,t){const s={channel:e,data:t.data};return t.offset&&(s.offset=t.offset),t.info&&(s.info=this._getJoinLeaveContext(t.info)),t.tags&&(s.tags=t.tags),s}_getJoinLeaveContext(e){const t={client:e.client,user:e.user};return e.conn_info&&(t.connInfo=e.conn_info),e.chan_info&&(t.chanInfo=e.chan_info),t}_handlePublication(e,t){const s=this._getSub(e);if(s)s._handlePublication(t);else if(this._isServerSub(e)){const n=this._getPublicationContext(e,t);this.emit("publication",n),void 0!==t.offset&&(this._serverSubs[e].offset=t.offset)}}_handleMessage(e){this.emit("message",{data:e.data})}_handleServerPing(e){if(this._sendPong){const e={};this._transportSendCommands([e])}e()}_handlePush(e,t){const s=e.channel;e.pub?this._handlePublication(s,e.pub):e.message?this._handleMessage(e.message):e.join?this._handleJoin(s,e.join):e.leave?this._handleLeave(s,e.leave):e.unsubscribe?this._handleUnsubscribe(s,e.unsubscribe):e.subscribe?this._handleSubscribe(s,e.subscribe):e.disconnect&&this._handleDisconnect(e.disconnect),t()}_flush(){const e=this._commands.slice(0);this._commands=[],this._transportSendCommands(e)}_createErrorObject(e,t,s){const n={code:e,message:t};return s&&(n.temporary=!0),n}_registerCall(e,t,s){this._callbacks[e]={callback:t,errback:s,timeout:null},this._callbacks[e].timeout=setTimeout((()=>{delete this._callbacks[e],pt(s)&&s({error:this._createErrorObject(it.timeout,"timeout")})}),this._config.timeout)}_addCommand(e){this._batching?this._commands.push(e):this._transportSendCommands([e])}_nextPromiseId(){return++this._promiseId}_nextTransportId(){return++this._transportId}_resolvePromises(){for(const e in this._promises)!this._promises.hasOwnProperty(e)||(this._promises[e].timeout&&clearTimeout(this._promises[e].timeout),this._promises[e].resolve(),delete this._promises[e])}_rejectPromises(e){for(const t in this._promises)!this._promises.hasOwnProperty(t)||(this._promises[t].timeout&&clearTimeout(this._promises[t].timeout),this._promises[t].reject(e),delete this._promises[t])}}Mt.SubscriptionState=ht,Mt.State=ut,Mt.UnauthorizedError=xt;const Ot=Object(r.ref)(),jt=e=>{e?Ot.value("connected"):Ot.value("disconnected")},It=e=>{Ot.value("onOpenGallery",e)},Lt=e=>{Ot.value("metrics",e)},Et={400:"Bad Request",401:"Unauthorized",403:"Access Denied",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway"},Pt=({error:e})=>{if(!Ot.value)return;const{status:t}=e;return t?t>=400&&t<500?Ot.value("error",{type:Et[t],code:t}):Ot.value("error",{type:"Unknown",code:t}):Ot.value("error")},Rt=Object(r.reactive)({message:"",timeout:void 0,type:void 0}),Ft=Object(r.reactive)({message:"",timeout:void 0,type:void 0}),Dt=Object(r.computed)((()=>Rt.message)),At=Object(r.computed)((()=>Ft.message)),q=e=>{Rt.timeout&&(clearTimeout(Rt.timeout),Rt.timeout=void 0),Rt.message=e,Rt.type="error",Rt.timeout=setTimeout((()=>{Rt.message="",Rt.timeout=void 0}),3e3)},$t=({chatId:e,sender:t,offset:n,limit:s,signal:r})=>Ms({url:`chats/${e}/messages/?sender=${t}&limit=${s}&offset=${n}`,signal:r}),Wt=Object(r.ref)(0),Ut=e=>{Wt.value=e},Nt=()=>{Ut(Wt.value+1)},Bt=Object(r.ref)([]),zt=Object(r.ref)([]),Ht=async e=>{zt.value.push(e)},Vt=e=>{zt.value.splice(e,1)},Zt=Object(r.computed)((()=>[...Bt.value,...zt.value])),Jt=Object(r.ref)(),Gt=Object(r.computed)((()=>Jt.value||"")),qt=e=>{Jt.value=e},Yt=()=>{const e=Bt.value.find((({status:e,author:t})=>"sent"===e&&t.uuid!==Fs.value&&t.role!==Rs.value));e?setTimeout((()=>{qt(e.uuid)}),100):qt(void 0)},Kt=async()=>{var e;if(ms.value)try{await(({chatId:e,sender:t,lastMessageId:n})=>Os({url:`chats/${e}/mark-as-read/?sender=${t}&older_than=${n}`}))({chatId:ms.value.uuid,sender:Rs.value,lastMessageId:null==(e=ms.value.last_message)?void 0:e.uuid}),b.total_unread_messages_count=b.total_unread_messages_count-ms.value.unread_count,ms.value.unread_count=0,Bt.value.forEach((e=>{e.status="read"}))}catch(e){q((null==e?void 0:e.detail)||le.t("default_error")),Pt({error:e})}},Xt=Object(r.ref)(),Qt=Object(r.ref)(!1),es=async e=>{try{const{access_token:t}=await(({sso_access_token:e,role:t})=>Os({url:"auth/ws-subscription/",body:{access_token:e,role:t}}))({sso_access_token:e.sso_access_token,role:Rs.value});if(!t)throw{detail:le.t("error"),status:400};const n=Ue(t);if(!n||!n.channel)throw{detail:le.t("error"),status:400};const s=e.domain;return Xt.value&&ss(),await ts({domain:s,token:e.sso_access_token}),await ns({channel:n.channel,token:t}),Promise.resolve(Xt.value)}catch(e){return Xt.value&&ss(),Promise.reject(e)}},ts=async({domain:e,token:t})=>{if(!e)return Promise.reject({detail:le.t("error"),status:400});try{return Xt.value=new Mt(`wss://${e}/connection/websocket`,{token:t}),Xt.value.on("connected",(()=>{Qt.value=!0,jt(!0)})).on("disconnected",(()=>{Qt.value=!1,Xt.value=void 0,jt(!1)})).connect(),Promise.resolve(Xt.value)}catch(e){throw e}},ss=()=>{Xt.value?(Xt.value.disconnect(),Xt.value=void 0):(Qt.value=!1,jt(!1))},ns=({channel:e,token:t})=>{if(!Xt.value)return setTimeout((()=>ns({channel:e,token:t})),2500);try{const n=Xt.value.newSubscription(e,{token:t});return n.on("publication",rs).on("unsubscribed",ss).subscribe(),Promise.resolve(n)}catch(e){throw e}},rs=e=>{if(!e.data)return;const{chat:t,event:n,detail:s,message:o,author_role:i}=e.data;if("message_read"===n)return(({last_message:e,count:t,chatUuid:n})=>{var a;const s=b.chats.findIndex((({uuid:e})=>e===n)),r=b.chats[s];if(b.total_unread_messages_count=b.total_unread_messages_count>t?b.total_unread_messages_count-t:0,r.unread_count=r.unread_count>t?r.unread_count-t:0,(null==(a=r.last_message)?void 0:a.uuid)===e&&(r.last_message.status="read"),As(r.opponent_uuid),!ms.value||ms.value.uuid!==n)return;const i=Bt.value.findIndex((t=>t.uuid===e));i<0||(Bt.value.forEach(((e,t)=>{t>i||(e.status="read")})),ms.value.unread_count=b.chats[s].unread_count)})({last_message:e.data.last_message,count:e.data.count,chatUuid:t});const a=b.chats.findIndex((({uuid:e})=>e===t));if("is_typing"===n)return is(e.data,a);if("message_deleted"===n)return(e=>{const t=b.chats.findIndex((s=>{var t;return(null==(t=s.last_message)?void 0:t.uuid)===e}));t>=0&&(b.chats[t].last_message.is_removed=!0);const n=Bt.value.findIndex((s=>s.uuid===e));n<0||(Bt.value[n].body="",Bt.value[n].is_removed=!0)})(o);if("message_updated"===n&&s)return((e,t)=>{const n={body:t.body||"",is_edited:!0},s=b.chats.findIndex((i=>{var a;return(null==(a=i.last_message)?void 0:a.uuid)===e}));s>=0&&(b.chats=b.chats.map(((i,a)=>s!==a?i:{...i,last_message:{...i.last_message,...n}})));const r=Bt.value.findIndex((i=>i.uuid===e));r<0||(Bt.value=Bt.value.map(((i,a)=>a!==r?i:{...i,...n})))})(o,s);if("message_new"===n&&s){const e={...s,author:{uuid:null==s?void 0:s.author,role:i},uuid:o};return bs(a,e,t),ms.value&&t===ms.value.uuid?(async(e,t)=>{const n=zt.value.findIndex((({body:s,attachments:t,status:i})=>s.replace(/\s/g,"")===e.body.replace(/\s/g,"")&&t.length===e.attachments.length&&"is_sending"===i));if(n>=0&&(Fs.value===e.author.uuid||Rs.value===e.author.role))Vt(n),Bt.value.push(e);else if(ms.value&&ms.value.uuid===t&&Wt.value-Bt.value.length-zt.value.length<1){const s=as.value.scrollHeight-as.value.scrollTop-150<as.value.clientHeight;if(Bt.value.push(e),ys.value){Jt.value||(qt(e.uuid),Object(r.nextTick)((()=>{as.value.scrollTop+=75})));const t=Bt.value.find((i=>"sent"===i.status&&i.author.uuid!==Fs.value&&i.author.role!==Rs.value));t&&!Jt.value&&(qt(t.uuid),Object(r.nextTick)((()=>{as.value.scrollTop+=75})))}else ys.value||Object(r.nextTick)((()=>{s&&ws(1e3)}))}})({...e,is_edited:!1,is_removed:!1},t):void 0}},is=(e,t)=>{if(Fs.value===e.author)return;t>=0&&As(e.author);const n=b.is_typing.findIndex((({chat:t})=>t===e.chat));n>=0&&clearTimeout(b.is_typing[n].debouncer);const s=setTimeout((()=>{const t=b.is_typing.findIndex((({chat:i})=>i===e.chat));b.is_typing.splice(t,1)}),5e3);n>=0?b.is_typing[n].debouncer=s:b.is_typing.push({chat:e.chat,debouncer:s})},as=Object(r.ref)(),b=Object(r.reactive)({count:0,total_unread_messages_count:0,chats:[],is_typing:[]}),os=Object(r.computed)((()=>b.is_typing)),ls=Object(r.computed)((()=>b.total_unread_messages_count)),cs=Object(r.ref)(!1),us=Object(r.ref)(0),hs=Object(r.ref)(""),_s=async()=>{if(cs.value||b.count&&us.value>=b.count)return Promise.resolve(b.chats);try{if(cs.value=!0,Ts.value.isRetry&&await new Promise((e=>setTimeout(e,2500))),!Ts.value.base_url)return;const e=await(({userRole:e,offset:t,search:n})=>Ms({url:`chats/?sender=${e}&limit=15&offset=${t}&chat_contains=${n}`}))({offset:us.value,userRole:Rs.value,search:hs.value}),t=e.results.filter((e=>b.chats.findIndex((({uuid:s})=>s===e.uuid))<0));b.count=e.count,b.total_unread_messages_count=e.total_unread_messages_count,b.chats.push(...t),us.value=us.value+e.results.length,Ps(),Ft.message="",Ft.type=void 0}catch(e){(e=>{Ft.message=e,Ft.type="error"})(le.t("chat_list_error")),Qt.value&&ss(),Pt({error:e})}finally{cs.value=!1}},ds=()=>{b.count=0,b.chats=[],us.value=0,cs.value=!1},ps=Object(r.ref)(),ms=Object(r.computed)((()=>ps.value)),gs=e=>{(e=>{!e||Lt({element:"ms[messenger-chat-open]",event_type:"click",event_content:{chat_uuid:e.uuid,chat_title:e.title}})})(e),ps.value=e},fs=()=>{ps.value=void 0},vs=async e=>{try{const t=await(({sender:e,user:t})=>Os({url:`chats/?sender=${e}`,body:{participant_uuid:t.uuid,with_role:t.role}}))({user:e,sender:Rs.value});if(!t)return;const n=b.chats.findIndex((({uuid:s})=>s===t.uuid));if(n>=0){const[s]=b.chats.splice(n,1);b.chats.unshift(s)}else b.chats.unshift(t);return gs(b.chats[0]),Promise.resolve(t)}catch(e){return Promise.reject(e)}},bs=async(e,t,n)=>{if(e>=0){const s=b.chats[e];t.author.uuid!==Fs.value&&t.author.role!==Rs.value&&(s.online_status=!0,s.unread_count=s.unread_count+1,b.total_unread_messages_count=b.total_unread_messages_count+1),s.last_message=t,b.chats.splice(e,1),b.chats.splice(0,0,s)}else try{const s=await(({chatId:e,sender:t})=>Ms({url:`chats/${e}/?sender=${t}`}))({chatId:n,sender:Rs.value});b.chats.unshift(s),t.author.uuid!==Fs.value&&t.author.role!==Rs.value&&(b.total_unread_messages_count=b.total_unread_messages_count+1)}catch(e){Pt({error:e})}},Cs=()=>{hs.value="",ds(),Object(r.nextTick)(_s)};Object(r.watch)((()=>ls.value),(e=>{!Ot.value||Ot.value("onUnreadChange",e)}));const ys=Object(r.ref)(!1),ws=e=>{as.value.scrollTo({top:as.value.scrollTop+e,behavior:"smooth"})},ks=Object(r.ref)(),Ss=Object(r.reactive)({sso_access_token:"",role:"customer",language:"uk",domain:"",base_url:"",access_token:"",isRetry:!1}),Ts=Object(r.computed)((()=>({base_url:Ss.base_url,sso_access_token:Ss.sso_access_token,role:Ss.role,isRetry:Ss.isRetry}))),xs=Object(r.computed)((()=>Ss.base_url)),Ms=async({url:e,headers:t={},signal:n})=>{if(!xs.value||!Ts.value.sso_access_token)return Promise.reject({detail:le.t("error"),status:401});const s={method:"GET",headers:{"Content-type":"application/json","Accept-Language":Ss.language||"uk",...t},signal:n};Ss.sso_access_token&&(s.headers.Authorization=`Bearer ${Ss.sso_access_token}`);const r=await fetch(`${xs.value}/${e}`,s);if(!r.ok){const i=await r.json();throw i.status=r.status,i}return Promise.resolve(r.json())},Os=async({url:e,body:t={},headers:n={}})=>{if(!xs.value||!Ts.value.sso_access_token)return Promise.reject({detail:le.t("error"),status:401});const s={method:"POST",headers:{"Content-Type":"application/json","Accept-Language":Ss.language||"uk",...n},body:JSON.stringify(t)};Ss.sso_access_token&&(s.headers.Authorization=`Bearer ${Ss.sso_access_token}`);const r=await fetch(`${xs.value}/${e}`,s);if(!r.ok){const i=await r.json();throw i.status=r.status,i}return Promise.resolve(r.json())},js=async({url:e,body:t=new FormData,headers:n={}})=>{if(!xs.value||!Ts.value.sso_access_token)return Promise.reject({detail:le.t("error"),status:401});const s={method:"POST",headers:{"Accept-Language":Ss.language||"uk",...n}};t instanceof FormData&&(s.body=t),Ss.sso_access_token&&(s.headers.Authorization=`Bearer ${Ss.sso_access_token}`);const r=await fetch(`${xs.value}/${e}`,s);if(!r.ok){const i=await r.json();throw i.status=r.status,i}return Promise.resolve(r.json())},Is=async({url:e,body:t={},headers:n={}})=>{if(!xs.value||!Ts.value.sso_access_token)return Promise.reject({detail:le.t("error"),status:401});const s={method:"PUT",headers:{"Content-type":"application/json","Accept-Language":Ss.language||"uk",...n},body:JSON.stringify(t)};Ss.sso_access_token&&(s.headers.Authorization=`Bearer ${Ss.sso_access_token}`);const r=await fetch(`${xs.value}/${e}`,s);if(!r.ok){const i=await r.json();throw i.status=r.status,i}return Promise.resolve(r.json())},Ls=async({url:e,headers:t={}})=>{if(!xs.value||!Ts.value.sso_access_token)return Promise.reject({detail:le.t("error"),status:401});const n={method:"DELETE",headers:{"Content-type":"application/json","Accept-Language":Ss.language||"uk",...t}};Ss.sso_access_token&&(n.headers.Authorization=`Bearer ${Ss.sso_access_token}`);const s=await fetch(`${xs.value}/${e}`,n);if(!s.ok){const e=await s.json();throw e.status=s.status,e}return Promise.resolve(s)},Es=e=>(Ss.sso_access_token=e.sso_access_token,Ss.role=e.role,Ss.language=e.language,Ss.domain=e.domain,Ss.base_url=e.base_url,Ss.isRetry=e.isRetry,(e=>{le.locale=e})(e.language||"uk"),Promise.resolve(Ss)),Ps=()=>{Ss.isRetry=!1},Rs=Object(r.computed)((()=>Ts.value.role)),Fs=Object(r.computed)((()=>{if(!Ts.value.sso_access_token||!Rs.value)return"";try{const e=Ue(Ts.value.sso_access_token);if(!e)return"";const{user_uuid:t,user_seller_uuid:n}=e;return t||n?"seller"===Rs.value?null==n?void 0:n.replaceAll("-",""):null==t?void 0:t.replaceAll("-",""):""}catch{return""}})),Ds=({uuid:e,payload:t})=>{const n=b.chats.findIndex((s=>s.opponent_uuid===e));n>=0&&(b.chats[n].online_status=t.is_online),ms.value&&ms.value.opponent_uuid===e&&(ms.value.online_status=t.is_online)},As=async e=>{if(e!==Fs.value)try{const{is_online:t,last_login:n}=await Ms({url:`users/${e}/is-online/`});Ds({uuid:e,payload:{is_online:t,last_login:n}}),(e=>{Ot.value("online",e)})({uuid:e,payload:{is_online:t,last_login:n}})}catch{Ds({uuid:e,payload:{is_online:!1,last_login:""}})}},$s=({message:e})=>{var t,n;return Boolean((null==(t=null==e?void 0:e.author)?void 0:t.uuid)===Fs.value||(null==(n=null==e?void 0:e.author)?void 0:n.role)===Rs.value)},Ws=Object(r.ref)(),Us=async()=>{var e;if(null!=(e=ms.value)&&e.uuid&&!Ws.value)try{(({chatId:e,sender:t})=>{Os({url:`chats/${e}/events/typing/?sender=${t}`})})({chatId:ms.value.uuid,sender:Rs.value}),Ws.value=setTimeout((async()=>{Ws.value=void 0}),4e3)}catch(e){clearTimeout(Ws.value),Ws.value=void 0,Pt({error:e})}},Ns=Object(r.defineComponent)({__name:"AddNewChatModal",props:{visible:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const n=e,s=Object(r.inject)("i18n"),o=Object(r.reactive)({user_name_contains:"",users:[],chosen_user:void 0}),i=Object(r.ref)(),a=Object(r.ref)(!1),l=Object(r.ref)(!1),c=Object(r.ref)(),h=Object(r.computed)((()=>{var e;return Boolean(!(null!=(e=o.chosen_user)&&e.uuid)||l.value)})),_=()=>{o.user_name_contains="",o.users=[],o.chosen_user=void 0,c.value=void 0},g=()=>{l.value||(_(),t("close"))};return{__sfc:!0,i18n:s,props:n,emit:t,form:o,inputRef:i,isFetching:a,isSubmitting:l,fetchError:c,disableSubmit:h,onSearch:async()=>{try{a.value=!0;const{results:e}=await(({name:e,sender:t,limit:n})=>Ms({url:`users/?limit=${n}&offset=0&user_name_contains=${e}&sender=${t}`}))({name:o.user_name_contains,sender:Rs.value,limit:10});o.users=e}catch(e){Pt({error:e})}finally{a.value=!1,c.value=void 0}},onStopSearch:()=>{var e;o.users=[],o.user_name_contains="",null==(e=i.value)||e.blur()},onChooseUser:e=>{o.chosen_user=e,o.user_name_contains="",o.users=[]},resetForm:_,onClose:g,handleAddNewChat:async()=>{var e;if(o.chosen_user)try{c.value=void 0,l.value=!0,await vs({uuid:o.chosen_user.uuid,role:o.chosen_user.role}),l.value=!1,g()}catch(t){c.value=(null==(e=null==t?void 0:t.detail)?void 0:e.join(", "))||s.t("default_error"),l.value=!1,Pt({error:t})}},Avatar:ge,CommonButton:ve,CloseIcon:Te,LoadingIcon:Ce,SearchIcon:Pe}}});var Bs=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return s.props.visible?t("div",{staticClass:"new-chat-modal",on:{click:s.onClose}},[t("div",{staticClass:"new-chat-modal__content",on:{click:function(e){e.stopPropagation(),s.form.user_name_contains&&s.onStopSearch()}}},[t("div",{staticClass:"new-chat-modal__title"},[t("div",[e._v(e._s(s.i18n.t("add_chat")))]),t("button",{on:{click:s.onClose}},[t(s.CloseIcon)],1)]),t("div",{staticClass:"new-chat-modal__form"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.form.user_name_contains,expression:"form.user_name_contains"}],ref:"inputRef",attrs:{placeholder:"Search"},domProps:{value:s.form.user_name_contains},on:{input:[function(t){t.target.composing||e.$set(s.form,"user_name_contains",t.target.value)},s.onSearch],keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:s.onSearch.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:s.onStopSearch.apply(null,arguments)}],click:function(e){e.stopPropagation()}}}),t("button",{on:{click:function(e){return e.stopPropagation(),s.onSearch.apply(null,arguments)}}},[s.isFetching?t(s.LoadingIcon,{staticClass:"new-chat-modal__form__spinner-icon"}):t(s.SearchIcon,{staticClass:"new-chat-modal__form__search-icon"})],1),s.form.user_name_contains&&!s.isFetching?t("div",{staticClass:"new-chat-modal__form__dropdown"},[e._l(s.form.users,(function(n){return s.form.users.length?t("div",{key:n.uuid,staticClass:"new-chat-modal__form__dropdown__item",on:{click:function(i){return i.stopPropagation(),s.onChooseUser(n)}}},[e._v(" "+e._s(n.username)+" ")]):e._e()})),s.form.users.length?e._e():t("div",{staticClass:"new-chat-modal__form__dropdown__empty"},[e._v(" "+e._s(s.i18n.t("no_users_found"))+" ")])],2):e._e()]),s.form.chosen_user?t("div",{staticClass:"new-chat-modal__preview"},[t(s.Avatar,{attrs:{avatar:s.form.chosen_user.avatar||s.form.chosen_user.logo,gender:s.form.chosen_user.gender}}),e._v(" "+e._s(s.form.chosen_user.username)+" ")],1):e._e(),s.fetchError?t("div",{staticClass:"new-chat-modal__error"},[e._v(" "+e._s(s.fetchError)+" ")]):e._e(),t("div",{staticClass:"new-chat-modal__footer"},[t(s.CommonButton,{attrs:{type:"default",ghost:""},on:{click:s.onClose}},[e._v(" "+e._s(s.i18n.t("cancel"))+" ")]),t(s.CommonButton,{attrs:{type:"default",disabled:s.disableSubmit},on:{click:s.handleAddNewChat}},[e._v(" "+e._s(s.i18n.t("add"))+" "),s.isSubmitting?t(s.LoadingIcon):e._e()],1)],1)])]):e._e()};const zs=ue(Ns,Bs,[],!1,null,null,null,null).exports,dl=Object(r.defineComponent)({__name:"AttachmentsList",props:{attachments:null},emits:["remove"],setup:(e,{emit:t})=>({__sfc:!0,props:e,emit:t,getImagePreview:a=>a instanceof File?URL.createObjectURL(a):a.file,getFileFormatedSize:a=>a>=1048576?(a/1048576).toFixed(2)+" MB":a>=1024?(a/1024).toFixed(2)+" KB":a+" bytes",removeAttachment:a=>{t("remove",a)},DeleteIcon:xe,FileIcon:Ie})});const Hs=ue(dl,(function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{staticClass:"attachment-list-wrapper"},[t("div",{staticClass:"attachments-list"},e._l(s.props.attachments,(function(n,i){return t("div",{key:`attachment_${n.name}_${i}`},[t("div",{staticClass:"attachments-list__item"},[n.type.startsWith("image/")?t("img",{staticClass:"attachments-list__item__media",attrs:{src:s.getImagePreview(n)}}):t(s.FileIcon,{staticClass:"attachments-list__item__file"}),t("div",{staticClass:"attachments-list__item__info"},[t("div",{staticClass:"truncate"},[e._v(" "+e._s(n.name)+" ")]),n.size?t("div",[e._v(" "+e._s(s.getFileFormatedSize(n.size))+" ")]):e._e()]),t("div",{staticClass:"attachments-list__remove",on:{click:function(a){return s.removeAttachment(i)}}},[t(s.DeleteIcon,{staticClass:"attachments-list__remove-icon"})],1)],1)])})),0)])}),[],!1,null,null,null,null).exports,Vs=Object(r.defineComponent)({__name:"AttachmentsMessage",props:{message:null},emits:["openGallery"],setup(e,{emit:t}){const n=e,s=Object(r.ref)([]),o=()=>{s.value=[];const e=/(https?:\/\/[^\s]+)/g;let t,u=0;for(;null!==(t=e.exec(n.message.body));)t.index>u&&s.value.push({type:"text",content:n.message.body.substring(u,t.index)}),s.value.push({type:"url",content:t[0]}),u=e.lastIndex;u<n.message.body.length&&s.value.push({type:"text",content:n.message.body.substring(u)})};return Object(r.onMounted)(o),Object(r.watch)((()=>n.message.body),o),{__sfc:!0,props:n,emit:t,segments:s,extractSegments:o,getFileFormatedSize:e=>e>=1048576?(e/1048576).toFixed(2)+" MB":e>=1024?(e/1024).toFixed(2)+" KB":e+" bytes",createObjectURL:e=>URL.createObjectURL(e),handleOpenGallery:e=>{t("openGallery",{media:n.message.attachments.filter((u=>u.type.startsWith("image"))),index:e})},getTruncatedFilename:e=>{if(e.length<25)return e;const u=e.split(".").at(-1);return e.substring(0,15)+"..."+u},DownloadIcon:Me,AttachmentLoadingIcon:ye,AttachmentErrorIcon:we,FileIcon:Ie}}});const Zs=ue(Vs,(function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{staticClass:"attachment-message"},[t("div",{staticClass:"attachment-message__list"},e._l(s.props.message.attachments,(function(n,i){var a;return t("div",{key:`${n.name}_${i}_${null==(a=s.props.message)?void 0:a.uuid}`,staticClass:"attachment-message__default",class:{"attachment-message__default--file":!n.type.includes("image")}},["is_sending"===s.props.message.status||"not_sent"===s.props.message.status?[n.type.includes("image")?t("div",{staticClass:"attachment-message__media"},[t("img",{attrs:{src:s.createObjectURL(n)}}),t("div",{staticClass:"attachment-message__item__loading-icon"},["is_sending"===s.props.message.status?t(s.AttachmentLoadingIcon):t(s.AttachmentErrorIcon)],1)]):[t("div",{staticClass:"attachment-message__file"},["is_sending"===s.props.message.status?t(s.AttachmentLoadingIcon):t(s.AttachmentErrorIcon)],1),t("div",{staticClass:"attachment-message__default__info"},[t("div",[e._v(" "+e._s(s.getTruncatedFilename(n.name_original||n.name))+" ")]),n.size?t("div",[e._v(" "+e._s(s.getFileFormatedSize(n.size))+" ")]):e._e()])]]:[n.type.includes("image")?t("div",{staticClass:"attachment-message__media",on:{click:function(e){return s.handleOpenGallery(i)}}},[t("img",{attrs:{src:n.file}})]):[t("div",{staticClass:"attachment-message__file"},[t(s.FileIcon,{staticClass:"attachment-message__file__icon"}),t("a",{staticClass:"attachment-message__file__load",attrs:{href:n.file,target:"_blank",download:n.name_original||n.name}},[t(s.DownloadIcon)],1)],1),t("div",{staticClass:"attachment-message__default__info"},[t("div",[e._v(" "+e._s(s.getTruncatedFilename(n.name_original||n.name))+" ")]),n.size?t("div",{staticClass:"truncate"},[e._v(" "+e._s(s.getFileFormatedSize(n.size))+" ")]):e._e()])]]],2)})),0),t("div",{staticClass:"attachment-message__text"},e._l(s.segments,(function(n,i){return t("span",{key:i},["text"===n.type?[e._v(e._s(n.content))]:[t("a",{staticClass:"link-message",attrs:{href:n.content,target:"_blank"}},[e._v(" "+e._s(n.content)+" ")])]],2)})),0)])}),[],!1,null,null,null,null).exports,Js=Object(r.defineComponent)({__name:"IntersectionObserver",props:{root:null},emits:["intersect"],setup(e,{emit:t}){const n=e,s=Object(r.ref)();return Object(r.onMounted)((()=>{if("moderator"===Rs.value)return;const e=new IntersectionObserver((i=>{i.forEach((a=>{a.isIntersecting&&t("intersect")}))}),{root:n.root});e.observe(s.value),Object(r.onUnmounted)((()=>{e.disconnect()}))})),{__sfc:!0,props:n,emit:t,observerRoot:s}}});const Gs=ue(Js,(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:"observerRoot"},[e._t("default")],2)}),[],!1,null,null,null,null).exports,qs=new Intl.DateTimeFormat("uk-UA",{day:"numeric",month:"numeric",year:"numeric"}),Ys=new Intl.DateTimeFormat("uk-UA",{day:"numeric",month:"long"}),Ks=new Intl.DateTimeFormat("uk-UA",{hour:"numeric",minute:"numeric",hourCycle:"h23"}),Xs=new Intl.DateTimeFormat("uk-UA",{weekday:"short"}),Qs=e=>{const t=qs.formatToParts(new Date(e));return{day:t.find((({type:i})=>"day"===i)).value,month:t.find((({type:i})=>"month"===i)).value,year:t.find((({type:i})=>"year"===i)).value}},en=e=>qs.format(new Date(e)),tn=e=>Ks.format(new Date(e)),sn=e=>Xs.format(new Date(e)),nn=Object(r.defineComponent)({__name:"MessagesGroupDate",props:{message:null},setup(e){const t=e,n=Object(r.inject)("i18n");return{__sfc:!0,props:t,i18n:n,formatDate:e=>{const i=new Date(e),a=new Date;return i.getDate()===a.getDate()&&i.getMonth()===a.getMonth()&&i.getFullYear()===a.getFullYear()?n.t("today"):i.getDate()===a.getDate()-1&&i.getMonth()===a.getMonth()&&i.getFullYear()===a.getFullYear()?n.t("yesterday"):i.getFullYear()===a.getFullYear()?(e=>Ys.format(new Date(e)))(e):en(e)}}}});const rn=ue(nn,(function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",[e._v(" "+e._s(s.formatDate(s.props.message.created_at))+" ")])}),[],!1,null,null,null,null).exports;const an=ue({},(function(){return this._self._c,this._m(0)}),[function(){var e=this._self._c;return e("div",{staticClass:"messages-skeleton-wrapper"},[e("div",{staticClass:"messages-skeleton"},[e("div",{staticClass:"messages-skeleton__line animate-pulse"}),e("div",{staticClass:"messages-skeleton__line messages-skeleton__line--thin animate-pulse"}),e("div",{staticClass:"messages-skeleton__line messages-skeleton__line--time animate-pulse"})]),e("div",{staticClass:"messages-skeleton"},[e("div",{staticClass:"messages-skeleton__line messages-skeleton__line--thin animate-pulse"}),e("div",{staticClass:"messages-skeleton__line messages-skeleton__line--time animate-pulse"})]),e("div",{staticClass:"messages-skeleton"},[e("div",{staticClass:"messages-skeleton__line animate-pulse"}),e("div",{staticClass:"messages-skeleton__line animate-pulse"}),e("div",{staticClass:"messages-skeleton__line messages-skeleton__line--thin animate-pulse"}),e("div",{staticClass:"messages-skeleton__line messages-skeleton__line--time animate-pulse"})]),e("div",{staticClass:"messages-skeleton"},[e("div",{staticClass:"messages-skeleton__line animate-pulse"}),e("div",{staticClass:"messages-skeleton__line animate-pulse"}),e("div",{staticClass:"messages-skeleton__line animate-pulse"}),e("div",{staticClass:"messages-skeleton__line messages-skeleton__line--thin animate-pulse"}),e("div",{staticClass:"messages-skeleton__line messages-skeleton__line--time animate-pulse"})])])}],!1,null,null,null,null).exports,on=Object(r.defineComponent)({__name:"NotificationMessage",props:{message:null,checkIsCurrentUserMessage:null},setup(e){var i;const t=e;return{__sfc:!0,props:t,i18n:Object(r.inject)("i18n"),useWidgetStyle:Object(r.inject)("useWidgetStyle"),ownMessage:(null==(i=t.checkIsCurrentUserMessage)?void 0:i.call(t,{message:t.message}))||!1,getHourMinuteTime:tn}}});const ln=ue(on,(function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{staticClass:"chat__container__message notification-message",class:{"chat__container__message--own":s.ownMessage}},[t("div",{staticClass:"notification-message__item",class:{"notification-message__item--thin":s.useWidgetStyle}},[e._v(" "+e._s(s.props.message.body)+" ")]),t("div",{staticClass:"chat__container__message__status chat__container__message__status--notification",class:{"chat__container__message__status--own":s.ownMessage}},[e.message.is_edited?t("div",{staticClass:"chat__container__message__status__edited"},[e._v(" "+e._s(s.i18n.t("is_edited"))+" ")]):e._e(),e._v(" "+e._s(s.getHourMinuteTime(e.message.created_at))+" ")])])}),[],!1,null,null,null,null).exports,cn=Object(r.defineComponent)({__name:"PageSourceMessage",props:{message:null,useAsWrapper:{type:Boolean}},setup(e){const t=e,n=Object(r.inject)("useWidgetStyle"),s=Object(r.ref)(),{imageSrc:o,isImageFetching:i,fetchImage:a}=pe(),l=Object(r.computed)((()=>s.value&&ks.value?`${ks.value}/product/${s.value.slug}/${s.value.p_code}`:"")),c=e=>{a({filename:e,size:"100x100"})};return Object(r.onMounted)((()=>{const e=JSON.parse(t.message.body);s.value=e,!t.useAsWrapper&&Object(r.nextTick)((()=>c(e.image)))})),{__sfc:!0,props:t,useWidgetStyle:n,productDetails:s,imageSrc:o,isImageFetching:i,fetchImage:a,productLink:l,getImage:c,i18n:le}}});const un=ue(cn,(function(){var e,t=this,n=t._self._c,s=t._self._setupProxy;return s.productDetails?n("div",{staticClass:"page-source-message",class:{"page-source-message--widget":s.useWidgetStyle}},[n("div",{staticClass:"page-source-message__divider",class:{"page-source-message__divider--active":!s.useWidgetStyle}}),n("div",{staticClass:"page-source-message__item",class:{"page-source-message__item--thin":s.useWidgetStyle}},[t._t("image",(function(){return[!s.isImageFetching&&s.imageSrc?n("div",{staticClass:"page-source-message__item__image"},[n("img",{attrs:{src:s.imageSrc}})]):t._e()]})),n("div",{staticClass:"page-source-message__item__title"},[n("div",[n("span",[t._v(t._s(s.i18n.t("chat_opened_from"))+":")]),t._t("productLink",(function(){return[s.productLink?n("a",{attrs:{href:s.productLink,target:"_blank"}},[t._v(" "+t._s(s.productDetails.p_code)+" ")]):n("span",[t._v(" "+t._s(s.productDetails.p_code))])]}))],2),n("div",{staticClass:"page-source-message__item__name"},[t._v(" "+t._s(null==(e=s.productDetails)?void 0:e.name)+" ")])])],2),n("div",{staticClass:"page-source-message__divider",class:{"page-source-message__divider--active":!s.useWidgetStyle}})]):t._e()}),[],!1,null,null,null,null).exports,hn=Object(r.ref)(),_n=Object(r.ref)(),dn=e=>{_n.value=e},pn=Object(r.ref)(),mn=e=>{pn.value=e},gn=()=>{_n.value=void 0,hn.value=void 0},fn=async()=>{if(ms.value)try{await(({chatId:e,messageId:t,sender:n})=>Ls({url:`chats/${e}/messages/${t}/?sender=${n}`}))({chatId:ms.value.uuid,messageId:_n.value.uuid,sender:Rs.value})}catch(e){q(le.t("delete_message_error")),Pt({error:e})}finally{_n.value=void 0}},vn=Object(r.defineComponent)({__name:"SimpleMessage",props:{message:null,index:null,useAsWrapper:{type:Boolean},checkIsCurrentUserMessage:null},emits:["editMessage","resendMessage","openGallery"],setup(e,{emit:t}){const n=e,s=Object(r.inject)("i18n"),o=Object(r.inject)("useWidgetStyle"),i=Object(r.ref)(),a=Object(r.ref)(),l=Object(r.ref)(),u=(e,t)=>{var o;if(!(n.useAsWrapper||"is_sending"===e.status||e.author.uuid!==Fs.value&&e.author.role!==Rs.value)&&(null==(o=as.value)?void 0:o.getBoundingClientRect())){if("not_sent"===e.status)return(e=>{hn.value=e})({index:t,...e}),void Object(r.nextTick)((()=>{c(a)}));dn(e),Object(r.nextTick)((()=>{c(i)}))}},c=e=>{var t,n;if(!e.value)return;const r=null==(t=e.value)?void 0:t.getBoundingClientRect(),o=null==(n=as.value)?void 0:n.getBoundingClientRect();!r||!o||o.top>r.top+8&&as.value.scrollTo({top:as.value.scrollTop-(o.top-r.top)-16,behavior:"smooth"})};return{__sfc:!0,props:n,emit:t,i18n:s,useWidgetStyle:o,contextMenuRef:i,sendingContextMenuRef:a,keyboardDebounce:l,onTouchMessage:(e,t)=>{n.useAsWrapper||(l.value=setTimeout((async()=>{u(e,t),clearTimeout(l.value),l.value=void 0}),300))},onTouchMessageEnd:()=>{n.useAsWrapper||(clearTimeout(l.value),l.value=void 0)},openContextMenu:u,scrollToContextMenu:c,handleOpenGallery:e=>t("openGallery",e),handleEditMessage:()=>t("editMessage"),handleResendMessage:()=>t("resendMessage"),handleCancelSendingMessage:()=>{const{index:e}=hn.value;Vt(e-Bt.value.length),gn()},getHourMinuteTime:tn,AttachmentsMessage:Zs,ErrorIcon:je,ReloadIcon:Ee,DeleteIcon:xe,EditIcon:Oe,LoadingIcon:Ce,ReadIcon:Le,SentIcon:Fe,handleDeleteMessage:fn,messageSelected:_n,sendingMessageSelected:hn}}});var bn=function(){var e,i,a,t,n,r,u,o,l=this,c=l._self._c,s=l._self._setupProxy;return c("div",{staticClass:"chat__container__message",class:{"chat__container__message--own":null==(e=l.checkIsCurrentUserMessage)?void 0:e.call(l,{message:l.message}),"chat__container__message--active":s.messageSelected&&s.messageSelected.uuid===l.message.uuid||s.sendingMessageSelected&&s.sendingMessageSelected.index===l.index,"chat__container__message--error":"not_sent"===l.message.status},on:{touchstart:function(e){return s.onTouchMessage(s.props.message,s.props.index)},contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),s.openContextMenu(l.message,s.props.index)},touchend:s.onTouchMessageEnd,touchmove:s.onTouchMessageEnd,touchcancel:s.onTouchMessageEnd}},[c(s.AttachmentsMessage,{attrs:{message:l.message},on:{openGallery:s.handleOpenGallery}}),l.useAsWrapper||"is_sending"===(null==(i=s.props.message)?void 0:i.status)?l._e():c("div",{directives:[{name:"show",rawName:"v-show",value:!s.useWidgetStyle&&(null==(a=l.checkIsCurrentUserMessage)?void 0:a.call(l,{message:l.message}))&&!s.messageSelected&&!s.sendingMessageSelected,expression:"\n      !useWidgetStyle &&\n      checkIsCurrentUserMessage?.({ message }) &&\n      !messageSelected &&\n      !sendingMessageSelected\n    "}],staticClass:"chat__container__message__context-button",on:{click:function(e){return e.stopPropagation(),s.openContextMenu(s.props.message,s.props.index)}}},[l._v(" ... ")]),c("div",{staticClass:"chat__container__message__status",class:{"chat__container__message__status--own":null==(t=l.checkIsCurrentUserMessage)?void 0:t.call(l,{message:l.message})}},[l.message.is_edited?c("div",{staticClass:"chat__container__message__status__edited"},[l._v(" "+l._s(s.i18n.t("is_edited"))+" ")]):l._e(),l._t("editedMenu"),c("div",[l._v(" "+l._s(s.getHourMinuteTime(l.message.created_at))+" ")]),l._t("status",(function(){var e;return[(null==(e=l.checkIsCurrentUserMessage)?void 0:e.call(l,{message:l.message}))||l.useAsWrapper?c("div",{staticClass:"chat__container__message__status__icon"},["read"===l.message.status?c(s.ReadIcon):"sent"===l.message.status?c(s.SentIcon):"is_sending"===l.message.status?c(s.LoadingIcon):"not_sent"===l.message.status?c(s.ErrorIcon,{staticClass:"error-text"}):l._e()],1):l._e()]}))],2),s.messageSelected&&s.messageSelected.uuid===l.message.uuid?c("div",{ref:"contextMenuRef",staticClass:"chat__container__context-menu",class:{"chat__container__context-menu--widget":s.useWidgetStyle}},[null!=(r=null==(n=s.messageSelected)?void 0:n.attachments)&&r.length?l._e():c("div",{staticClass:"chat__container__context-menu__item",on:{click:function(e){return e.stopPropagation(),s.handleEditMessage.apply(null,arguments)}}},[l._v(" "+l._s(s.i18n.t("edit"))+" "),c(s.EditIcon,{staticClass:"chat__container__context-menu__icon"})],1),c("div",{staticClass:"chat__container__context-menu__item chat__container__context-menu__item--error",on:{click:function(e){return e.stopPropagation(),s.handleDeleteMessage.apply(null,arguments)}}},[l._v(" "+l._s(s.i18n.t("delete"))+" "),c(s.DeleteIcon,{staticClass:"chat__container__context-menu__icon"})],1)]):l._e(),s.sendingMessageSelected&&s.sendingMessageSelected.index===l.index?c("div",{ref:"sendingContextMenuRef",staticClass:"chat__container__context-menu",class:{"chat__container__context-menu--widget":s.useWidgetStyle}},[null!=(o=null==(u=s.messageSelected)?void 0:u.attachments)&&o.length?l._e():c("div",{staticClass:"chat__container__context-menu__item",on:{click:function(e){return e.stopPropagation(),s.handleResendMessage.apply(null,arguments)}}},[l._v(" "+l._s(s.i18n.t("resend_message"))+" "),c(s.ReloadIcon,{staticClass:"chat__container__context-menu__icon"})],1),c("div",{staticClass:"chat__container__context-menu__item chat__container__context-menu__item--error",on:{click:function(e){return e.stopPropagation(),s.handleCancelSendingMessage.apply(null,arguments)}}},[l._v(" "+l._s(s.i18n.t("cancel_sending"))+" "),c(s.ErrorIcon,{staticClass:"chat__container__context-menu__icon"})],1)]):l._e()],1)};const Cn=ue(vn,bn,[],!1,null,null,null,null).exports;var yn=[function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"typing-status__dots"},[t("div",{staticClass:"animate-pulse"},[e._v(".")]),t("div",{staticClass:"animate-pulse animate-delay-500"},[e._v(".")]),t("div",{staticClass:"animate-pulse animate-delay-1000"},[e._v(".")])])}];const wn=ue(Object(r.defineComponent)({__name:"TypingStatus",setup:e=>({__sfc:!0,i18n:le})}),(function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{staticClass:"typing-status"},[e._v(" "+e._s(s.i18n.t("is_typing"))+" "),e._m(0)])}),yn,!1,null,null,null,null).exports,kn=["image/jpeg","image/png","image/gif","audio/mpeg","video/mp4","video/quicktime","video/3gpp","video/x-msvideo","video/mpeg","application/pdf","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/excel","application/vnd.ms-excel","application/x-excel","application/x-msexcel","application/msword","text/csv","application/zip"],Sn=Object(r.ref)(new AbortController),Tn=()=>{!Sn.value||(Sn.value.abort(),Sn.value=new AbortController)},xn=Object(r.ref)(0),Mn=e=>{xn.value=e||0},On=()=>{Mn(xn.value+1)},jn=Object(r.shallowRef)(!1),In=Object(r.shallowRef)(!1),Ln=Object(r.ref)(0),En=e=>{Ln.value=e||0},Pn=()=>{const e=as.value.scrollHeight-Ln.value;as.value.style.overflowY="hidden",as.value.scrollTop=e,En(e),as.value.style.overflowY="auto"},Rn=async()=>{var e;if(null!=(e=ms.value)&&e.uuid&&!jn.value&&!In.value&&!(xn.value&&xn.value<=Wt.value))try{Tn(),jn.value=!0;const e=await $t({chatId:ms.value.uuid,sender:Rs.value,limit:30,offset:Wt.value,signal:Sn.value.signal});Mn(e.count),Ut(Wt.value+e.results.length),En(as.value.scrollHeight-as.value.scrollTop),(e=>{const t=e.filter((e=>Bt.value.findIndex((s=>s.uuid===e.uuid))<0));Bt.value.length?Bt.value.unshift(...t.reverse()):Bt.value=t.reverse()})(e.results),jn.value=!1,Object(r.nextTick)((()=>{Bt.value.length<=30&&(Yt(),Fn())})),Object(r.nextTick)(Pn)}catch(e){if("AbortError"===e.name)return;jn.value=!1,q(le.t("get_messages_error")),Pt({error:e})}},Fn=async()=>{var e,t;if(null!=(e=ms.value)&&e.uuid&&!jn.value&&!In.value&&!(Wt.value-(null==(t=Zt.value)?void 0:t.length)<=0))try{Tn(),In.value=!0;let e=30,s=Wt.value-Bt.value.length-e;if(s<0&&(s=0),0===s){const i=Wt.value-Bt.value.length;e=i>30?30:i}const t=await $t({chatId:ms.value.uuid,sender:Rs.value,limit:e,offset:s,signal:Sn.value.signal});(e=>{const t=e.filter((e=>Bt.value.findIndex((s=>s.uuid===e.uuid))<0));Bt.value.length?Bt.value.push(...t.reverse()):Bt.value=t.reverse()})(t.results),Mn(t.count),In.value=!1,Bt.value.length<=30&&Yt()}catch(e){if("AbortError"===e.name)return;jn.value=!1,q(le.t("get_messages_error")),Pt({error:e})}},Dn=()=>{var e,t;Tn(),ms.value?(As(null==(e=ms.value)?void 0:e.opponent_uuid),Ut(null!=(t=ms.value)&&t.unread_count?ms.value.unread_count-1:0)):Ut(0),qt(void 0),En(0),Mn(0),jn.value=!1,In.value=!1,dn(),gn(),Bt.value=[],zt.value=[],Object(r.nextTick)(Rn)},An=Object(r.defineComponent)({__name:"ChatFooter",setup(e,{expose:t}){const n=Object(r.ref)(),s=Object(r.ref)(),o=Object(r.reactive)({message:"",attachments:[]}),i=Object(r.computed)((()=>o.attachments)),a=()=>{o.message="",o.attachments=[]},l=e=>{o.attachments.push(e)},c=()=>o.attachments.length,u=Object(r.computed)((()=>kn.join(", "))),h=e=>{const t=e.clipboardData;if(!t||!t.items||!t.items.length)return;const{items:n}=e.clipboardData;for(let e=0;e<n.length;e++){const t=n[e];if(u.value.includes(t.type)){const e=t.getAsFile();if(!e)return;if(o.attachments.length>=6)return q(le.t("max_file_count"));if(e.size>1e8)return q(le.t("file_too_large"));l(e)}else"file"===t.kind&&q(le.t("unsupported_format"))}},_=async e=>{if(e&&(e.shiftKey||e.ctrlKey)||!o.message&&!o.attachments.length||!ms.value||!ms.value.uuid||cs.value&&!Bt.value.length)return;(e=>{Lt({element:"ms[messenger-message-sent]",event_type:"submit",event_content:{chat_uuid:e.uuid,chat_title:e.title}})})(ms.value);const t={message:o.message.trim(),attachments:[...o.attachments]},n={status:"is_sending",created_at:(new Date).toUTCString(),author:{is_online:!0,is_active:!0,role:Rs.value,uuid:Fs.value}};a();const r=Wt.value-Bt.value.length-zt.value.length<=1;On(),Nt(),ms.value.unread_count&&Kt();const l=t.attachments.filter((e=>e.type.startsWith("image"))),c=t.attachments.filter((e=>!e.type.startsWith("image")));if(r&&(l.length&&c.length?(On(),Nt(),Ht({type:"WITH_ATTACHMENTS",body:"",attachments:c,...n}),Ht({type:"WITH_ATTACHMENTS",body:t.message,attachments:l,...n,created_at:(new Date).toUTCString()})):c.length?Ht({type:"WITH_ATTACHMENTS",body:t.message,attachments:c,...n}):l.length?Ht({type:"WITH_ATTACHMENTS",body:t.message,attachments:l,...n}):Ht({type:"SIMPLE",body:t.message,attachments:[],...n})),setTimeout((()=>{as.value.scrollTop=as.value.scrollHeight}),100),!l.length&&!c.length)return d(t.message);const h=new FormData,_=new FormData;l.forEach((e=>h.append("attachments",e))),c.forEach((e=>_.append("attachments",e)));const m=t.message||"";_.append("body",c.length&&!l.length?m:""),h.append("body",m),c.length&&await g({attachments:c,formData:_}),l.length&&await g({attachments:l,formData:h,isMediaAttachments:!0,newMessage:t.message})},d=async e=>{var t;if(null!=(t=ms.value)&&t.uuid)try{await(({chatId:e,sender:t,message:n})=>Os({url:`chats/${e}/messages/?sender=${t}`,body:{body:n,type:"SIMPLE"}}))({chatId:ms.value.uuid,message:e,sender:Rs.value})}catch(t){m(t,e)}},g=async({attachments:e,formData:t,isMediaAttachments:n=!1,newMessage:r=""})=>{try{await(({chatId:e,sender:t,formData:n})=>js({url:`chats/${e}/attachments/?sender=${t}`,body:n}))({chatId:ms.value.uuid,sender:Rs.value,formData:t})}catch(t){m(t,n?r:"",e)}},m=(e,t,n)=>{Mn(xn.value-1),Ut(Wt.value-1),(e=>{const t=zt.value.find((t=>t.body.replace(/\s/g,"")===e.message.replace(/\s/g,"")&&"is_sending"===t.status&&t.attachments.every(((s,t)=>s.name===e.attachments[t].name))));t?t.status="not_sent":zt.value[zt.value.length-1].status="not_sent"})({message:t||"",attachments:n||[]}),q(le.t("send_message_error")),Pt({error:e})},f=()=>{var e;(null==(e=ms.value)?void 0:e.unread_count)||!s.value||s.value.focus()},v=()=>{o.message="",mn()},C=()=>{o.message=_n.value.body,o.attachments=[],mn(_n.value),f()},y=()=>{const{index:e,...t}=hn.value;o.message=t.body,o.attachments=t.attachments,Vt(e-Bt.value.length),_()},w=()=>{const e=s.value;!e||Object(r.nextTick)((()=>{e.scrollHeight<=252?(e.style.height="auto",e.style.overflowY="hidden",e.style.height=`${e.scrollHeight}px`):e.style.height="252px",e.style.overflowY="auto"}))};return Object(r.watch)((()=>o.message),w),Object(r.watch)((()=>{var e;return null==(e=ms.value)?void 0:e.uuid}),a),t({handleAddAttachment:l,getAttachmentLength:c,handlePaste:h,handleEditMessage:C,handleResendMessage:y}),{__sfc:!0,attachInputRef:n,newMessageInputRef:s,newMessageForm:o,attachmentsList:i,resetNewMessageForm:a,handleAddAttachment:l,getAttachmentLength:c,handleCtrlEnter:e=>{const t=e.target,{selectionStart:n,selectionEnd:l,value:c}=t,h=c.slice(0,n)+"\n"+c.slice(l);t.value=h,o.message=h,e.preventDefault(),Object(r.nextTick)((()=>{t.selectionStart=t.selectionEnd=n+1}))},acceptedAttachments:u,handlePaste:h,handleSendNewMessage:_,handleSendSimpleMessage:d,handleSendAttachments:g,handleMessageError:m,onAttachmentClick:()=>{n.value.click()},focusOnMessageInput:f,onAddAttachment:e=>{let{files:t}=e.target;if(t){if(t.length>6)return q(le.t("max_file_count"));for(let e=0;e<t.length;++e){if(t[e].size>1e8)return q(le.t("file_too_large"));l(t[e])}n.value.value=""}},handleRemoveAttachment:e=>{o.attachments.splice(e,1)},confirmEditedMessage:async e=>{if(ms.value&&o.message&&(!e||!e.shiftKey&&!e.ctrlKey))try{await(({chatId:e,messageId:t,sender:n,message:s})=>Is({url:`chats/${e}/messages/${t}/?sender=${n}`,body:{body:s,type:"SIMPLE"}}))({chatId:ms.value.uuid,messageId:pn.value.uuid,sender:Rs.value,message:o.message}),v()}catch(e){q(le.t("edit_message_error")),Pt({error:e})}},cancelEditingMessage:v,handleEditMessage:C,handleResendMessage:y,resizeTextarea:w,i18n:le,AttachIcon:ke,SendIcon:Re,SentIcon:Fe,CloseIcon:Te,AttachmentsList:Hs,onUserInput:Us,editedMessage:pn}}});var $n=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{staticClass:"chat__footer"},[s.editedMessage?t("div",{staticClass:"chat__footer__edited-message"},[t("span",{staticClass:"truncate"},[e._v(" "+e._s(s.editedMessage.body)+" ")]),t("button",{on:{click:s.cancelEditingMessage}},[t(s.CloseIcon)],1)]):e._e(),s.newMessageForm.attachments.length?t("div",{staticClass:"chat__footer__attachments"},[t(s.AttachmentsList,{attrs:{attachments:s.attachmentsList},on:{remove:s.handleRemoveAttachment}})],1):e._e(),t("div",{staticClass:"chat__footer__new-message"},[s.editedMessage?e._e():t("button",{staticClass:"chat__footer__new-message__attach",class:{"chat__footer__new-message__attach--hidden":s.newMessageForm.attachments.length>5},on:{click:function(e){return s.onAttachmentClick()}}},[t(s.AttachIcon)],1),t("input",{ref:"attachInputRef",staticStyle:{display:"none"},attrs:{type:"file",accept:s.acceptedAttachments},on:{change:s.onAddAttachment}}),t("textarea",{directives:[{name:"model",rawName:"v-model",value:s.newMessageForm.message,expression:"newMessageForm.message"}],ref:"newMessageInputRef",staticClass:"chat__footer__new-message__input",attrs:{placeholder:`${s.i18n.t("input_message")}`,rows:"1",maxlength:"2200"},domProps:{value:s.newMessageForm.message},on:{input:[function(t){t.target.composing||e.$set(s.newMessageForm,"message",t.target.value)},s.onUserInput],keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;s.editedMessage?s.confirmEditedMessage(t):s.handleSendNewMessage(t)},keydown:[function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)return null;t.preventDefault()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||!t.ctrlKey?null:s.handleCtrlEnter.apply(null,arguments)}]}}),s.editedMessage?t("button",{staticClass:"chat__footer__new-message__send",class:{"chat__footer__new-message__send--hidden":!s.newMessageForm.message&&!s.newMessageForm.attachments.length},on:{click:function(e){return s.confirmEditedMessage()}}},[t(s.SentIcon)],1):t("button",{staticClass:"chat__footer__new-message__send",class:{"chat__footer__new-message__send--hidden":!s.newMessageForm.message&&!s.newMessageForm.attachments.length},on:{click:function(e){return s.handleSendNewMessage()}}},[t(s.SendIcon)],1)])])};const Wn=ue(An,$n,[],!1,null,null,null,null).exports,Un=Object(r.defineComponent)({__name:"ChatThumbnail",props:{chat:null},setup(e){const t=e,n=Object(r.inject)("i18n"),s=Object(r.inject)("useWidgetStyle"),o=Object(r.computed)((()=>{var e;return Boolean(null==(e=os.value)?void 0:e.some((({chat:e})=>{var n;return e===(null==(n=t.chat)?void 0:n.uuid)})))})),i=Object(r.computed)((()=>{var e,n;if(!t.chat||"seller"===Rs.value)return!1;if(Fs.value!==t.chat.owner.uuid&&Rs.value!==t.chat.owner.role)return"seller"===t.chat.owner.role;const r=null==(n=null==(e=t.chat)?void 0:e.participants)?void 0:n.find((({uuid:u})=>u!==Fs.value));return!!r&&"seller"===r.role}));return{__sfc:!0,props:t,i18n:n,useWidgetStyle:s,isOpponentTyping:o,isOpponentSeller:i,getMessageDate:e=>((e,t)=>{if(!e)return"";const{day:n,month:s,year:r}=Qs(e);if(t.year===r&&t.month===s){if(t.day===n)return tn(e);if(+t.day-7<+n)return sn(e)}return en(e)})(e,Qs(new Date)),Avatar:ge,TypingStatus:wn,ReadIcon:Le,SentIcon:Fe,checkIsCurrentUserMessage:$s}}});const Nn=ue(Un,(function(){var e,t=this,n=t._self._c,s=t._self._setupProxy;return n("div",{staticClass:"chat-thumbnail"},[n("div",{staticClass:"chat-thumbnail__avatar"},[t._t("avatar",(function(){return[n(s.Avatar,{attrs:{avatar:s.props.chat.logo,gender:s.props.chat.owner.gender}})]})),n("div",{staticClass:"chat-thumbnail__avatar__badge",class:{"chat-thumbnail__avatar__badge--active":s.props.chat.online_status}})],2),n("div",{staticClass:"chat-thumbnail__main"},[n("div",{staticClass:"chat-thumbnail__main__title"},[n("div",{staticClass:"chat-thumbnail__main__title__name truncate"},[n("div",{staticClass:"truncate"},[t._v(" "+t._s(s.props.chat.title)+" ")]),s.isOpponentSeller&&!s.useWidgetStyle?n("div",[t._v(" "+t._s(s.i18n.t("seller"))+" ")]):t._e()]),s.props.chat.last_message?n("div",{staticClass:"chat-thumbnail__main__title__date"},[t._v(" "+t._s(s.getMessageDate(null==(e=s.props.chat.last_message)?void 0:e.created_at))+" ")]):t._e()]),n("div",{staticClass:"chat-thumbnail__main__description"},[s.isOpponentTyping?n(s.TypingStatus):s.props.chat.last_message?s.props.chat.last_message.is_removed?n("div",{staticClass:"chat-thumbnail__last-message chat-thumbnail__last-message--light"},[t._v(" "+t._s(s.i18n.t("message_is_deleted"))+" ")]):"NOTIFICATION"===s.props.chat.last_message.type?n("div",{staticClass:"chat-thumbnail__last-message"},[t._v(" "+t._s(s.props.chat.last_message.body)+" ")]):"SIMPLE"===s.props.chat.last_message.type?n("div",{staticClass:"chat-thumbnail__last-message",class:{"chat-thumbnail__last-message--light":s.checkIsCurrentUserMessage({message:s.props.chat.last_message})}},[t._v(" "+t._s(s.props.chat.last_message.body)+" ")]):"WITH_ATTACHMENTS"===s.props.chat.last_message.type?n("div",{staticClass:"chat-thumbnail__last-message chat-thumbnail__last-message--attachment",class:{"chat-thumbnail__last-message--light":s.checkIsCurrentUserMessage({message:s.props.chat.last_message})}},[n("div",[t._v(t._s(s.i18n.t("attachments"))+": "+t._s(s.props.chat.last_message.attachments.length))]),n("div",[t._v(" "+t._s(s.props.chat.last_message.body)+" ")])]):t._e():n("div",{staticClass:"chat-thumbnail__last-message--light"},[t._v(" "+t._s(s.i18n.t("messages_is_empty"))+" ")]),s.props.chat.last_message?n("div",[s.props.chat.unread_count>0?n("div",{staticClass:"chat-thumbnail__unread-count"},[t._v(" "+t._s(s.props.chat.unread_count)+" ")]):s.checkIsCurrentUserMessage({message:s.props.chat.last_message})?["read"===s.props.chat.last_message.status?n(s.ReadIcon,{staticClass:"chat-thumbnail__read-status-icon"}):"sent"===s.props.chat.last_message.status?n(s.SentIcon,{staticClass:"chat-thumbnail__read-status-icon"}):t._e()]:t._e()],2):t._e()],1)])])}),[],!1,null,null,null,null).exports,Bn=Object(r.defineComponent)({__name:"ChatList",emits:["openAddingModal","closeMessenger"],setup(e,{emit:t}){const n=Object(r.inject)("i18n"),s=Object(r.inject)("useWidgetStyle"),o=Object(r.ref)(),i=Object(r.ref)(),a=Object(r.computed)((()=>b.chats)),l=Object(r.computed)((()=>"moderator"===Rs.value)),c=()=>{if(!o.value)return setTimeout((()=>c()),2500);o.value.addEventListener("scroll",(()=>{o.value.scrollHeight-o.value.clientHeight<o.value.scrollTop+10||_s()}))};return Object(r.onMounted)(c),{__sfc:!0,emit:t,i18n:n,useWidgetStyle:s,chatListRef:o,debounceSearch:i,chatList:a,showModeratorButtons:l,openAddingModal:()=>{t("openAddingModal")},onSellerSearch:()=>{i.value&&(clearTimeout(i.value),i.value=void 0),i.value=setTimeout((()=>{ds(),(e=>{!e||Lt({element:"ms[messenger-chats-search]",event_type:"submit",event_content:e})})(hs.value),Object(r.nextTick)(_s)}),250)},onCloseMessenger:()=>{t("closeMessenger")},handleAddScrollListener:c,ChatThumbnail:Nn,CloseIcon:Te,LoadingIcon:Ce,SearchIcon:Pe,WriteIcon:Ae,isConnected:Qt,isChatsFetching:cs,searchChatsField:hs,openedChat:ms,setOpenedChat:gs,resetSearchField:Cs,chatListDisplayedError:At}}});var zn=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",[t("div",{staticClass:"chat-list-header"},[t("div",{staticClass:"chat-list-header__title",class:{"chat-list-header__title--widget":s.useWidgetStyle}},[e._v(" "+e._s(s.i18n.t("chats"))+" "),s.showModeratorButtons?t("button",{on:{click:function(e){return s.openAddingModal()}}},[t(s.WriteIcon,{staticClass:"chat-list-header__icon"})],1):e._e(),s.useWidgetStyle?t("button",{staticClass:"chat-list-header__close-button",on:{click:s.onCloseMessenger}},[t(s.CloseIcon)],1):e._e()]),t("div",{staticClass:"chat-list-header__search"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.searchChatsField,expression:"searchChatsField"}],staticClass:"chat-list-header__search-input",attrs:{disabled:!s.isConnected,placeholder:`${s.i18n.t("search")}`},domProps:{value:s.searchChatsField},on:{input:[function(e){e.target.composing||(s.searchChatsField=e.target.value)},s.onSellerSearch],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:s.onSellerSearch.apply(null,arguments)}}}),t("div",{staticClass:"chat-list-header__search-action"},[s.searchChatsField?t("button",{staticClass:"chat-list-header__clear-button",attrs:{disabled:!s.isConnected},on:{click:s.resetSearchField}},[t(s.CloseIcon)],1):t("button",{staticClass:"chat-list-header__search-button",attrs:{disabled:!s.isConnected},on:{click:s.onSellerSearch}},[t(s.SearchIcon)],1)])])]),s.chatListDisplayedError?t("div",{staticClass:"chat-list-wrapper__error"},[t(s.LoadingIcon,{staticClass:"chat-list-wrapper__error__icon"}),t("span",[e._v(" "+e._s(s.chatListDisplayedError)+" ")])],1):e._e(),t("div",{ref:"chatListRef",staticClass:"chat-list-wrapper__scroll"},[e._l(s.chatList,(function(e){var i;return t("div",{key:e.uuid,on:{click:function(a){return s.setOpenedChat(e)}}},[t(s.ChatThumbnail,{class:{"chat-thumbnail--active":(null==(i=s.openedChat)?void 0:i.uuid)===e.uuid},attrs:{chat:e}})],1)})),s.isChatsFetching?t("div",{staticClass:"loading-container"},[t(s.LoadingIcon)],1):s.chatList.length?e._e():t("div",{staticClass:"chat-list-wrapper__no-chats"},[e._v(" "+e._s(s.i18n.t("no_chats"))+" ")])],2)])};const Hn=ue(Bn,zn,[],!1,null,null,null,null).exports,Vn=Object(r.defineComponent)({__name:"ChatHeader",setup:e=>({__sfc:!0,i18n:Object(r.inject)("i18n"),useWidgetStyle:Object(r.inject)("useWidgetStyle"),isOpponentTyping:Object(r.computed)((()=>{var e;return Boolean(null==(e=os.value)?void 0:e.some((({chat:e})=>{var u;return e===(null==(u=ms.value)?void 0:u.uuid)})))})),isOpponentSeller:Object(r.computed)((()=>{if(!ms.value||!Rs.value||"seller"===Rs.value)return!1;if(Fs.value!==ms.value.owner.uuid)return"seller"===ms.value.owner.role;const e=ms.value.participants.find((e=>e.uuid!==Fs.value));return!!e&&"seller"===e.role})),showModeratorButtons:Object(r.computed)((()=>"moderator"===Rs.value)),onClickSellerBilling:()=>{!ms.value||(e=>{!Ot.value||("seller"===e.owner.role?Ot.value("onSellerBillingClick",e.owner):Ot.value("onSellerBillingClick",e.participants[0]))})(ms.value)},onClickSellerSettings:()=>{!ms.value||(e=>{!Ot.value||("seller"===e.owner.role?Ot.value("onSellerSettingsClick",e.owner):Ot.value("onSellerSettingsClick",e.participants[0]))})(ms.value)},openedChat:ms,closeChat:fs,handleReadAllMessages:Kt,Avatar:ge,CommonButton:ve,TypingStatus:wn,ArrowBackIcon:be,BillingIcon:Se,ReadIcon:Le,SettingsIcon:De})});const Zn=ue(Vn,(function(){var e,t=this,n=t._self._c,s=t._self._setupProxy;return null!=(e=s.openedChat)&&e.uuid?n("div",{staticClass:"chat-header",class:{"chat-header--widget":s.useWidgetStyle}},[n("button",{staticClass:"chat-header__back-button",class:{"chat-header__back-button--hidden":!s.useWidgetStyle},on:{click:s.closeChat}},[n(s.ArrowBackIcon)],1),n("div",{staticClass:"chat-header__avatar"},[n(s.Avatar,{attrs:{gender:s.openedChat.owner.gender,avatar:s.openedChat.logo}})],1),n("div",{staticClass:"chat-header__details"},[n("div",{staticClass:"chat-header__title"},[t._v(" "+t._s(s.openedChat.title)+" ")]),s.isOpponentTyping?n(s.TypingStatus,{staticClass:"chat-header__typing-status animate-pulse"}):n("div",{staticClass:"chat-header__status",class:[s.openedChat.online_status?"chat-header__status--online":"chat-header__status--offline"]},[t._v(" "+t._s(s.openedChat.online_status?"Online":"Offline")+" ")])],1),s.showModeratorButtons?n("div",{staticClass:"chat-header__actions"},[s.openedChat.unread_count?n(s.CommonButton,{attrs:{size:s.useWidgetStyle?"small":"default"},on:{click:s.handleReadAllMessages}},[s.useWidgetStyle?n(s.ReadIcon,{staticClass:"chat-header__actions__icon"}):n("span",[t._v(" "+t._s(s.i18n.t("read_messages"))+" ")])],1):t._e(),s.isOpponentSeller?n(s.CommonButton,{attrs:{ghost:"",size:s.useWidgetStyle?"small":"default"},on:{click:s.onClickSellerBilling}},[s.useWidgetStyle?n(s.BillingIcon,{staticClass:"chat-header__actions__icon"}):n("span",[t._v(" "+t._s(s.i18n.t("billing_settings"))+" ")])],1):t._e(),s.isOpponentSeller?n(s.CommonButton,{attrs:{ghost:"",size:s.useWidgetStyle?"small":"default"},on:{click:s.onClickSellerSettings}},[s.useWidgetStyle?n(s.SettingsIcon,{staticClass:"chat-header__actions__icon"}):n("span",[t._v(" "+t._s(s.i18n.t("seller_settings"))+" ")])],1):t._e()],1):t._e()]):t._e()}),[],!1,null,null,null,null).exports,Jn=Object(r.defineComponent)({__name:"Chat",setup(e){const t=Object(r.inject)("i18n"),n=Object(r.inject)("useWidgetStyle"),s=Object(r.ref)(),o=Object(r.ref)(),i=Object(r.ref)(),a=Object(r.ref)([]),l=Object(r.ref)(),c=Object(r.computed)((()=>kn.join(", "))),h=Object(r.computed)((()=>"moderator"===Rs.value||"seller"===Rs.value)),u=async()=>{var e;if(null!=(e=ms.value)&&e.uuid)try{await(({chatId:e,sender:t,olderThan:n})=>Os({url:`chats/${e}/mark-as-read/?sender=${t}&older_than=${n}`}))({chatId:ms.value.uuid,sender:Rs.value,olderThan:i.value}),a.value=[],i.value=void 0,l.value&&(clearTimeout(l.value),l.value=void 0)}catch(e){q(t.t("read_messages_error")),Pt({error:e})}};return Object(r.onMounted)((()=>{(e=>{as.value=e})(s),Dn(),as.value.addEventListener("scroll",(({target:e})=>{var t;(null==(t=as.value)?void 0:t.scrollTop)<200?Rn():(null==e?void 0:e.scrollHeight)-(null==e?void 0:e.clientHeight)-(null==e?void 0:e.scrollTop)<50&&Fn()}))})),Object(r.watch)((()=>{var e;return null==(e=ms.value)?void 0:e.uuid}),Dn),{__sfc:!0,i18n:t,useWidgetStyle:n,infiniteScrollRef:s,chatFooterRef:o,lastReadMessageUuid:i,observedMessages:a,readMessagesDebounce:l,acceptedAttachments:c,showPageSourceMessage:h,handleReadOpponentMessages:u,onMessegeSaw:e=>{!e.uuid||"read"!==e.status&&(e.author.uuid===Fs.value||e.author.role===Rs.value||i.value!==e.uuid&&(a.value.includes(e.uuid)||(a.value.push(e.uuid),!(Bt.value.findIndex((t=>t.uuid===e.uuid))<Bt.value.findIndex((e=>e.uuid===i.value)))&&(i.value=e.uuid,l.value&&clearTimeout(l.value),l.value=setTimeout(u,300)))))},handleDrop:e=>{var n,r;if(pn.value)return;const l=e.dataTransfer;if(!l||!l.files||!l.files.length)return;const{files:h}=l;for(let e=0;e<h.length;e++){const l=h[e];if(l.size>1e8)return q(t.t("file_too_large"));if(c.value.includes(l.type)){if(!l)return;if((null==(n=o.value)?void 0:n.getAttachmentLength())>=6)return q(t.t("max_file_count"));null==(r=o.value)||r.handleAddAttachment(l)}else q(t.t("unsupported_format"))}},isNewDay:e=>{if(0===e)return!0;return new Date(Zt.value[e].created_at).getDate()!==new Date(Zt.value[e-1].created_at).getDate()},handleEditMessage:()=>{var e,t;null==(t=null==(e=o.value)?void 0:e.handleEditMessage)||t.call(e),dn(void 0)},handleResendMessage:()=>{var e,t;null==(t=null==(e=o.value)?void 0:e.handleResendMessage)||t.call(e),gn()},handlePaste:e=>{var t;null==(t=o.value)||t.handlePaste(e)},ChatHeader:Zn,ChatFooter:Wn,IntersectionObserver:Gs,MessagesGroupDate:rn,MessagesSkeleton:an,NotificationMessage:ln,PageSourceMessage:un,SimpleMessage:Cn,markedUnreadMessage:Gt,messagesDataSource:Bt,allMessagesDataSource:Zt,checkIsCurrentUserMessage:$s,chatDisplayedError:Dt,isFetching:jn,isFetchingBottom:In,closeContextMenu:gn,messageSelected:_n,sendingMessageSelected:hn,onOpenGallery:It}}});var Gn=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{on:{drop:function(e){return e.stopPropagation(),e.preventDefault(),s.handleDrop.apply(null,arguments)},dragover:function(e){e.preventDefault()},paste:s.handlePaste}},[s.messageSelected||s.sendingMessageSelected?t("div",{staticClass:"chat__blur",on:{click:s.closeContextMenu}}):e._e(),t(s.ChatHeader),s.isFetching?t("div",{staticClass:"chat__container__loader chat__container__loader--top animate-pulse",class:{"chat__container__loader--top--widget":s.useWidgetStyle}}):e._e(),t("div",{staticClass:"chat__notification",class:{"chat__notification--active":s.chatDisplayedError,"chat__notification--active--widget":s.chatDisplayedError&&s.useWidgetStyle}},[t("div",{staticClass:"chat__notification__item"},[e._v(" "+e._s(s.chatDisplayedError)+" ")])]),t("div",{ref:"infiniteScrollRef",staticClass:"chat__scroll"},[t("div",{staticClass:"chat__container"},[e._l(s.allMessagesDataSource,(function(n,i){return t("div",{on:{click:s.closeContextMenu}},[s.markedUnreadMessage&&s.markedUnreadMessage===n.uuid?t("div",{staticClass:"chat__container__new-message-block"},[t("div",{staticClass:"chat__container__new-message-block__item"},[e._v(" "+e._s(s.i18n.t("new_messages"))+" ")])]):e._e(),s.isNewDay(i)?t("div",{staticClass:"chat__container__date",class:{"chat__container__date--blurred":s.messageSelected&&s.messageSelected.uuid===n.uuid}},[t(s.MessagesGroupDate,{staticClass:"chat__container__date__item",attrs:{message:n}})],1):e._e(),"PAGE_SOURCE"===n.type&&s.showPageSourceMessage?t(s.IntersectionObserver,{attrs:{root:s.infiniteScrollRef},on:{intersect:function(a){return s.onMessegeSaw(n)}}},[t(s.PageSourceMessage,{attrs:{message:n}})],1):"NOTIFICATION"===n.type?t(s.IntersectionObserver,{attrs:{root:s.infiniteScrollRef},on:{intersect:function(a){return s.onMessegeSaw(n)}}},[t(s.NotificationMessage,{attrs:{message:n,checkIsCurrentUserMessage:s.checkIsCurrentUserMessage}})],1):n.is_removed?t(s.IntersectionObserver,{key:n.uuid,staticClass:"chat__container__deleted-message",class:{"chat__container__deleted-message--own":s.checkIsCurrentUserMessage({message:n})},attrs:{root:s.infiniteScrollRef},on:{intersect:function(a){return s.onMessegeSaw(n)}}},[e._v(" "+e._s(s.i18n.t("message_is_deleted"))+" ")]):t(s.IntersectionObserver,{attrs:{root:s.infiniteScrollRef,message:n},on:{intersect:function(a){return s.onMessegeSaw(n)}}},[t(s.SimpleMessage,{attrs:{message:n,index:i,checkIsCurrentUserMessage:s.checkIsCurrentUserMessage},on:{openGallery:s.onOpenGallery,resendMessage:s.handleResendMessage,editMessage:s.handleEditMessage}})],1)],1)})),s.isFetching&&!s.messagesDataSource.length?t(s.MessagesSkeleton):e._e()],2)]),s.isFetchingBottom&&!s.isFetching?t("div",{staticClass:"chat__container__loader"}):e._e(),t(s.ChatFooter,{ref:"chatFooterRef"})],1)};const qn=ue(Jn,Gn,[],!1,null,null,null,null).exports;const Yn=ue(Object(r.defineComponent)({__name:"MainLayout",emits:["closeMessenger"],setup(e,{emit:t}){const n=Object(r.inject)("useWidgetStyle"),s=Object(r.ref)(!1),o=Object(r.computed)((()=>{var e;return Boolean(null==(e=ms.value)?void 0:e.uuid)}));return{__sfc:!0,emit:t,useWidgetStyle:n,isShowAddChat:s,showChat:o,closeMessenger:()=>{t("closeMessenger")},openAddingModal:()=>{s.value=!0},closeAddingModal:()=>{s.value=!1},ChatList:Hn,Chat:qn,AddNewChatModal:zs}}}),(function(){var e=this._self._c,s=this._self._setupProxy;return e("div",{staticClass:"synthetic-messenger"},[e(s.ChatList,{staticClass:"chat-list-wrapper",class:{"chat-list-wrapper--hidden":s.showChat,"chat-list-wrapper--large":!s.useWidgetStyle},on:{openAddingModal:s.openAddingModal,closeMessenger:s.closeMessenger}}),e(s.Chat,{staticClass:"chat-wrapper",class:{"chat-wrapper--hidden":!s.showChat,"chat-wrapper--large":s.showChat&&!s.useWidgetStyle}}),e(s.AddNewChatModal,{attrs:{visible:s.isShowAddChat},on:{close:s.closeAddingModal}})],1)}),[],!1,null,null,null,null).exports,Kn=()=>{ss(),Ss.sso_access_token="",Ss.role=void 0,Ss.language=void 0,Ss.domain="",Ss.base_url="",Promise.resolve(Ss),fs(),ds(),b.count=0,b.total_unread_messages_count=0,b.chats=[],b.is_typing=[]},Xn=Object(r.defineComponent)({__name:"MessengerUI",props:{useWidgetStyle:{type:Boolean,default:!1}},emits:["error","connected","disconnected","closeMessenger","onUnreadChange","onSellerBillingClick","onSellerSettingsClick","onOpenGallery","metrics","online"],setup(e,{expose:t,emit:n}){const s=e,o=async e=>((e=>{de.value=e})(e.cdn_path_function),(e=>{ks.value=e})(e.marketplace_url),(async e=>{b.count&&ds(),ms.value&&fs();try{return await Es(e),await es({sso_access_token:e.sso_access_token,domain:e.domain}),_s(),Promise.resolve({code:200})}catch(e){return Pt({error:e}),Promise.reject({code:401})}})(e)),i=()=>Kn(),a=()=>{(e=>{ys.value=e})(Boolean(document.hidden)),document.hidden&&Yt()};return(e=>{Ot.value=e})(n),Object(r.provide)("i18n",le),Object(r.provide)("useWidgetStyle",Object(r.computed)((()=>s.useWidgetStyle))),Object(r.onMounted)((()=>{document.removeEventListener("visibilitychange",a),document.addEventListener("visibilitychange",a)})),t({install:o,uninstall:i,addNewChat:vs,handleChangeUserStatus:Ds}),{__sfc:!0,props:s,emit:n,install:o,uninstall:i,handleVisibilityChange:a,MainLayout:Yn}}});const Qn=ue(Xn,(function(){var e=this;return(0,e._self._c)(e._self._setupProxy.MainLayout,{staticClass:"synthetic-messenger",on:{closeMessenger:function(t){return e.$emit("closeMessenger")}}})}),[],!1,null,null,null,null).exports}}]);